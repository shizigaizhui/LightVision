{"version":3,"file":"garden.js","sources":["../node_modules/three/examples/jsm/controls/OrbitControls.js","../node_modules/webxr-polyfill/build/webxr-polyfill.module.js","../node_modules/@tweenjs/tween.js/dist/tween.esm.js","../src/lib/flow.js","../src/lib/scene.js","../node_modules/three/examples/jsm/webxr/VRButton.js","../node_modules/three/examples/jsm/loaders/GLTFLoader.js","../node_modules/three/examples/jsm/libs/motion-controllers.module.js","../node_modules/three/examples/jsm/webxr/XRControllerModelFactory.js","../src/lib/controllers/gamepad.js","../src/lib/controllers/locomotion/fade.js","../src/lib/controllers/controllers.js","../src/lib/positions.js","../src/lib/meshes.js","../src/lib/audio.js","../node_modules/three/examples/jsm/libs/stats.module.js","../src/garden.js"],"sourcesContent":["import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min < max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove, false );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\n\n\t// make sure element can receive keys.\n\n\tif ( scope.domElement.tabIndex === - 1 ) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","/**\n * @license\n * webxr-polyfill\n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * cardboard-vr-display\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * webvr-polyfill-dpdb \n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * wglu-preserve-state\n * Copyright (c) 2016, Brandon Jones.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @license\n * nosleep.js\n * Copyright (c) 2017, Rich Tibbett\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nconst _global = typeof global !== 'undefined' ? global :\n                typeof self !== 'undefined' ? self :\n                typeof window !== 'undefined' ? window : {};\n\nconst PRIVATE = Symbol('@@webxr-polyfill/EventTarget');\nclass EventTarget {\n  constructor() {\n    this[PRIVATE] = {\n      listeners: new Map(),\n    };\n  }\n  addEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    typedListeners.push(listener);\n    this[PRIVATE].listeners.set(type, typedListeners);\n  }\n  removeEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    for (let i = typedListeners.length; i >= 0; i--) {\n      if (typedListeners[i] === listener) {\n        typedListeners.pop();\n      }\n    }\n  }\n  dispatchEvent(type, event) {\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    const queue = [];\n    for (let i = 0; i < typedListeners.length; i++) {\n      queue[i] = typedListeners[i];\n    }\n    for (let listener of queue) {\n      listener(event);\n    }\n    if (typeof this[`on${type}`] === 'function') {\n      this[`on${type}`](event);\n    }\n  }\n}\n\nconst EPSILON = 0.000001;\nlet ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n\n\nconst degree = Math.PI / 180;\n\nfunction create() {\n  let out = new ARRAY_TYPE(16);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\nfunction invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n\n\nfunction multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n  out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n  out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n  out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\nfunction fromRotationTranslation(out, q, v) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\nfunction getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n\nfunction getRotation(out, mat) {\n  let trace = mat[0] + mat[5] + mat[10];\n  let S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if ((mat[0] > mat[5]) && (mat[0] > mat[10])) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n  return out;\n}\n\n\n\n\nfunction perspective(out, fovy, aspect, near, far) {\n  let f = 1.0 / Math.tan(fovy / 2), nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = (2 * far * near) * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n  return out;\n}\n\nfunction create$1() {\n  let out = new ARRAY_TYPE(3);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\nfunction clone$1(a) {\n  var out = new ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\nfunction length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\nfunction fromValues$1(x, y, z) {\n  let out = new ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction copy$1(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nfunction add$1(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n\n\n\n\n\n\n\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n\n\n\n\n\nfunction normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x*x + y*y + z*z;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction cross(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2];\n  let bx = b[0], by = b[1], bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n\n\n\n\n\nfunction transformQuat(out, a, q) {\n    let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n    let x = a[0], y = a[1], z = a[2];\n    let uvx = qy * z - qz * y,\n        uvy = qz * x - qx * z,\n        uvz = qx * y - qy * x;\n    let uuvx = qy * uvz - qz * uvy,\n        uuvy = qz * uvx - qx * uvz,\n        uuvz = qx * uvy - qy * uvx;\n    let w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n\n\n\nfunction angle(a, b) {\n  let tempA = fromValues$1(a[0], a[1], a[2]);\n  let tempB = fromValues$1(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  let cosine = dot(tempA, tempB);\n  if(cosine > 1.0) {\n    return 0;\n  }\n  else if(cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n\n\n\n\n\n\n\nconst len = length;\n\nconst forEach = (function() {\n  let vec = create$1();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 3;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n    }\n    return a;\n  };\n})();\n\nfunction create$2() {\n  let out = new ARRAY_TYPE(9);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\nfunction create$3() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n  return out;\n}\nfunction clone$3(a) {\n  let out = new ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nfunction fromValues$3(x, y, z, w) {\n  let out = new ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\nfunction copy$3(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction normalize$1(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  let len = x*x + y*y + z*z + w*w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n  }\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst forEach$1 = (function() {\n  let vec = create$3();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 4;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n    }\n    return a;\n  };\n})();\n\nfunction create$4() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  out[3] = 1;\n  return out;\n}\n\nfunction setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  let s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\nfunction multiply$4(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n\n\n\nfunction slerp(out, a, b, t) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  let omega, cosom, sinom, scale0, scale1;\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  if ( cosom < 0.0 ) {\n    cosom = -cosom;\n    bx = - bx;\n    by = - by;\n    bz = - bz;\n    bw = - bw;\n  }\n  if ( (1.0 - cosom) > EPSILON ) {\n    omega  = Math.acos(cosom);\n    sinom  = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n\nfunction invert$2(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let dot$$1 = a0*a0 + a1*a1 + a2*a2 + a3*a3;\n  let invDot = dot$$1 ? 1.0/dot$$1 : 0;\n  out[0] = -a0*invDot;\n  out[1] = -a1*invDot;\n  out[2] = -a2*invDot;\n  out[3] = a3*invDot;\n  return out;\n}\n\nfunction fromMat3(out, m) {\n  let fTrace = m[0] + m[4] + m[8];\n  let fRoot;\n  if ( fTrace > 0.0 ) {\n    fRoot = Math.sqrt(fTrace + 1.0);\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5/fRoot;\n    out[0] = (m[5]-m[7])*fRoot;\n    out[1] = (m[6]-m[2])*fRoot;\n    out[2] = (m[1]-m[3])*fRoot;\n  } else {\n    let i = 0;\n    if ( m[4] > m[0] )\n      i = 1;\n    if ( m[8] > m[i*3+i] )\n      i = 2;\n    let j = (i+1)%3;\n    let k = (i+2)%3;\n    fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n    out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n    out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n  }\n  return out;\n}\nfunction fromEuler(out, x, y, z) {\n    let halfToRad = 0.5 * Math.PI / 180.0;\n    x *= halfToRad;\n    y *= halfToRad;\n    z *= halfToRad;\n    let sx = Math.sin(x);\n    let cx = Math.cos(x);\n    let sy = Math.sin(y);\n    let cy = Math.cos(y);\n    let sz = Math.sin(z);\n    let cz = Math.cos(z);\n    out[0] = sx * cy * cz - cx * sy * sz;\n    out[1] = cx * sy * cz + sx * cy * sz;\n    out[2] = cx * cy * sz - sx * sy * cz;\n    out[3] = cx * cy * cz + sx * sy * sz;\n    return out;\n}\n\nconst clone$4 = clone$3;\nconst fromValues$4 = fromValues$3;\nconst copy$4 = copy$3;\n\n\n\n\n\n\n\n\n\n\nconst normalize$2 = normalize$1;\n\n\nconst rotationTo = (function() {\n  let tmpvec3 = create$1();\n  let xUnitVec3 = fromValues$1(1,0,0);\n  let yUnitVec3 = fromValues$1(0,1,0);\n  return function(out, a, b) {\n    let dot$$1 = dot(a, b);\n    if (dot$$1 < -0.999999) {\n      cross(tmpvec3, xUnitVec3, a);\n      if (len(tmpvec3) < 0.000001)\n        cross(tmpvec3, yUnitVec3, a);\n      normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot$$1 > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot$$1;\n      return normalize$2(out, out);\n    }\n  };\n})();\nconst sqlerp = (function () {\n  let temp1 = create$4();\n  let temp2 = create$4();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}());\nconst setAxes = (function() {\n  let matr = create$2();\n  return function(out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize$2(out, fromMat3(out, matr));\n  };\n})();\n\nconst PRIVATE$1 = Symbol('@@webxr-polyfill/XRRigidTransform');\nclass XRRigidTransform$1 {\n  constructor() {\n    this[PRIVATE$1] = {\n      matrix: null,\n      position: null,\n      orientation: null,\n      inverse: null,\n    };\n    if (arguments.length === 0) {\n      this[PRIVATE$1].matrix = identity(new Float32Array(16));\n    } else if (arguments.length === 1) {\n      if (arguments[0] instanceof Float32Array) {\n        this[PRIVATE$1].matrix = arguments[0];\n      } else {\n        this[PRIVATE$1].position = this._getPoint(arguments[0]);\n        this[PRIVATE$1].orientation = DOMPointReadOnly.fromPoint({\n            x: 0, y: 0, z: 0, w: 1\n        });\n      }\n    } else if (arguments.length === 2) {\n      this[PRIVATE$1].position = this._getPoint(arguments[0]);\n      this[PRIVATE$1].orientation = this._getPoint(arguments[1]);\n    } else {\n      throw new Error(\"Too many arguments!\");\n    }\n    if (this[PRIVATE$1].matrix) {\n        let position = create$1();\n        getTranslation(position, this[PRIVATE$1].matrix);\n        this[PRIVATE$1].position = DOMPointReadOnly.fromPoint({\n            x: position[0],\n            y: position[1],\n            z: position[2]\n        });\n        let orientation = create$4();\n        getRotation(orientation, this[PRIVATE$1].matrix);\n        this[PRIVATE$1].orientation = DOMPointReadOnly.fromPoint({\n          x: orientation[0],\n          y: orientation[1],\n          z: orientation[2],\n          w: orientation[3]\n        });\n    } else {\n        this[PRIVATE$1].matrix = identity(new Float32Array(16));\n        fromRotationTranslation(\n          this[PRIVATE$1].matrix,\n          fromValues$4(\n            this[PRIVATE$1].orientation.x,\n            this[PRIVATE$1].orientation.y,\n            this[PRIVATE$1].orientation.z,\n            this[PRIVATE$1].orientation.w),\n          fromValues$1(\n            this[PRIVATE$1].position.x,\n            this[PRIVATE$1].position.y,\n            this[PRIVATE$1].position.z)\n        );\n    }\n  }\n  _getPoint(arg) {\n    if (arg instanceof DOMPointReadOnly) {\n      return arg;\n    }\n    return DOMPointReadOnly.fromPoint(arg);\n  }\n  get matrix() { return this[PRIVATE$1].matrix; }\n  get position() { return this[PRIVATE$1].position; }\n  get orientation() { return this[PRIVATE$1].orientation; }\n  get inverse() {\n    if (this[PRIVATE$1].inverse === null) {\n      let invMatrix = identity(new Float32Array(16));\n      invert(invMatrix, this[PRIVATE$1].matrix);\n      this[PRIVATE$1].inverse = new XRRigidTransform$1(invMatrix);\n      this[PRIVATE$1].inverse[PRIVATE$1].inverse = this;\n    }\n    return this[PRIVATE$1].inverse;\n  }\n}\n\nconst PRIVATE$2 = Symbol('@@webxr-polyfill/XRSpace');\n\nclass XRSpace {\n  constructor(specialType = null, inputSource = null) {\n    this[PRIVATE$2] = {\n      specialType,\n      inputSource,\n      baseMatrix: null,\n      inverseBaseMatrix: null,\n      lastFrameId: -1\n    };\n  }\n  get _specialType() {\n    return this[PRIVATE$2].specialType;\n  }\n  get _inputSource() {\n    return this[PRIVATE$2].inputSource;\n  }\n  _ensurePoseUpdated(device, frameId) {\n    if (frameId == this[PRIVATE$2].lastFrameId) return;\n    this[PRIVATE$2].lastFrameId = frameId;\n    this._onPoseUpdate(device);\n  }\n  _onPoseUpdate(device) {\n    if (this[PRIVATE$2].specialType == 'viewer') {\n      this._baseMatrix = device.getBasePoseMatrix();\n    }\n  }\n  set _baseMatrix(matrix) {\n    this[PRIVATE$2].baseMatrix = matrix;\n    this[PRIVATE$2].inverseBaseMatrix = null;\n  }\n  get _baseMatrix() {\n    if (!this[PRIVATE$2].baseMatrix) {\n      if (this[PRIVATE$2].inverseBaseMatrix) {\n        this[PRIVATE$2].baseMatrix = new Float32Array(16);\n        invert(this[PRIVATE$2].baseMatrix, this[PRIVATE$2].inverseBaseMatrix);\n      }\n    }\n    return this[PRIVATE$2].baseMatrix;\n  }\n  set _inverseBaseMatrix(matrix) {\n    this[PRIVATE$2].inverseBaseMatrix = matrix;\n    this[PRIVATE$2].baseMatrix = null;\n  }\n  get _inverseBaseMatrix() {\n    if (!this[PRIVATE$2].inverseBaseMatrix) {\n      if (this[PRIVATE$2].baseMatrix) {\n        this[PRIVATE$2].inverseBaseMatrix = new Float32Array(16);\n        invert(this[PRIVATE$2].inverseBaseMatrix, this[PRIVATE$2].baseMatrix);\n      }\n    }\n    return this[PRIVATE$2].inverseBaseMatrix;\n  }\n  _getSpaceRelativeTransform(space) {\n    if (!this._inverseBaseMatrix || !space._baseMatrix) {\n      return null;\n    }\n    let out = new Float32Array(16);\n    multiply(out, this._inverseBaseMatrix, space._baseMatrix);\n    return new XRRigidTransform$1(out);\n  }\n}\n\nconst DEFAULT_EMULATION_HEIGHT = 1.6;\nconst PRIVATE$3 = Symbol('@@webxr-polyfill/XRReferenceSpace');\nconst XRReferenceSpaceTypes = [\n  'viewer',\n  'local',\n  'local-floor',\n  'bounded-floor',\n  'unbounded'\n];\nfunction isFloor(type) {\n  return type === 'bounded-floor' || type === 'local-floor';\n}\nclass XRReferenceSpace extends XRSpace {\n  constructor(type, transform = null) {\n    if (!XRReferenceSpaceTypes.includes(type)) {\n      throw new Error(`XRReferenceSpaceType must be one of ${XRReferenceSpaceTypes}`);\n    }\n    super(type);\n    if (type === 'bounded-floor' && !transform) {\n      throw new Error(`XRReferenceSpace cannot use 'bounded-floor' type if the platform does not provide the floor level`);\n    }\n    if (isFloor(type) && !transform) {\n      transform = identity(new Float32Array(16));\n      transform[13] = DEFAULT_EMULATION_HEIGHT;\n    }\n    this._inverseBaseMatrix = transform || identity(new Float32Array(16));\n    this[PRIVATE$3] = {\n      type,\n      transform,\n      originOffset : identity(new Float32Array(16)),\n    };\n  }\n  _transformBasePoseMatrix(out, pose) {\n    multiply(out, this._inverseBaseMatrix, pose);\n  }\n  _originOffsetMatrix() {\n    return this[PRIVATE$3].originOffset;\n  }\n  _adjustForOriginOffset(transformMatrix) {\n    let inverseOriginOffsetMatrix = new Float32Array(16);\n    invert(inverseOriginOffsetMatrix, this[PRIVATE$3].originOffset);\n    multiply(transformMatrix, inverseOriginOffsetMatrix, transformMatrix);\n  }\n  _getSpaceRelativeTransform(space) {\n    let transform = super._getSpaceRelativeTransform(space);\n    this._adjustForOriginOffset(transform.matrix);\n    return new XRRigidTransform(transform.matrix);\n  }\n  getOffsetReferenceSpace(additionalOffset) {\n    let newSpace = new XRReferenceSpace(\n      this[PRIVATE$3].type,\n      this[PRIVATE$3].transform,\n      this[PRIVATE$3].bounds);\n    multiply(newSpace[PRIVATE$3].originOffset, this[PRIVATE$3].originOffset, additionalOffset.matrix);\n    return newSpace;\n  }\n}\n\nconst PRIVATE$4 = Symbol('@@webxr-polyfill/XR');\nconst XRSessionModes = ['inline', 'immersive-vr', 'immersive-ar'];\nconst DEFAULT_SESSION_OPTIONS = {\n  'inline': {\n    requiredFeatures: ['viewer'],\n    optionalFeatures: [],\n  },\n  'immersive-vr': {\n    requiredFeatures: ['viewer', 'local'],\n    optionalFeatures: [],\n  },\n  'immersive-ar': {\n    requiredFeatures: ['viewer', 'local'],\n    optionalFeatures: [],\n  }\n};\nconst POLYFILL_REQUEST_SESSION_ERROR =\n`Polyfill Error: Must call navigator.xr.isSessionSupported() with any XRSessionMode\nor navigator.xr.requestSession('inline') prior to requesting an immersive\nsession. This is a limitation specific to the WebXR Polyfill and does not apply\nto native implementations of the API.`;\nclass XRSystem extends EventTarget {\n  constructor(devicePromise) {\n    super();\n    this[PRIVATE$4] = {\n      device: null,\n      devicePromise,\n      immersiveSession: null,\n      inlineSessions: new Set(),\n    };\n    devicePromise.then((device) => { this[PRIVATE$4].device = device; });\n  }\n  async isSessionSupported(mode) {\n    if (!this[PRIVATE$4].device) {\n      await this[PRIVATE$4].devicePromise;\n    }\n    if (mode != 'inline') {\n      return Promise.resolve(this[PRIVATE$4].device.isSessionSupported(mode));\n    }\n    return Promise.resolve(true);\n  }\n  async requestSession(mode, options) {\n    if (!this[PRIVATE$4].device) {\n      if (mode != 'inline') {\n        throw new Error(POLYFILL_REQUEST_SESSION_ERROR);\n      } else {\n        await this[PRIVATE$4].devicePromise;\n      }\n    }\n    if (!XRSessionModes.includes(mode)) {\n      throw new TypeError(\n          `The provided value '${mode}' is not a valid enum value of type XRSessionMode`);\n    }\n    const defaultOptions = DEFAULT_SESSION_OPTIONS[mode];\n    const requiredFeatures = defaultOptions.requiredFeatures.concat(\n        options && options.requiredFeatures ? options.requiredFeatures : []);\n    const optionalFeatures = defaultOptions.optionalFeatures.concat(\n        options && options.optionalFeatures ? options.optionalFeatures : []);\n    const enabledFeatures = new Set();\n    let requirementsFailed = false;\n    for (let feature of requiredFeatures) {\n      if (!this[PRIVATE$4].device.isFeatureSupported(feature)) {\n        console.error(`The required feature '${feature}' is not supported`);\n        requirementsFailed = true;\n      } else {\n        enabledFeatures.add(feature);\n      }\n    }\n    if (requirementsFailed) {\n      throw new DOMException('Session does not support some required features', 'NotSupportedError');\n    }\n    for (let feature of optionalFeatures) {\n      if (!this[PRIVATE$4].device.isFeatureSupported(feature)) {\n        console.log(`The optional feature '${feature}' is not supported`);\n      } else {\n        enabledFeatures.add(feature);\n      }\n    }\n    const sessionId = await this[PRIVATE$4].device.requestSession(mode, enabledFeatures);\n    const session = new XRSession(this[PRIVATE$4].device, mode, sessionId);\n    if (mode == 'inline') {\n      this[PRIVATE$4].inlineSessions.add(session);\n    } else {\n      this[PRIVATE$4].immersiveSession = session;\n    }\n    const onSessionEnd = () => {\n      if (mode == 'inline') {\n        this[PRIVATE$4].inlineSessions.delete(session);\n      } else {\n        this[PRIVATE$4].immersiveSession = null;\n      }\n      session.removeEventListener('end', onSessionEnd);\n    };\n    session.addEventListener('end', onSessionEnd);\n    return session;\n  }\n}\n\nlet now;\nif ('performance' in _global === false) {\n  let startTime = Date.now();\n  now = () => Date.now() - startTime;\n} else {\n  now = () => performance.now();\n}\nvar now$1 = now;\n\nconst PRIVATE$5 = Symbol('@@webxr-polyfill/XRPose');\nclass XRPose$1 {\n  constructor(transform, emulatedPosition) {\n    this[PRIVATE$5] = {\n      transform,\n      emulatedPosition,\n    };\n  }\n  get transform() { return this[PRIVATE$5].transform; }\n  get emulatedPosition() { return this[PRIVATE$5].emulatedPosition; }\n}\n\nconst PRIVATE$6 = Symbol('@@webxr-polyfill/XRViewerPose');\nclass XRViewerPose extends XRPose$1 {\n  constructor(transform, views, emulatedPosition = false) {\n    super(transform, emulatedPosition);\n    this[PRIVATE$6] = {\n      views\n    };\n  }\n  get views() {\n    return this[PRIVATE$6].views;\n  }\n}\n\nconst PRIVATE$7 = Symbol('@@webxr-polyfill/XRViewport');\nclass XRViewport {\n  constructor(target) {\n    this[PRIVATE$7] = { target };\n  }\n  get x() { return this[PRIVATE$7].target.x; }\n  get y() { return this[PRIVATE$7].target.y; }\n  get width() { return this[PRIVATE$7].target.width; }\n  get height() { return this[PRIVATE$7].target.height; }\n}\n\nconst XREyes = ['left', 'right', 'none'];\nconst PRIVATE$8 = Symbol('@@webxr-polyfill/XRView');\nclass XRView {\n  constructor(device, transform, eye, sessionId) {\n    if (!XREyes.includes(eye)) {\n      throw new Error(`XREye must be one of: ${XREyes}`);\n    }\n    const temp = Object.create(null);\n    const viewport = new XRViewport(temp);\n    this[PRIVATE$8] = {\n      device,\n      eye,\n      viewport,\n      temp,\n      sessionId,\n      transform,\n    };\n  }\n  get eye() { return this[PRIVATE$8].eye; }\n  get projectionMatrix() { return this[PRIVATE$8].device.getProjectionMatrix(this.eye); }\n  get transform() { return this[PRIVATE$8].transform; }\n  _getViewport(layer) {\n    if (this[PRIVATE$8].device.getViewport(this[PRIVATE$8].sessionId,\n                                           this.eye,\n                                           layer,\n                                           this[PRIVATE$8].temp)) {\n      return this[PRIVATE$8].viewport;\n    }\n    return undefined;\n  }\n}\n\nconst PRIVATE$9 = Symbol('@@webxr-polyfill/XRFrame');\nconst NON_ACTIVE_MSG = \"XRFrame access outside the callback that produced it is invalid.\";\nconst NON_ANIMFRAME_MSG = \"getViewerPose can only be called on XRFrame objects passed to XRSession.requestAnimationFrame callbacks.\";\nlet NEXT_FRAME_ID = 0;\nclass XRFrame {\n  constructor(device, session, sessionId) {\n    this[PRIVATE$9] = {\n      id: ++NEXT_FRAME_ID,\n      active: false,\n      animationFrame: false,\n      device,\n      session,\n      sessionId\n    };\n  }\n  get session() { return this[PRIVATE$9].session; }\n  getViewerPose(referenceSpace) {\n    if (!this[PRIVATE$9].animationFrame) {\n      throw new DOMException(NON_ANIMFRAME_MSG, 'InvalidStateError');\n    }\n    if (!this[PRIVATE$9].active) {\n      throw new DOMException(NON_ACTIVE_MSG, 'InvalidStateError');\n    }\n    const device = this[PRIVATE$9].device;\n    const session = this[PRIVATE$9].session;\n    session[PRIVATE$15].viewerSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n    referenceSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n    let viewerTransform = referenceSpace._getSpaceRelativeTransform(session[PRIVATE$15].viewerSpace);\n    const views = [];\n    for (let viewSpace of session[PRIVATE$15].viewSpaces) {\n      viewSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      let viewTransform = referenceSpace._getSpaceRelativeTransform(viewSpace);\n      let view = new XRView(device, viewTransform, viewSpace.eye, this[PRIVATE$9].sessionId);\n      views.push(view);\n    }\n    let viewerPose = new XRViewerPose(viewerTransform, views, false                             );\n    return viewerPose;\n  }\n  getPose(space, baseSpace) {\n    if (!this[PRIVATE$9].active) {\n      throw new DOMException(NON_ACTIVE_MSG, 'InvalidStateError');\n    }\n    const device = this[PRIVATE$9].device;\n    if (space._specialType === \"target-ray\" || space._specialType === \"grip\") {\n      return device.getInputPose(\n        space._inputSource, baseSpace, space._specialType);\n    } else {\n      space._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      baseSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      let transform = baseSpace._getSpaceRelativeTransform(space);\n      if (!transform) { return null; }\n      return new XRPose(transform, false                             );\n    }\n    return null;\n  }\n}\n\nconst PRIVATE$10 = Symbol('@@webxr-polyfill/XRRenderState');\nconst XRRenderStateInit = Object.freeze({\n  depthNear: 0.1,\n  depthFar: 1000.0,\n  inlineVerticalFieldOfView: null,\n  baseLayer: null\n});\nclass XRRenderState {\n  constructor(stateInit = {}) {\n    const config = Object.assign({}, XRRenderStateInit, stateInit);\n    this[PRIVATE$10] = { config };\n  }\n  get depthNear() { return this[PRIVATE$10].config.depthNear; }\n  get depthFar() { return this[PRIVATE$10].config.depthFar; }\n  get inlineVerticalFieldOfView() { return this[PRIVATE$10].config.inlineVerticalFieldOfView; }\n  get baseLayer() { return this[PRIVATE$10].config.baseLayer; }\n}\n\nconst POLYFILLED_XR_COMPATIBLE = Symbol('@@webxr-polyfill/polyfilled-xr-compatible');\nconst XR_COMPATIBLE = Symbol('@@webxr-polyfill/xr-compatible');\n\nconst PRIVATE$11 = Symbol('@@webxr-polyfill/XRWebGLLayer');\nconst XRWebGLLayerInit = Object.freeze({\n  antialias: true,\n  depth: false,\n  stencil: false,\n  alpha: true,\n  multiview: false,\n  ignoreDepthValues: false,\n  framebufferScaleFactor: 1.0,\n});\nclass XRWebGLLayer {\n  constructor(session, context, layerInit={}) {\n    const config = Object.assign({}, XRWebGLLayerInit, layerInit);\n    if (!(session instanceof XRSession$1)) {\n      throw new Error('session must be a XRSession');\n    }\n    if (session.ended) {\n      throw new Error(`InvalidStateError`);\n    }\n    if (context[POLYFILLED_XR_COMPATIBLE]) {\n      if (context[XR_COMPATIBLE] !== true) {\n        throw new Error(`InvalidStateError`);\n      }\n    }\n    const framebuffer = context.getParameter(context.FRAMEBUFFER_BINDING);\n    this[PRIVATE$11] = {\n      context,\n      config,\n      framebuffer,\n      session,\n    };\n  }\n  get context() { return this[PRIVATE$11].context; }\n  get antialias() { return this[PRIVATE$11].config.antialias; }\n  get ignoreDepthValues() { return true; }\n  get framebuffer() { return this[PRIVATE$11].framebuffer; }\n  get framebufferWidth() { return this[PRIVATE$11].context.drawingBufferWidth; }\n  get framebufferHeight() { return this[PRIVATE$11].context.drawingBufferHeight; }\n  get _session() { return this[PRIVATE$11].session; }\n  getViewport(view) {\n    return view._getViewport(this);\n  }\n  static getNativeFramebufferScaleFactor(session) {\n    if (!session) {\n      throw new TypeError('getNativeFramebufferScaleFactor must be passed a session.')\n    }\n    if (session[PRIVATE$15].ended) { return 0.0; }\n    return 1.0;\n  }\n}\n\nconst PRIVATE$12 = Symbol('@@webxr-polyfill/XRInputSourceEvent');\nclass XRInputSourceEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$12] = {\n      frame: eventInitDict.frame,\n      inputSource: eventInitDict.inputSource\n    };\n    Object.setPrototypeOf(this, XRInputSourceEvent.prototype);\n  }\n  get frame() { return this[PRIVATE$12].frame; }\n  get inputSource() { return this[PRIVATE$12].inputSource; }\n}\n\nconst PRIVATE$13 = Symbol('@@webxr-polyfill/XRSessionEvent');\nclass XRSessionEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$13] = {\n      session: eventInitDict.session\n    };\n    Object.setPrototypeOf(this, XRSessionEvent.prototype);\n  }\n  get session() { return this[PRIVATE$13].session; }\n}\n\nconst PRIVATE$14 = Symbol('@@webxr-polyfill/XRInputSourcesChangeEvent');\nclass XRInputSourcesChangeEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$14] = {\n      session: eventInitDict.session,\n      added: eventInitDict.added,\n      removed: eventInitDict.removed\n    };\n    Object.setPrototypeOf(this, XRInputSourcesChangeEvent.prototype);\n  }\n  get session() { return this[PRIVATE$14].session; }\n  get added() { return this[PRIVATE$14].added; }\n  get removed() { return this[PRIVATE$14].removed; }\n}\n\nconst PRIVATE$15 = Symbol('@@webxr-polyfill/XRSession');\nclass XRViewSpace extends XRSpace {\n  constructor(eye) {\n    super(eye);\n  }\n  get eye() {\n    return this._specialType;\n  }\n  _onPoseUpdate(device) {\n    this._inverseBaseMatrix = device.getBaseViewMatrix(this._specialType);\n  }\n}\nclass XRSession$1 extends EventTarget {\n  constructor(device, mode, id) {\n    super();\n    let immersive = mode != 'inline';\n    let initialRenderState = new XRRenderState({\n      inlineVerticalFieldOfView: immersive ? null : Math.PI * 0.5\n    });\n    this[PRIVATE$15] = {\n      device,\n      mode,\n      immersive,\n      ended: false,\n      suspended: false,\n      frameCallbacks: [],\n      currentFrameCallbacks: null,\n      frameHandle: 0,\n      deviceFrameHandle: null,\n      id,\n      activeRenderState: initialRenderState,\n      pendingRenderState: null,\n      viewerSpace: new XRReferenceSpace(\"viewer\"),\n      viewSpaces: [],\n      currentInputSources: []\n    };\n    if (immersive) {\n      this[PRIVATE$15].viewSpaces.push(new XRViewSpace('left'),\n                                    new XRViewSpace('right'));\n    } else {\n      this[PRIVATE$15].viewSpaces.push(new XRViewSpace('none'));\n    }\n    this[PRIVATE$15].onDeviceFrame = () => {\n      if (this[PRIVATE$15].ended || this[PRIVATE$15].suspended) {\n        return;\n      }\n      this[PRIVATE$15].deviceFrameHandle = null;\n      this[PRIVATE$15].startDeviceFrameLoop();\n      if (this[PRIVATE$15].pendingRenderState !== null) {\n        this[PRIVATE$15].activeRenderState = new XRRenderState(this[PRIVATE$15].pendingRenderState);\n        this[PRIVATE$15].pendingRenderState = null;\n        if (this[PRIVATE$15].activeRenderState.baseLayer) {\n          this[PRIVATE$15].device.onBaseLayerSet(\n            this[PRIVATE$15].id,\n            this[PRIVATE$15].activeRenderState.baseLayer);\n        }\n      }\n      if (this[PRIVATE$15].activeRenderState.baseLayer === null) {\n        return;\n      }\n      const frame = new XRFrame(device, this, this[PRIVATE$15].id);\n      const callbacks = this[PRIVATE$15].currentFrameCallbacks = this[PRIVATE$15].frameCallbacks;\n      this[PRIVATE$15].frameCallbacks = [];\n      frame[PRIVATE$9].active = true;\n      frame[PRIVATE$9].animationFrame = true;\n      this[PRIVATE$15].device.onFrameStart(this[PRIVATE$15].id, this[PRIVATE$15].activeRenderState);\n      this._checkInputSourcesChange();\n      const rightNow = now$1();\n      for (let i = 0; i < callbacks.length; i++) {\n        try {\n          if (!callbacks[i].cancelled && typeof callbacks[i].callback === 'function') {\n            callbacks[i].callback(rightNow, frame);\n          }\n        } catch(err) {\n          console.error(err);\n        }\n      }\n      this[PRIVATE$15].currentFrameCallbacks = null;\n      frame[PRIVATE$9].active = false;\n      this[PRIVATE$15].device.onFrameEnd(this[PRIVATE$15].id);\n    };\n    this[PRIVATE$15].startDeviceFrameLoop = () => {\n      if (this[PRIVATE$15].deviceFrameHandle === null) {\n        this[PRIVATE$15].deviceFrameHandle = this[PRIVATE$15].device.requestAnimationFrame(\n          this[PRIVATE$15].onDeviceFrame\n        );\n      }\n    };\n    this[PRIVATE$15].stopDeviceFrameLoop = () => {\n      const handle = this[PRIVATE$15].deviceFrameHandle;\n      if (handle !== null) {\n        this[PRIVATE$15].device.cancelAnimationFrame(handle);\n        this[PRIVATE$15].deviceFrameHandle = null;\n      }\n    };\n    this[PRIVATE$15].onPresentationEnd = sessionId => {\n      if (sessionId !== this[PRIVATE$15].id) {\n        this[PRIVATE$15].suspended = false;\n        this[PRIVATE$15].startDeviceFrameLoop();\n        this.dispatchEvent('focus', { session: this });\n        return;\n      }\n      this[PRIVATE$15].ended = true;\n      this[PRIVATE$15].stopDeviceFrameLoop();\n      device.removeEventListener('@@webxr-polyfill/vr-present-end', this[PRIVATE$15].onPresentationEnd);\n      device.removeEventListener('@@webxr-polyfill/vr-present-start', this[PRIVATE$15].onPresentationStart);\n      device.removeEventListener('@@webxr-polyfill/input-select-start', this[PRIVATE$15].onSelectStart);\n      device.removeEventListener('@@webxr-polyfill/input-select-end', this[PRIVATE$15].onSelectEnd);\n      this.dispatchEvent('end', new XRSessionEvent('end', { session: this }));\n    };\n    device.addEventListener('@@webxr-polyfill/vr-present-end', this[PRIVATE$15].onPresentationEnd);\n    this[PRIVATE$15].onPresentationStart = sessionId => {\n      if (sessionId === this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].suspended = true;\n      this[PRIVATE$15].stopDeviceFrameLoop();\n      this.dispatchEvent('blur', { session: this });\n    };\n    device.addEventListener('@@webxr-polyfill/vr-present-start', this[PRIVATE$15].onPresentationStart);\n    this[PRIVATE$15].onSelectStart = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('selectstart',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-select-start', this[PRIVATE$15].onSelectStart);\n    this[PRIVATE$15].onSelectEnd = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('selectend',  evt.inputSource);\n      this[PRIVATE$15].dispatchInputSourceEvent('select',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-select-end', this[PRIVATE$15].onSelectEnd);\n    this[PRIVATE$15].onSqueezeStart = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('squeezestart',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-squeeze-start', this[PRIVATE$15].onSqueezeStart);\n    this[PRIVATE$15].onSqueezeEnd = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('squeezeend',  evt.inputSource);\n      this[PRIVATE$15].dispatchInputSourceEvent('squeeze',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-squeeze-end', this[PRIVATE$15].onSqueezeEnd);\n    this[PRIVATE$15].dispatchInputSourceEvent = (type, inputSource) => {\n      const frame = new XRFrame(device, this, this[PRIVATE$15].id);\n      const event = new XRInputSourceEvent(type, { frame, inputSource });\n      frame[PRIVATE$9].active = true;\n      this.dispatchEvent(type, event);\n      frame[PRIVATE$9].active = false;\n    };\n    this[PRIVATE$15].startDeviceFrameLoop();\n    this.onblur = undefined;\n    this.onfocus = undefined;\n    this.onresetpose = undefined;\n    this.onend = undefined;\n    this.onselect = undefined;\n    this.onselectstart = undefined;\n    this.onselectend = undefined;\n  }\n  get renderState() { return this[PRIVATE$15].activeRenderState; }\n  get environmentBlendMode() {\n    return this[PRIVATE$15].device.environmentBlendMode || 'opaque';\n  }\n  async requestReferenceSpace(type) {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    if (!XRReferenceSpaceTypes.includes(type)) {\n      throw new TypeError(`XRReferenceSpaceType must be one of ${XRReferenceSpaceTypes}`);\n    }\n    if (!this[PRIVATE$15].device.doesSessionSupportReferenceSpace(this[PRIVATE$15].id, type)) {\n      throw new DOMException(`The ${type} reference space is not supported by this session.`, 'NotSupportedError');\n    }\n    if (type === 'viewer') {\n      return this[PRIVATE$15].viewerSpace;\n    }\n    let transform = await this[PRIVATE$15].device.requestFrameOfReferenceTransform(type);\n    if (type === 'bounded-floor') {\n      if (!transform) {\n        throw new DOMException(`${type} XRReferenceSpace not supported by this device.`, 'NotSupportedError');\n      }\n      let bounds = this[PRIVATE$15].device.requestStageBounds();\n      if (!bounds) {\n        throw new DOMException(`${type} XRReferenceSpace not supported by this device.`, 'NotSupportedError');\n      }\n      throw new DOMException(`The WebXR polyfill does not support the ${type} reference space yet.`, 'NotSupportedError');\n    }\n    return new XRReferenceSpace(type, transform);\n  }\n  requestAnimationFrame(callback) {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    const handle = ++this[PRIVATE$15].frameHandle;\n    this[PRIVATE$15].frameCallbacks.push({\n      handle,\n      callback,\n      cancelled: false\n    });\n    return handle;\n  }\n  cancelAnimationFrame(handle) {\n    let callbacks = this[PRIVATE$15].frameCallbacks;\n    let index = callbacks.findIndex(d => d && d.handle === handle);\n    if (index > -1) {\n      callbacks[index].cancelled = true;\n      callbacks.splice(index, 1);\n    }\n    callbacks = this[PRIVATE$15].currentFrameCallbacks;\n    if (callbacks) {\n      index = callbacks.findIndex(d => d && d.handle === handle);\n      if (index > -1) {\n        callbacks[index].cancelled = true;\n      }\n    }\n  }\n  get inputSources() {\n    return this[PRIVATE$15].device.getInputSources();\n  }\n  async end() {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    if (this[PRIVATE$15].immersive) {\n      this[PRIVATE$15].ended = true;\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/vr-present-start',\n                                                 this[PRIVATE$15].onPresentationStart);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/vr-present-end',\n                                                 this[PRIVATE$15].onPresentationEnd);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/input-select-start',\n                                                 this[PRIVATE$15].onSelectStart);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/input-select-end',\n                                                 this[PRIVATE$15].onSelectEnd);\n      this.dispatchEvent('end', new XRSessionEvent('end', { session: this }));\n    }\n    this[PRIVATE$15].stopDeviceFrameLoop();\n    return this[PRIVATE$15].device.endSession(this[PRIVATE$15].id);\n  }\n  updateRenderState(newState) {\n    if (this[PRIVATE$15].ended) {\n      const message = \"Can't call updateRenderState on an XRSession \" +\n                      \"that has already ended.\";\n      throw new Error(message);\n    }\n    if (newState.baseLayer && (newState.baseLayer._session !== this)) {\n      const message = \"Called updateRenderState with a base layer that was \" +\n                      \"created by a different session.\";\n      throw new Error(message);\n    }\n    const fovSet = (newState.inlineVerticalFieldOfView !== null) &&\n                   (newState.inlineVerticalFieldOfView !== undefined);\n    if (fovSet) {\n      if (this[PRIVATE$15].immersive) {\n        const message = \"inlineVerticalFieldOfView must not be set for an \" +\n                        \"XRRenderState passed to updateRenderState for an \" +\n                        \"immersive session.\";\n        throw new Error(message);\n      } else {\n        newState.inlineVerticalFieldOfView = Math.min(\n          3.13, Math.max(0.01, newState.inlineVerticalFieldOfView));\n      }\n    }\n    if (this[PRIVATE$15].pendingRenderState === null) {\n      const activeRenderState = this[PRIVATE$15].activeRenderState;\n      this[PRIVATE$15].pendingRenderState = {\n        depthNear: activeRenderState.depthNear,\n        depthFar: activeRenderState.depthFar,\n        inlineVerticalFieldOfView: activeRenderState.inlineVerticalFieldOfView,\n        baseLayer: activeRenderState.baseLayer\n      };\n    }\n    Object.assign(this[PRIVATE$15].pendingRenderState, newState);\n  }\n  _checkInputSourcesChange() {\n    const added = [];\n    const removed = [];\n    const newInputSources = this.inputSources;\n    const oldInputSources = this[PRIVATE$15].currentInputSources;\n    for (const newInputSource of newInputSources) {\n      if (!oldInputSources.includes(newInputSource)) {\n        added.push(newInputSource);\n      }\n    }\n    for (const oldInputSource of oldInputSources) {\n      if (!newInputSources.includes(oldInputSource)) {\n        removed.push(oldInputSource);\n      }\n    }\n    if (added.length > 0 || removed.length > 0) {\n      this.dispatchEvent('inputsourceschange', new XRInputSourcesChangeEvent('inputsourceschange', {\n        session: this,\n        added: added,\n        removed: removed\n      }));\n    }\n    this[PRIVATE$15].currentInputSources.length = 0;\n    for (const newInputSource of newInputSources) {\n      this[PRIVATE$15].currentInputSources.push(newInputSource);\n    }\n  }\n}\n\nconst PRIVATE$16 = Symbol('@@webxr-polyfill/XRInputSource');\nclass XRInputSource {\n  constructor(impl) {\n    this[PRIVATE$16] = {\n      impl,\n      gripSpace: new XRSpace(\"grip\", this),\n      targetRaySpace: new XRSpace(\"target-ray\", this)\n    };\n  }\n  get handedness() { return this[PRIVATE$16].impl.handedness; }\n  get targetRayMode() { return this[PRIVATE$16].impl.targetRayMode; }\n  get gripSpace() {\n    let mode = this[PRIVATE$16].impl.targetRayMode;\n    if (mode === \"gaze\" || mode === \"screen\") {\n      return null;\n    }\n    return this[PRIVATE$16].gripSpace;\n  }\n  get targetRaySpace() { return this[PRIVATE$16].targetRaySpace; }\n  get profiles() { return this[PRIVATE$16].impl.profiles; }\n  get gamepad() { return this[PRIVATE$16].impl.gamepad; }\n}\n\nconst PRIVATE$17 = Symbol('@@webxr-polyfill/XRReferenceSpaceEvent');\nclass XRReferenceSpaceEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$17] = {\n      referenceSpace: eventInitDict.referenceSpace,\n      transform: eventInitDict.transform || null\n    };\n    Object.setPrototypeOf(this, XRReferenceSpaceEvent.prototype);\n  }\n  get referenceSpace() { return this[PRIVATE$17].referenceSpace; }\n  get transform() { return this[PRIVATE$17].transform; }\n}\n\nvar API = {\n  XRSystem,\n  XRSession: XRSession$1,\n  XRSessionEvent,\n  XRFrame,\n  XRView,\n  XRViewport,\n  XRViewerPose,\n  XRWebGLLayer,\n  XRSpace,\n  XRReferenceSpace,\n  XRReferenceSpaceEvent,\n  XRInputSource,\n  XRInputSourceEvent,\n  XRInputSourcesChangeEvent,\n  XRRenderState,\n  XRRigidTransform: XRRigidTransform$1,\n  XRPose: XRPose$1,\n};\n\nconst polyfillMakeXRCompatible = Context => {\n  if (typeof Context.prototype.makeXRCompatible === 'function') {\n    return false;\n  }\n  Context.prototype.makeXRCompatible = function () {\n    this[XR_COMPATIBLE] = true;\n    return Promise.resolve();\n  };\n  return true;\n};\nconst polyfillGetContext = (Canvas) => {\n  const getContext = Canvas.prototype.getContext;\n  Canvas.prototype.getContext = function (contextType, glAttribs) {\n    const ctx = getContext.call(this, contextType, glAttribs);\n    if (ctx) {\n      ctx[POLYFILLED_XR_COMPATIBLE] = true;\n      if (glAttribs && ('xrCompatible' in glAttribs)) {\n        ctx[XR_COMPATIBLE] = glAttribs.xrCompatible;\n      }\n    }\n    return ctx;\n  };\n};\n\nconst isImageBitmapSupported = global =>\n  !!(global.ImageBitmapRenderingContext &&\n     global.createImageBitmap);\nconst isMobile = global => {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true;})(global.navigator.userAgent||global.navigator.vendor||global.opera);\n  return check;\n};\nconst applyCanvasStylesForMinimalRendering = canvas => {\n  canvas.style.display = 'block';\n  canvas.style.position = 'absolute';\n  canvas.style.width = canvas.style.height = '1px';\n  canvas.style.top = canvas.style.left = '0px';\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar cardboardVrDisplay = createCommonjsModule(function (module, exports) {\n(function (global, factory) {\n\tmodule.exports = factory();\n}(commonjsGlobal, (function () { var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nvar MIN_TIMESTEP = 0.001;\nvar MAX_TIMESTEP = 1;\nvar dataUri = function dataUri(mimeType, svg) {\n  return 'data:' + mimeType + ',' + encodeURIComponent(svg);\n};\nvar lerp = function lerp(a, b, t) {\n  return a + (b - a) * t;\n};\nvar isIOS = function () {\n  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n  return function () {\n    return isIOS;\n  };\n}();\nvar isWebViewAndroid = function () {\n  var isWebViewAndroid = navigator.userAgent.indexOf('Version') !== -1 && navigator.userAgent.indexOf('Android') !== -1 && navigator.userAgent.indexOf('Chrome') !== -1;\n  return function () {\n    return isWebViewAndroid;\n  };\n}();\nvar isSafari = function () {\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  return function () {\n    return isSafari;\n  };\n}();\nvar isFirefoxAndroid = function () {\n  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 && navigator.userAgent.indexOf('Android') !== -1;\n  return function () {\n    return isFirefoxAndroid;\n  };\n}();\nvar getChromeVersion = function () {\n  var match = navigator.userAgent.match(/.*Chrome\\/([0-9]+)/);\n  var value = match ? parseInt(match[1], 10) : null;\n  return function () {\n    return value;\n  };\n}();\nvar isSafariWithoutDeviceMotion = function () {\n  var value = false;\n  value = isIOS() && isSafari() && navigator.userAgent.indexOf('13_4') !== -1;\n  return function () {\n    return value;\n  };\n}();\nvar isChromeWithoutDeviceMotion = function () {\n  var value = false;\n  if (getChromeVersion() === 65) {\n    var match = navigator.userAgent.match(/.*Chrome\\/([0-9\\.]*)/);\n    if (match) {\n      var _match$1$split = match[1].split('.'),\n          _match$1$split2 = slicedToArray(_match$1$split, 4),\n          major = _match$1$split2[0],\n          minor = _match$1$split2[1],\n          branch = _match$1$split2[2],\n          build = _match$1$split2[3];\n      value = parseInt(branch, 10) === 3325 && parseInt(build, 10) < 148;\n    }\n  }\n  return function () {\n    return value;\n  };\n}();\nvar isR7 = function () {\n  var isR7 = navigator.userAgent.indexOf('R7 Build') !== -1;\n  return function () {\n    return isR7;\n  };\n}();\nvar isLandscapeMode = function isLandscapeMode() {\n  var rtn = window.orientation == 90 || window.orientation == -90;\n  return isR7() ? !rtn : rtn;\n};\nvar isTimestampDeltaValid = function isTimestampDeltaValid(timestampDeltaS) {\n  if (isNaN(timestampDeltaS)) {\n    return false;\n  }\n  if (timestampDeltaS <= MIN_TIMESTEP) {\n    return false;\n  }\n  if (timestampDeltaS > MAX_TIMESTEP) {\n    return false;\n  }\n  return true;\n};\nvar getScreenWidth = function getScreenWidth() {\n  return Math.max(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar getScreenHeight = function getScreenHeight() {\n  return Math.min(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar requestFullscreen = function requestFullscreen(element) {\n  if (isWebViewAndroid()) {\n    return false;\n  }\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar exitFullscreen = function exitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar getFullscreenElement = function getFullscreenElement() {\n  return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n};\nvar linkProgram = function linkProgram(gl, vertexSource, fragmentSource, attribLocationMap) {\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexSource);\n  gl.compileShader(vertexShader);\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentSource);\n  gl.compileShader(fragmentShader);\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  for (var attribName in attribLocationMap) {\n    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);\n  }gl.linkProgram(program);\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n  return program;\n};\nvar getProgramUniforms = function getProgramUniforms(gl, program) {\n  var uniforms = {};\n  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  var uniformName = '';\n  for (var i = 0; i < uniformCount; i++) {\n    var uniformInfo = gl.getActiveUniform(program, i);\n    uniformName = uniformInfo.name.replace('[0]', '');\n    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n  }\n  return uniforms;\n};\nvar orthoMatrix = function orthoMatrix(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right),\n      bt = 1 / (bottom - top),\n      nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n};\nvar isMobile = function isMobile() {\n  var check = false;\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\nvar extend = function extend(dest, src) {\n  for (var key in src) {\n    if (src.hasOwnProperty(key)) {\n      dest[key] = src[key];\n    }\n  }\n  return dest;\n};\nvar safariCssSizeWorkaround = function safariCssSizeWorkaround(canvas) {\n  if (isIOS()) {\n    var width = canvas.style.width;\n    var height = canvas.style.height;\n    canvas.style.width = parseInt(width) + 1 + 'px';\n    canvas.style.height = parseInt(height) + 'px';\n    setTimeout(function () {\n      canvas.style.width = width;\n      canvas.style.height = height;\n    }, 100);\n  }\n  window.canvas = canvas;\n};\nvar frameDataFromPose = function () {\n  var piOver180 = Math.PI / 180.0;\n  var rad45 = Math.PI * 0.25;\n  function mat4_perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov ? fov.upDegrees * piOver180 : rad45),\n        downTan = Math.tan(fov ? fov.downDegrees * piOver180 : rad45),\n        leftTan = Math.tan(fov ? fov.leftDegrees * piOver180 : rad45),\n        rightTan = Math.tan(fov ? fov.rightDegrees * piOver180 : rad45),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n  }\n  function mat4_fromRotationTranslation(out, q, v) {\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n  }\n  function mat4_translate(out, a, v) {\n    var x = v[0],\n        y = v[1],\n        z = v[2],\n        a00,\n        a01,\n        a02,\n        a03,\n        a10,\n        a11,\n        a12,\n        a13,\n        a20,\n        a21,\n        a22,\n        a23;\n    if (a === out) {\n      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n      a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\n      a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\n      a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\n      out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\n      out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\n      out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\n      out[12] = a00 * x + a10 * y + a20 * z + a[12];\n      out[13] = a01 * x + a11 * y + a21 * z + a[13];\n      out[14] = a02 * x + a12 * y + a22 * z + a[14];\n      out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n  }\n  function mat4_invert(out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n  }\n  var defaultOrientation = new Float32Array([0, 0, 0, 1]);\n  var defaultPosition = new Float32Array([0, 0, 0]);\n  function updateEyeMatrices(projection, view, pose, fov, offset, vrDisplay) {\n    mat4_perspectiveFromFieldOfView(projection, fov || null, vrDisplay.depthNear, vrDisplay.depthFar);\n    var orientation = pose.orientation || defaultOrientation;\n    var position = pose.position || defaultPosition;\n    mat4_fromRotationTranslation(view, orientation, position);\n    if (offset) mat4_translate(view, view, offset);\n    mat4_invert(view, view);\n  }\n  return function (frameData, pose, vrDisplay) {\n    if (!frameData || !pose) return false;\n    frameData.pose = pose;\n    frameData.timestamp = pose.timestamp;\n    updateEyeMatrices(frameData.leftProjectionMatrix, frameData.leftViewMatrix, pose, vrDisplay._getFieldOfView(\"left\"), vrDisplay._getEyeOffset(\"left\"), vrDisplay);\n    updateEyeMatrices(frameData.rightProjectionMatrix, frameData.rightViewMatrix, pose, vrDisplay._getFieldOfView(\"right\"), vrDisplay._getEyeOffset(\"right\"), vrDisplay);\n    return true;\n  };\n}();\nvar isInsideCrossOriginIFrame = function isInsideCrossOriginIFrame() {\n  var isFramed = window.self !== window.top;\n  var refOrigin = getOriginFromUrl(document.referrer);\n  var thisOrigin = getOriginFromUrl(window.location.href);\n  return isFramed && refOrigin !== thisOrigin;\n};\nvar getOriginFromUrl = function getOriginFromUrl(url) {\n  var domainIdx;\n  var protoSepIdx = url.indexOf(\"://\");\n  if (protoSepIdx !== -1) {\n    domainIdx = protoSepIdx + 3;\n  } else {\n    domainIdx = 0;\n  }\n  var domainEndIdx = url.indexOf('/', domainIdx);\n  if (domainEndIdx === -1) {\n    domainEndIdx = url.length;\n  }\n  return url.substring(0, domainEndIdx);\n};\nvar getQuaternionAngle = function getQuaternionAngle(quat) {\n  if (quat.w > 1) {\n    console.warn('getQuaternionAngle: w > 1');\n    return 0;\n  }\n  var angle = 2 * Math.acos(quat.w);\n  return angle;\n};\nvar warnOnce = function () {\n  var observedWarnings = {};\n  return function (key, message) {\n    if (observedWarnings[key] === undefined) {\n      console.warn('webvr-polyfill: ' + message);\n      observedWarnings[key] = true;\n    }\n  };\n}();\nvar deprecateWarning = function deprecateWarning(deprecated, suggested) {\n  var alternative = suggested ? 'Please use ' + suggested + ' instead.' : '';\n  warnOnce(deprecated, deprecated + ' has been deprecated. ' + 'This may not work on native WebVR displays. ' + alternative);\n};\nfunction WGLUPreserveGLState(gl, bindings, callback) {\n  if (!bindings) {\n    callback(gl);\n    return;\n  }\n  var boundValues = [];\n  var activeTexture = null;\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    switch (binding) {\n      case gl.TEXTURE_BINDING_2D:\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {\n          console.error(\"TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit\");\n          boundValues.push(null, null);\n          break;\n        }\n        if (!activeTexture) {\n          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        }\n        gl.activeTexture(textureUnit);\n        boundValues.push(gl.getParameter(binding), null);\n        break;\n      case gl.ACTIVE_TEXTURE:\n        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        boundValues.push(null);\n        break;\n      default:\n        boundValues.push(gl.getParameter(binding));\n        break;\n    }\n  }\n  callback(gl);\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    var boundValue = boundValues[i];\n    switch (binding) {\n      case gl.ACTIVE_TEXTURE:\n        break;\n      case gl.ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);\n        break;\n      case gl.COLOR_CLEAR_VALUE:\n        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.COLOR_WRITEMASK:\n        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.CURRENT_PROGRAM:\n        gl.useProgram(boundValue);\n        break;\n      case gl.ELEMENT_ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);\n        break;\n      case gl.FRAMEBUFFER_BINDING:\n        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);\n        break;\n      case gl.RENDERBUFFER_BINDING:\n        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_2D:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_2D, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);\n        break;\n      case gl.VIEWPORT:\n        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.BLEND:\n      case gl.CULL_FACE:\n      case gl.DEPTH_TEST:\n      case gl.SCISSOR_TEST:\n      case gl.STENCIL_TEST:\n        if (boundValue) {\n          gl.enable(binding);\n        } else {\n          gl.disable(binding);\n        }\n        break;\n      default:\n        console.log(\"No GL restore behavior for 0x\" + binding.toString(16));\n        break;\n    }\n    if (activeTexture) {\n      gl.activeTexture(activeTexture);\n    }\n  }\n}\nvar glPreserveState = WGLUPreserveGLState;\nvar distortionVS = ['attribute vec2 position;', 'attribute vec3 texCoord;', 'varying vec2 vTexCoord;', 'uniform vec4 viewportOffsetScale[2];', 'void main() {', '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];', '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;', '  gl_Position = vec4( position, 1.0, 1.0 );', '}'].join('\\n');\nvar distortionFS = ['precision mediump float;', 'uniform sampler2D diffuse;', 'varying vec2 vTexCoord;', 'void main() {', '  gl_FragColor = texture2D(diffuse, vTexCoord);', '}'].join('\\n');\nfunction CardboardDistorter(gl, cardboardUI, bufferScale, dirtySubmitFrameBindings) {\n  this.gl = gl;\n  this.cardboardUI = cardboardUI;\n  this.bufferScale = bufferScale;\n  this.dirtySubmitFrameBindings = dirtySubmitFrameBindings;\n  this.ctxAttribs = gl.getContextAttributes();\n  this.instanceExt = gl.getExtension('ANGLE_instanced_arrays');\n  this.meshWidth = 20;\n  this.meshHeight = 20;\n  this.bufferWidth = gl.drawingBufferWidth;\n  this.bufferHeight = gl.drawingBufferHeight;\n  this.realBindFramebuffer = gl.bindFramebuffer;\n  this.realEnable = gl.enable;\n  this.realDisable = gl.disable;\n  this.realColorMask = gl.colorMask;\n  this.realClearColor = gl.clearColor;\n  this.realViewport = gl.viewport;\n  if (!isIOS()) {\n    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');\n    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');\n  }\n  this.isPatched = false;\n  this.lastBoundFramebuffer = null;\n  this.cullFace = false;\n  this.depthTest = false;\n  this.blend = false;\n  this.scissorTest = false;\n  this.stencilTest = false;\n  this.viewport = [0, 0, 0, 0];\n  this.colorMask = [true, true, true, true];\n  this.clearColor = [0, 0, 0, 0];\n  this.attribs = {\n    position: 0,\n    texCoord: 1\n  };\n  this.program = linkProgram(gl, distortionVS, distortionFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.viewportOffsetScale = new Float32Array(8);\n  this.setTextureBounds();\n  this.vertexBuffer = gl.createBuffer();\n  this.indexBuffer = gl.createBuffer();\n  this.indexCount = 0;\n  this.renderTarget = gl.createTexture();\n  this.framebuffer = gl.createFramebuffer();\n  this.depthStencilBuffer = null;\n  this.depthBuffer = null;\n  this.stencilBuffer = null;\n  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {\n    this.depthStencilBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.depth) {\n    this.depthBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.stencil) {\n    this.stencilBuffer = gl.createRenderbuffer();\n  }\n  this.patch();\n  this.onResize();\n}\nCardboardDistorter.prototype.destroy = function () {\n  var gl = this.gl;\n  this.unpatch();\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n  gl.deleteBuffer(this.indexBuffer);\n  gl.deleteTexture(this.renderTarget);\n  gl.deleteFramebuffer(this.framebuffer);\n  if (this.depthStencilBuffer) {\n    gl.deleteRenderbuffer(this.depthStencilBuffer);\n  }\n  if (this.depthBuffer) {\n    gl.deleteRenderbuffer(this.depthBuffer);\n  }\n  if (this.stencilBuffer) {\n    gl.deleteRenderbuffer(this.stencilBuffer);\n  }\n  if (this.cardboardUI) {\n    this.cardboardUI.destroy();\n  }\n};\nCardboardDistorter.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.RENDERBUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0];\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.realClearColor.call(gl, 0, 0, 0, 1);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, self.bufferWidth, self.bufferHeight, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);\n    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.depthStencilBuffer);\n    } else if (self.ctxAttribs.depth) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, self.depthBuffer);\n    } else if (self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.stencilBuffer);\n    }\n    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      console.error('Framebuffer incomplete!');\n    }\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    self.realClearColor.apply(gl, self.clearColor);\n  });\n  if (this.cardboardUI) {\n    this.cardboardUI.onResize();\n  }\n};\nCardboardDistorter.prototype.patch = function () {\n  if (this.isPatched) {\n    return;\n  }\n  var self = this;\n  var canvas = this.gl.canvas;\n  var gl = this.gl;\n  if (!isIOS()) {\n    canvas.width = getScreenWidth() * this.bufferScale;\n    canvas.height = getScreenHeight() * this.bufferScale;\n    Object.defineProperty(canvas, 'width', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferWidth;\n      },\n      set: function set(value) {\n        self.bufferWidth = value;\n        self.realCanvasWidth.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n    Object.defineProperty(canvas, 'height', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferHeight;\n      },\n      set: function set(value) {\n        self.bufferHeight = value;\n        self.realCanvasHeight.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n  }\n  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n  if (this.lastBoundFramebuffer == null) {\n    this.lastBoundFramebuffer = this.framebuffer;\n    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  }\n  this.gl.bindFramebuffer = function (target, framebuffer) {\n    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;\n    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);\n  };\n  this.cullFace = gl.getParameter(gl.CULL_FACE);\n  this.depthTest = gl.getParameter(gl.DEPTH_TEST);\n  this.blend = gl.getParameter(gl.BLEND);\n  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);\n  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);\n  gl.enable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = true;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = true;break;\n      case gl.BLEND:\n        self.blend = true;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = true;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = true;break;\n    }\n    self.realEnable.call(gl, pname);\n  };\n  gl.disable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = false;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = false;break;\n      case gl.BLEND:\n        self.blend = false;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = false;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = false;break;\n    }\n    self.realDisable.call(gl, pname);\n  };\n  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);\n  gl.colorMask = function (r, g, b, a) {\n    self.colorMask[0] = r;\n    self.colorMask[1] = g;\n    self.colorMask[2] = b;\n    self.colorMask[3] = a;\n    self.realColorMask.call(gl, r, g, b, a);\n  };\n  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);\n  gl.clearColor = function (r, g, b, a) {\n    self.clearColor[0] = r;\n    self.clearColor[1] = g;\n    self.clearColor[2] = b;\n    self.clearColor[3] = a;\n    self.realClearColor.call(gl, r, g, b, a);\n  };\n  this.viewport = gl.getParameter(gl.VIEWPORT);\n  gl.viewport = function (x, y, w, h) {\n    self.viewport[0] = x;\n    self.viewport[1] = y;\n    self.viewport[2] = w;\n    self.viewport[3] = h;\n    self.realViewport.call(gl, x, y, w, h);\n  };\n  this.isPatched = true;\n  safariCssSizeWorkaround(canvas);\n};\nCardboardDistorter.prototype.unpatch = function () {\n  if (!this.isPatched) {\n    return;\n  }\n  var gl = this.gl;\n  var canvas = this.gl.canvas;\n  if (!isIOS()) {\n    Object.defineProperty(canvas, 'width', this.realCanvasWidth);\n    Object.defineProperty(canvas, 'height', this.realCanvasHeight);\n  }\n  canvas.width = this.bufferWidth;\n  canvas.height = this.bufferHeight;\n  gl.bindFramebuffer = this.realBindFramebuffer;\n  gl.enable = this.realEnable;\n  gl.disable = this.realDisable;\n  gl.colorMask = this.realColorMask;\n  gl.clearColor = this.realClearColor;\n  gl.viewport = this.realViewport;\n  if (this.lastBoundFramebuffer == this.framebuffer) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n  this.isPatched = false;\n  setTimeout(function () {\n    safariCssSizeWorkaround(canvas);\n  }, 1);\n};\nCardboardDistorter.prototype.setTextureBounds = function (leftBounds, rightBounds) {\n  if (!leftBounds) {\n    leftBounds = [0, 0, 0.5, 1];\n  }\n  if (!rightBounds) {\n    rightBounds = [0.5, 0, 0.5, 1];\n  }\n  this.viewportOffsetScale[0] = leftBounds[0];\n  this.viewportOffsetScale[1] = leftBounds[1];\n  this.viewportOffsetScale[2] = leftBounds[2];\n  this.viewportOffsetScale[3] = leftBounds[3];\n  this.viewportOffsetScale[4] = rightBounds[0];\n  this.viewportOffsetScale[5] = rightBounds[1];\n  this.viewportOffsetScale[6] = rightBounds[2];\n  this.viewportOffsetScale[7] = rightBounds[3];\n};\nCardboardDistorter.prototype.submitFrame = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [];\n  if (!this.dirtySubmitFrameBindings) {\n    glState.push(gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0);\n  }\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    var positionDivisor = 0;\n    var texCoordDivisor = 0;\n    if (self.instanceExt) {\n      positionDivisor = gl.getVertexAttrib(self.attribs.position, self.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);\n      texCoordDivisor = gl.getVertexAttrib(self.attribs.texCoord, self.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);\n    }\n    if (self.cullFace) {\n      self.realDisable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realDisable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realDisable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realDisable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    if (self.ctxAttribs.alpha || isIOS()) {\n      self.realClearColor.call(gl, 0, 0, 0, 1);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    gl.useProgram(self.program);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.enableVertexAttribArray(self.attribs.position);\n    gl.enableVertexAttribArray(self.attribs.texCoord);\n    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);\n    if (self.instanceExt) {\n      if (positionDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.position, 0);\n      }\n      if (texCoordDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.texCoord, 0);\n      }\n    }\n    gl.activeTexture(gl.TEXTURE0);\n    gl.uniform1i(self.uniforms.diffuse, 0);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);\n    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);\n    if (self.cardboardUI) {\n      self.cardboardUI.renderNoState();\n    }\n    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);\n    if (!self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.call(gl, 0, 0, 0, 0);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    if (!self.dirtySubmitFrameBindings) {\n      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    }\n    if (self.cullFace) {\n      self.realEnable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realEnable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realEnable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realEnable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.apply(gl, self.clearColor);\n    }\n    if (self.instanceExt) {\n      if (positionDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.position, positionDivisor);\n      }\n      if (texCoordDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.texCoord, texCoordDivisor);\n      }\n    }\n  });\n  if (isIOS()) {\n    var canvas = gl.canvas;\n    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {\n      self.bufferWidth = canvas.width;\n      self.bufferHeight = canvas.height;\n      self.onResize();\n    }\n  }\n};\nCardboardDistorter.prototype.updateDeviceInfo = function (deviceInfo) {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n    if (!self.indexCount) {\n      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n      self.indexCount = indices.length;\n    }\n  });\n};\nCardboardDistorter.prototype.computeMeshVertices_ = function (width, height, deviceInfo) {\n  var vertices = new Float32Array(2 * width * height * 5);\n  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n  var vidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        var u = i / (width - 1);\n        var v = j / (height - 1);\n        var s = u;\n        var t = v;\n        var x = lerp(lensFrustum[0], lensFrustum[2], u);\n        var y = lerp(lensFrustum[3], lensFrustum[1], v);\n        var d = Math.sqrt(x * x + y * y);\n        var r = deviceInfo.distortion.distortInverse(d);\n        var p = x * r / d;\n        var q = y * r / d;\n        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n        u = (viewport.x + u * viewport.width - 0.5) * 2.0;\n        v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n        vertices[vidx * 5 + 0] = u;\n        vertices[vidx * 5 + 1] = v;\n        vertices[vidx * 5 + 2] = s;\n        vertices[vidx * 5 + 3] = t;\n        vertices[vidx * 5 + 4] = e;\n      }\n    }\n    var w = lensFrustum[2] - lensFrustum[0];\n    lensFrustum[0] = -(w + lensFrustum[0]);\n    lensFrustum[2] = w - lensFrustum[2];\n    w = noLensFrustum[2] - noLensFrustum[0];\n    noLensFrustum[0] = -(w + noLensFrustum[0]);\n    noLensFrustum[2] = w - noLensFrustum[2];\n    viewport.x = 1 - (viewport.x + viewport.width);\n  }\n  return vertices;\n};\nCardboardDistorter.prototype.computeMeshIndices_ = function (width, height) {\n  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n  var halfwidth = width / 2;\n  var halfheight = height / 2;\n  var vidx = 0;\n  var iidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        if (i == 0 || j == 0) continue;\n        if (i <= halfwidth == j <= halfheight) {\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - 1;\n        } else {\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width - 1;\n        }\n      }\n    }\n  }\n  return indices;\n};\nCardboardDistorter.prototype.getOwnPropertyDescriptor_ = function (proto, attrName) {\n  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);\n  if (descriptor.get === undefined || descriptor.set === undefined) {\n    descriptor.configurable = true;\n    descriptor.enumerable = true;\n    descriptor.get = function () {\n      return this.getAttribute(attrName);\n    };\n    descriptor.set = function (val) {\n      this.setAttribute(attrName, val);\n    };\n  }\n  return descriptor;\n};\nvar uiVS = ['attribute vec2 position;', 'uniform mat4 projectionMat;', 'void main() {', '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );', '}'].join('\\n');\nvar uiFS = ['precision mediump float;', 'uniform vec4 color;', 'void main() {', '  gl_FragColor = color;', '}'].join('\\n');\nvar DEG2RAD = Math.PI / 180.0;\nvar kAnglePerGearSection = 60;\nvar kOuterRimEndAngle = 12;\nvar kInnerRimBeginAngle = 20;\nvar kOuterRadius = 1;\nvar kMiddleRadius = 0.75;\nvar kInnerRadius = 0.3125;\nvar kCenterLineThicknessDp = 4;\nvar kButtonWidthDp = 28;\nvar kTouchSlopFactor = 1.5;\nfunction CardboardUI(gl) {\n  this.gl = gl;\n  this.attribs = {\n    position: 0\n  };\n  this.program = linkProgram(gl, uiVS, uiFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.vertexBuffer = gl.createBuffer();\n  this.gearOffset = 0;\n  this.gearVertexCount = 0;\n  this.arrowOffset = 0;\n  this.arrowVertexCount = 0;\n  this.projMat = new Float32Array(16);\n  this.listener = null;\n  this.onResize();\n}\nCardboardUI.prototype.destroy = function () {\n  var gl = this.gl;\n  if (this.listener) {\n    gl.canvas.removeEventListener('click', this.listener, false);\n  }\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n};\nCardboardUI.prototype.listen = function (optionsCallback, backCallback) {\n  var canvas = this.gl.canvas;\n  this.listener = function (event) {\n    var midline = canvas.clientWidth / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor;\n    if (event.clientX > midline - buttonSize && event.clientX < midline + buttonSize && event.clientY > canvas.clientHeight - buttonSize) {\n      optionsCallback(event);\n    }\n    else if (event.clientX < buttonSize && event.clientY < buttonSize) {\n        backCallback(event);\n      }\n  };\n  canvas.addEventListener('click', this.listener, false);\n};\nCardboardUI.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = [];\n    var midline = gl.drawingBufferWidth / 2;\n    var physicalPixels = Math.max(screen.width, screen.height) * window.devicePixelRatio;\n    var scalingRatio = gl.drawingBufferWidth / physicalPixels;\n    var dps = scalingRatio * window.devicePixelRatio;\n    var lineWidth = kCenterLineThicknessDp * dps / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;\n    var buttonScale = kButtonWidthDp * dps / 2;\n    var buttonBorder = (kButtonWidthDp * kTouchSlopFactor - kButtonWidthDp) * dps;\n    vertices.push(midline - lineWidth, buttonSize);\n    vertices.push(midline - lineWidth, gl.drawingBufferHeight);\n    vertices.push(midline + lineWidth, buttonSize);\n    vertices.push(midline + lineWidth, gl.drawingBufferHeight);\n    self.gearOffset = vertices.length / 2;\n    function addGearSegment(theta, r) {\n      var angle = (90 - theta) * DEG2RAD;\n      var x = Math.cos(angle);\n      var y = Math.sin(angle);\n      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);\n      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);\n    }\n    for (var i = 0; i <= 6; i++) {\n      var segmentTheta = i * kAnglePerGearSection;\n      addGearSegment(segmentTheta, kOuterRadius);\n      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);\n      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);\n    }\n    self.gearVertexCount = vertices.length / 2 - self.gearOffset;\n    self.arrowOffset = vertices.length / 2;\n    function addArrowVertex(x, y) {\n      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);\n    }\n    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, 0);\n    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, buttonScale * 2);\n    addArrowVertex(buttonScale + angledLineWidth, buttonScale * 2 - angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(angledLineWidth, buttonScale - lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);\n    self.arrowVertexCount = vertices.length / 2 - self.arrowOffset;\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n  });\n};\nCardboardUI.prototype.render = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.CULL_FACE, gl.DEPTH_TEST, gl.BLEND, gl.SCISSOR_TEST, gl.STENCIL_TEST, gl.COLOR_WRITEMASK, gl.VIEWPORT, gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    gl.disable(gl.CULL_FACE);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.BLEND);\n    gl.disable(gl.SCISSOR_TEST);\n    gl.disable(gl.STENCIL_TEST);\n    gl.colorMask(true, true, true, true);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.renderNoState();\n  });\n};\nCardboardUI.prototype.renderNoState = function () {\n  var gl = this.gl;\n  gl.useProgram(this.program);\n  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n  gl.enableVertexAttribArray(this.attribs.position);\n  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);\n  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);\n  orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);\n  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);\n};\nfunction Distortion(coefficients) {\n  this.coefficients = coefficients;\n}\nDistortion.prototype.distortInverse = function (radius) {\n  var r0 = 0;\n  var r1 = 1;\n  var dr0 = radius - this.distort(r0);\n  while (Math.abs(r1 - r0) > 0.0001             ) {\n    var dr1 = radius - this.distort(r1);\n    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));\n    r0 = r1;\n    r1 = r2;\n    dr0 = dr1;\n  }\n  return r1;\n};\nDistortion.prototype.distort = function (radius) {\n  var r2 = radius * radius;\n  var ret = 0;\n  for (var i = 0; i < this.coefficients.length; i++) {\n    ret = r2 * (ret + this.coefficients[i]);\n  }\n  return (ret + 1) * radius;\n};\nvar degToRad = Math.PI / 180;\nvar radToDeg = 180 / Math.PI;\nvar Vector3 = function Vector3(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\nVector3.prototype = {\n  constructor: Vector3,\n  set: function set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  },\n  copy: function copy(v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  },\n  length: function length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  normalize: function normalize() {\n    var scalar = this.length();\n    if (scalar !== 0) {\n      var invScalar = 1 / scalar;\n      this.multiplyScalar(invScalar);\n    } else {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n    return this;\n  },\n  multiplyScalar: function multiplyScalar(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n  },\n  applyQuaternion: function applyQuaternion(q) {\n    var x = this.x;\n    var y = this.y;\n    var z = this.z;\n    var qx = q.x;\n    var qy = q.y;\n    var qz = q.z;\n    var qw = q.w;\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z;\n    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return this;\n  },\n  dot: function dot(v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  },\n  crossVectors: function crossVectors(a, b) {\n    var ax = a.x,\n        ay = a.y,\n        az = a.z;\n    var bx = b.x,\n        by = b.y,\n        bz = b.z;\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n    return this;\n  }\n};\nvar Quaternion = function Quaternion(x, y, z, w) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  this.w = w !== undefined ? w : 1;\n};\nQuaternion.prototype = {\n  constructor: Quaternion,\n  set: function set(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  },\n  copy: function copy(quaternion) {\n    this.x = quaternion.x;\n    this.y = quaternion.y;\n    this.z = quaternion.z;\n    this.w = quaternion.w;\n    return this;\n  },\n  setFromEulerXYZ: function setFromEulerXYZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 + s1 * s2 * c3;\n    this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    return this;\n  },\n  setFromEulerYXZ: function setFromEulerYXZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 - s1 * s2 * c3;\n    this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    return this;\n  },\n  setFromAxisAngle: function setFromAxisAngle(axis, angle) {\n    var halfAngle = angle / 2,\n        s = Math.sin(halfAngle);\n    this.x = axis.x * s;\n    this.y = axis.y * s;\n    this.z = axis.z * s;\n    this.w = Math.cos(halfAngle);\n    return this;\n  },\n  multiply: function multiply(q) {\n    return this.multiplyQuaternions(this, q);\n  },\n  multiplyQuaternions: function multiplyQuaternions(a, b) {\n    var qax = a.x,\n        qay = a.y,\n        qaz = a.z,\n        qaw = a.w;\n    var qbx = b.x,\n        qby = b.y,\n        qbz = b.z,\n        qbw = b.w;\n    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n    return this;\n  },\n  inverse: function inverse() {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    this.normalize();\n    return this;\n  },\n  normalize: function normalize() {\n    var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 1;\n    } else {\n      l = 1 / l;\n      this.x = this.x * l;\n      this.y = this.y * l;\n      this.z = this.z * l;\n      this.w = this.w * l;\n    }\n    return this;\n  },\n  slerp: function slerp(qb, t) {\n    if (t === 0) return this;\n    if (t === 1) return this.copy(qb);\n    var x = this.x,\n        y = this.y,\n        z = this.z,\n        w = this.w;\n    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n    if (cosHalfTheta < 0) {\n      this.w = -qb.w;\n      this.x = -qb.x;\n      this.y = -qb.y;\n      this.z = -qb.z;\n      cosHalfTheta = -cosHalfTheta;\n    } else {\n      this.copy(qb);\n    }\n    if (cosHalfTheta >= 1.0) {\n      this.w = w;\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      return this;\n    }\n    var halfTheta = Math.acos(cosHalfTheta);\n    var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n    if (Math.abs(sinHalfTheta) < 0.001) {\n      this.w = 0.5 * (w + this.w);\n      this.x = 0.5 * (x + this.x);\n      this.y = 0.5 * (y + this.y);\n      this.z = 0.5 * (z + this.z);\n      return this;\n    }\n    var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n        ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n    this.w = w * ratioA + this.w * ratioB;\n    this.x = x * ratioA + this.x * ratioB;\n    this.y = y * ratioA + this.y * ratioB;\n    this.z = z * ratioA + this.z * ratioB;\n    return this;\n  },\n  setFromUnitVectors: function () {\n    var v1, r;\n    var EPS = 0.000001;\n    return function (vFrom, vTo) {\n      if (v1 === undefined) v1 = new Vector3();\n      r = vFrom.dot(vTo) + 1;\n      if (r < EPS) {\n        r = 0;\n        if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n          v1.set(-vFrom.y, vFrom.x, 0);\n        } else {\n          v1.set(0, -vFrom.z, vFrom.y);\n        }\n      } else {\n        v1.crossVectors(vFrom, vTo);\n      }\n      this.x = v1.x;\n      this.y = v1.y;\n      this.z = v1.z;\n      this.w = r;\n      this.normalize();\n      return this;\n    };\n  }()\n};\nfunction Device(params) {\n  this.width = params.width || getScreenWidth();\n  this.height = params.height || getScreenHeight();\n  this.widthMeters = params.widthMeters;\n  this.heightMeters = params.heightMeters;\n  this.bevelMeters = params.bevelMeters;\n}\nvar DEFAULT_ANDROID = new Device({\n  widthMeters: 0.110,\n  heightMeters: 0.062,\n  bevelMeters: 0.004\n});\nvar DEFAULT_IOS = new Device({\n  widthMeters: 0.1038,\n  heightMeters: 0.0584,\n  bevelMeters: 0.004\n});\nvar Viewers = {\n  CardboardV1: new CardboardViewer({\n    id: 'CardboardV1',\n    label: 'Cardboard I/O 2014',\n    fov: 40,\n    interLensDistance: 0.060,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.042,\n    distortionCoefficients: [0.441, 0.156],\n    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139, -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841, 0.0651772, -0.01488963, 0.001559834]\n  }),\n  CardboardV2: new CardboardViewer({\n    id: 'CardboardV2',\n    label: 'Cardboard I/O 2015',\n    fov: 60,\n    interLensDistance: 0.064,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.039,\n    distortionCoefficients: [0.34, 0.55],\n    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051, 1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956, -9.904169E-4, 6.183535E-5, -1.6981803E-6]\n  })\n};\nfunction DeviceInfo(deviceParams, additionalViewers) {\n  this.viewer = Viewers.CardboardV2;\n  this.updateDeviceParams(deviceParams);\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n  for (var i = 0; i < additionalViewers.length; i++) {\n    var viewer = additionalViewers[i];\n    Viewers[viewer.id] = new CardboardViewer(viewer);\n  }\n}\nDeviceInfo.prototype.updateDeviceParams = function (deviceParams) {\n  this.device = this.determineDevice_(deviceParams) || this.device;\n};\nDeviceInfo.prototype.getDevice = function () {\n  return this.device;\n};\nDeviceInfo.prototype.setViewer = function (viewer) {\n  this.viewer = viewer;\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n};\nDeviceInfo.prototype.determineDevice_ = function (deviceParams) {\n  if (!deviceParams) {\n    if (isIOS()) {\n      console.warn('Using fallback iOS device measurements.');\n      return DEFAULT_IOS;\n    } else {\n      console.warn('Using fallback Android device measurements.');\n      return DEFAULT_ANDROID;\n    }\n  }\n  var METERS_PER_INCH = 0.0254;\n  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;\n  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  return new Device({\n    widthMeters: metersPerPixelX * width,\n    heightMeters: metersPerPixelY * height,\n    bevelMeters: deviceParams.bevelMm * 0.001\n  });\n};\nDeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;\n  var innerDist = viewer.interLensDistance / 2;\n  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;\n  var topDist = device.heightMeters - bottomDist;\n  var outerAngle = radToDeg * Math.atan(distortion.distort(outerDist / eyeToScreenDistance));\n  var innerAngle = radToDeg * Math.atan(distortion.distort(innerDist / eyeToScreenDistance));\n  var bottomAngle = radToDeg * Math.atan(distortion.distort(bottomDist / eyeToScreenDistance));\n  var topAngle = radToDeg * Math.atan(distortion.distort(topDist / eyeToScreenDistance));\n  return {\n    leftDegrees: Math.min(outerAngle, viewer.fov),\n    rightDegrees: Math.min(innerAngle, viewer.fov),\n    downDegrees: Math.min(bottomAngle, viewer.fov),\n    upDegrees: Math.min(topAngle, viewer.fov)\n  };\n};\nDeviceInfo.prototype.getLeftEyeVisibleTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var fovLeft = Math.tan(-degToRad * viewer.fov);\n  var fovTop = Math.tan(degToRad * viewer.fov);\n  var fovRight = Math.tan(degToRad * viewer.fov);\n  var fovBottom = Math.tan(-degToRad * viewer.fov);\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);\n  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);\n  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);\n  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);\n  var result = new Float32Array(4);\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeNoLensTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var result = new Float32Array(4);\n  var fovLeft = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var fovTop = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovRight = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovBottom = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = (centerX - halfWidth) / centerZ;\n  var screenTop = (centerY + halfHeight) / centerZ;\n  var screenRight = (centerX + halfWidth) / centerZ;\n  var screenBottom = (centerY - halfHeight) / centerZ;\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeVisibleScreenRect = function (undistortedFrustum) {\n  var viewer = this.viewer;\n  var device = this.device;\n  var dist = viewer.screenLensDistance;\n  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;\n  var eyeY = viewer.baselineLensDistance - device.bevelMeters;\n  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;\n  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;\n  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;\n  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;\n  return {\n    x: left,\n    y: bottom,\n    width: right - left,\n    height: top - bottom\n  };\n};\nDeviceInfo.prototype.getFieldOfViewLeftEye = function (opt_isUndistorted) {\n  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() : this.getDistortedFieldOfViewLeftEye();\n};\nDeviceInfo.prototype.getFieldOfViewRightEye = function (opt_isUndistorted) {\n  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);\n  return {\n    leftDegrees: fov.rightDegrees,\n    rightDegrees: fov.leftDegrees,\n    upDegrees: fov.upDegrees,\n    downDegrees: fov.downDegrees\n  };\n};\nDeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  return {\n    leftDegrees: radToDeg * Math.atan(p.outerDist),\n    rightDegrees: radToDeg * Math.atan(p.innerDist),\n    downDegrees: radToDeg * Math.atan(p.bottomDist),\n    upDegrees: radToDeg * Math.atan(p.topDist)\n  };\n};\nDeviceInfo.prototype.getUndistortedViewportLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  var viewer = this.viewer;\n  var device = this.device;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var xPxPerTanAngle = device.width / screenWidth;\n  var yPxPerTanAngle = device.height / screenHeight;\n  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);\n  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);\n  return {\n    x: x,\n    y: y,\n    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,\n    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y\n  };\n};\nDeviceInfo.prototype.getUndistortedParams_ = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var eyePosX = screenWidth / 2 - halfLensDistance;\n  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;\n  var maxFov = viewer.fov;\n  var viewerMax = distortion.distortInverse(Math.tan(degToRad * maxFov));\n  var outerDist = Math.min(eyePosX, viewerMax);\n  var innerDist = Math.min(halfLensDistance, viewerMax);\n  var bottomDist = Math.min(eyePosY, viewerMax);\n  var topDist = Math.min(screenHeight - eyePosY, viewerMax);\n  return {\n    outerDist: outerDist,\n    innerDist: innerDist,\n    topDist: topDist,\n    bottomDist: bottomDist,\n    eyePosX: eyePosX,\n    eyePosY: eyePosY\n  };\n};\nfunction CardboardViewer(params) {\n  this.id = params.id;\n  this.label = params.label;\n  this.fov = params.fov;\n  this.interLensDistance = params.interLensDistance;\n  this.baselineLensDistance = params.baselineLensDistance;\n  this.screenLensDistance = params.screenLensDistance;\n  this.distortionCoefficients = params.distortionCoefficients;\n  this.inverseCoefficients = params.inverseCoefficients;\n}\nDeviceInfo.Viewers = Viewers;\nvar format = 1;\nvar last_updated = \"2019-11-09T17:36:14Z\";\nvar devices = [{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/Nexus 7/*\"},{\"ua\":\"Nexus 7\"}],\"dpi\":[320.8,323],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X00PD/*\"},{\"ua\":\"ASUS_X00PD\"}],\"dpi\":245,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X008D/*\"},{\"ua\":\"ASUS_X008D\"}],\"dpi\":282,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_Z00AD/*\"},{\"ua\":\"ASUS_Z00AD\"}],\"dpi\":[403,404.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2 XL/*\"},{\"ua\":\"Pixel 2 XL\"}],\"dpi\":537.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3 XL/*\"},{\"ua\":\"Pixel 3 XL\"}],\"dpi\":[558.5,553.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel XL/*\"},{\"ua\":\"Pixel XL\"}],\"dpi\":[537.9,533],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3/*\"},{\"ua\":\"Pixel 3\"}],\"dpi\":442.4,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2/*\"},{\"ua\":\"Pixel 2\"}],\"dpi\":441,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel/*\"},{\"ua\":\"Pixel\"}],\"dpi\":[432.6,436.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC6435LVW/*\"},{\"ua\":\"HTC6435LVW\"}],\"dpi\":[449.7,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One XL/*\"},{\"ua\":\"HTC One XL\"}],\"dpi\":[315.3,314.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"htc/*/Nexus 9/*\"},{\"ua\":\"Nexus 9\"}],\"dpi\":289,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One M9/*\"},{\"ua\":\"HTC One M9\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One_M8/*\"},{\"ua\":\"HTC One_M8\"}],\"dpi\":[449.7,447.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One/*\"},{\"ua\":\"HTC One\"}],\"dpi\":472.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/Nexus 6P/*\"},{\"ua\":\"Nexus 6P\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BLN-L24/*\"},{\"ua\":\"HONORBLN-L24\"}],\"dpi\":480,\"bw\":4,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BKL-L09/*\"},{\"ua\":\"BKL-L09\"}],\"dpi\":403,\"bw\":3.47,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LENOVO/*/Lenovo PB2-690Y/*\"},{\"ua\":\"Lenovo PB2-690Y\"}],\"dpi\":[457.2,454.713],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5X/*\"},{\"ua\":\"Nexus 5X\"}],\"dpi\":[422,419.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS345/*\"},{\"ua\":\"LGMS345\"}],\"dpi\":[221.7,219.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D800/*\"},{\"ua\":\"LG-D800\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D850/*\"},{\"ua\":\"LG-D850\"}],\"dpi\":[537.9,541.9],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/VS985 4G/*\"},{\"ua\":\"VS985 4G\"}],\"dpi\":[537.9,535.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5/*\"},{\"ua\":\"Nexus 5 B\"}],\"dpi\":[442.4,444.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 4/*\"},{\"ua\":\"Nexus 4\"}],\"dpi\":[319.8,318.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-P769/*\"},{\"ua\":\"LG-P769\"}],\"dpi\":[240.6,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS323/*\"},{\"ua\":\"LGMS323\"}],\"dpi\":[206.6,204.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGLS996/*\"},{\"ua\":\"LGLS996\"}],\"dpi\":[403.4,401.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/4560MMX/*\"},{\"ua\":\"4560MMX\"}],\"dpi\":[240,219.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/A250/*\"},{\"ua\":\"Micromax A250\"}],\"dpi\":[480,446.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/Micromax AQ4501/*\"},{\"ua\":\"Micromax AQ4501\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G5/*\"},{\"ua\":\"Moto G (5) Plus\"}],\"dpi\":[403.4,403],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/DROID RAZR/*\"},{\"ua\":\"DROID RAZR\"}],\"dpi\":[368.1,256.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT830C/*\"},{\"ua\":\"XT830C\"}],\"dpi\":[254,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1021/*\"},{\"ua\":\"XT1021\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1023/*\"},{\"ua\":\"XT1023\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1028/*\"},{\"ua\":\"XT1028\"}],\"dpi\":[326.6,327.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1034/*\"},{\"ua\":\"XT1034\"}],\"dpi\":[326.6,328.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1053/*\"},{\"ua\":\"XT1053\"}],\"dpi\":[315.3,316.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1562/*\"},{\"ua\":\"XT1562\"}],\"dpi\":[403.4,402.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/Nexus 6/*\"},{\"ua\":\"Nexus 6 B\"}],\"dpi\":[494.3,489.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1063/*\"},{\"ua\":\"XT1063\"}],\"dpi\":[295,296.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1064/*\"},{\"ua\":\"XT1064\"}],\"dpi\":[295,295.6],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1092/*\"},{\"ua\":\"XT1092\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1095/*\"},{\"ua\":\"XT1095\"}],\"dpi\":[422,423.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G4/*\"},{\"ua\":\"Moto G (4)\"}],\"dpi\":401,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/A0001/*\"},{\"ua\":\"A0001\"}],\"dpi\":[403.4,401],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1001/*\"},{\"ua\":\"ONE E1001\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1003/*\"},{\"ua\":\"ONE E1003\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1005/*\"},{\"ua\":\"ONE E1005\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2001/*\"},{\"ua\":\"ONE A2001\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2003/*\"},{\"ua\":\"ONE A2003\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2005/*\"},{\"ua\":\"ONE A2005\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3000/*\"},{\"ua\":\"ONEPLUS A3000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3003/*\"},{\"ua\":\"ONEPLUS A3003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3010/*\"},{\"ua\":\"ONEPLUS A3010\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A5000/*\"},{\"ua\":\"ONEPLUS A5000 \"}],\"dpi\":[403.411,399.737],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A5010/*\"},{\"ua\":\"ONEPLUS A5010\"}],\"dpi\":[403,400],\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6000/*\"},{\"ua\":\"ONEPLUS A6000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6003/*\"},{\"ua\":\"ONEPLUS A6003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6010/*\"},{\"ua\":\"ONEPLUS A6010\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6013/*\"},{\"ua\":\"ONEPLUS A6013\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OPPO/*/X909/*\"},{\"ua\":\"X909\"}],\"dpi\":[442.4,444.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9082/*\"},{\"ua\":\"GT-I9082\"}],\"dpi\":[184.7,185.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G360P/*\"},{\"ua\":\"SM-G360P\"}],\"dpi\":[196.7,205.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Nexus S/*\"},{\"ua\":\"Nexus S\"}],\"dpi\":[234.5,229.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[304.8,303.9],\"bw\":5,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T230NU/*\"},{\"ua\":\"SM-T230NU\"}],\"dpi\":216,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-T399/*\"},{\"ua\":\"SGH-T399\"}],\"dpi\":[217.7,231.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-M919/*\"},{\"ua\":\"SGH-M919\"}],\"dpi\":[440.8,437.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N9005/*\"},{\"ua\":\"SM-N9005\"}],\"dpi\":[386.4,387],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SM-N900A/*\"},{\"ua\":\"SAMSUNG-SM-N900A\"}],\"dpi\":[386.4,387.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9500/*\"},{\"ua\":\"GT-I9500\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9505/*\"},{\"ua\":\"GT-I9505\"}],\"dpi\":439.4,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900F/*\"},{\"ua\":\"SM-G900F\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900M/*\"},{\"ua\":\"SM-G900M\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G800F/*\"},{\"ua\":\"SM-G800F\"}],\"dpi\":326.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G906S/*\"},{\"ua\":\"SM-G906S\"}],\"dpi\":[562.7,572.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[306.7,304.8],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T535/*\"},{\"ua\":\"SM-T535\"}],\"dpi\":[142.6,136.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920C/*\"},{\"ua\":\"SM-N920C\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920P/*\"},{\"ua\":\"SM-N920P\"}],\"dpi\":[386.3655,390.144],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920W8/*\"},{\"ua\":\"SM-N920W8\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300I/*\"},{\"ua\":\"GT-I9300I\"}],\"dpi\":[304.8,305.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9195/*\"},{\"ua\":\"GT-I9195\"}],\"dpi\":[249.4,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-L520/*\"},{\"ua\":\"SPH-L520\"}],\"dpi\":[249.4,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SGH-I717/*\"},{\"ua\":\"SAMSUNG-SGH-I717\"}],\"dpi\":285.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-D710/*\"},{\"ua\":\"SPH-D710\"}],\"dpi\":[217.7,204.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-N7100/*\"},{\"ua\":\"GT-N7100\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SCH-I605/*\"},{\"ua\":\"SCH-I605\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Galaxy Nexus/*\"},{\"ua\":\"Galaxy Nexus\"}],\"dpi\":[315.3,314.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910H/*\"},{\"ua\":\"SM-N910H\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910C/*\"},{\"ua\":\"SM-N910C\"}],\"dpi\":[515.2,520.2],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G130M/*\"},{\"ua\":\"SM-G130M\"}],\"dpi\":[165.9,164.8],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G928I/*\"},{\"ua\":\"SM-G928I\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920F/*\"},{\"ua\":\"SM-G920F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920P/*\"},{\"ua\":\"SM-G920P\"}],\"dpi\":[522.5,577],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925F/*\"},{\"ua\":\"SM-G925F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925V/*\"},{\"ua\":\"SM-G925V\"}],\"dpi\":[522.5,576.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G930F/*\"},{\"ua\":\"SM-G930F\"}],\"dpi\":576.6,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G935F/*\"},{\"ua\":\"SM-G935F\"}],\"dpi\":533,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G950F/*\"},{\"ua\":\"SM-G950F\"}],\"dpi\":[562.707,565.293],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955U/*\"},{\"ua\":\"SM-G955U\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955F/*\"},{\"ua\":\"SM-G955F\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960F/*\"},{\"ua\":\"SM-G960F\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9600/*\"},{\"ua\":\"SM-G9600\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960T/*\"},{\"ua\":\"SM-G960T\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960N/*\"},{\"ua\":\"SM-G960N\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960U/*\"},{\"ua\":\"SM-G960U\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9608/*\"},{\"ua\":\"SM-G9608\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960FD/*\"},{\"ua\":\"SM-G960FD\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960W/*\"},{\"ua\":\"SM-G960W\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G965F/*\"},{\"ua\":\"SM-G965F\"}],\"dpi\":529,\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/C6903/*\"},{\"ua\":\"C6903\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/D6653/*\"},{\"ua\":\"D6653\"}],\"dpi\":[428.6,427.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6653/*\"},{\"ua\":\"E6653\"}],\"dpi\":[428.6,425.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6853/*\"},{\"ua\":\"E6853\"}],\"dpi\":[403.4,401.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/SGP321/*\"},{\"ua\":\"SGP321\"}],\"dpi\":[224.7,224.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"TCT/*/ALCATEL ONE TOUCH Fierce/*\"},{\"ua\":\"ALCATEL ONE TOUCH Fierce\"}],\"dpi\":[240,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"THL/*/thl 5000/*\"},{\"ua\":\"thl 5000\"}],\"dpi\":[480,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Fly/*/IQ4412/*\"},{\"ua\":\"IQ4412\"}],\"dpi\":307.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"ZTE/*/ZTE Blade L2/*\"},{\"ua\":\"ZTE Blade L2\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"BENEVE/*/VR518/*\"},{\"ua\":\"VR518\"}],\"dpi\":480,\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[640,960]}],\"dpi\":[325.1,328.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[640,1136]}],\"dpi\":[317.1,320.2],\"bw\":3,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[750,1334]}],\"dpi\":326.4,\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2208]}],\"dpi\":[453.6,458.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2001]}],\"dpi\":[410.9,415.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2436]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/EML-L29/*\"},{\"ua\":\"EML-L29\"}],\"dpi\":428,\"bw\":3.45,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Nokia/*/Nokia 7.1/*\"},{\"ua\":\"Nokia 7.1\"}],\"dpi\":[432,431.9],\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2688]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G570M/*\"},{\"ua\":\"SM-G570M\"}],\"dpi\":320,\"bw\":3.684,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G970F/*\"},{\"ua\":\"SM-G970F\"}],\"dpi\":438,\"bw\":2.281,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G973F/*\"},{\"ua\":\"SM-G973F\"}],\"dpi\":550,\"bw\":2.002,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G975F/*\"},{\"ua\":\"SM-G975F\"}],\"dpi\":522,\"bw\":2.054,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G977F/*\"},{\"ua\":\"SM-G977F\"}],\"dpi\":505,\"bw\":2.334,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[828,1792]}],\"dpi\":326,\"bw\":5,\"ac\":500}];\nvar DPDB_CACHE = {\n\tformat: format,\n\tlast_updated: last_updated,\n\tdevices: devices\n};\nfunction Dpdb(url, onDeviceParamsUpdated) {\n  this.dpdb = DPDB_CACHE;\n  this.recalculateDeviceParams_();\n  if (url) {\n    this.onDeviceParamsUpdated = onDeviceParamsUpdated;\n    var xhr = new XMLHttpRequest();\n    var obj = this;\n    xhr.open('GET', url, true);\n    xhr.addEventListener('load', function () {\n      obj.loading = false;\n      if (xhr.status >= 200 && xhr.status <= 299) {\n        obj.dpdb = JSON.parse(xhr.response);\n        obj.recalculateDeviceParams_();\n      } else {\n        console.error('Error loading online DPDB!');\n      }\n    });\n    xhr.send();\n  }\n}\nDpdb.prototype.getDeviceParams = function () {\n  return this.deviceParams;\n};\nDpdb.prototype.recalculateDeviceParams_ = function () {\n  var newDeviceParams = this.calcDeviceParams_();\n  if (newDeviceParams) {\n    this.deviceParams = newDeviceParams;\n    if (this.onDeviceParamsUpdated) {\n      this.onDeviceParamsUpdated(this.deviceParams);\n    }\n  } else {\n    console.error('Failed to recalculate device parameters.');\n  }\n};\nDpdb.prototype.calcDeviceParams_ = function () {\n  var db = this.dpdb;\n  if (!db) {\n    console.error('DPDB not available.');\n    return null;\n  }\n  if (db.format != 1) {\n    console.error('DPDB has unexpected format version.');\n    return null;\n  }\n  if (!db.devices || !db.devices.length) {\n    console.error('DPDB does not have a devices section.');\n    return null;\n  }\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  if (!db.devices) {\n    console.error('DPDB has no devices section.');\n    return null;\n  }\n  for (var i = 0; i < db.devices.length; i++) {\n    var device = db.devices[i];\n    if (!device.rules) {\n      console.warn('Device[' + i + '] has no rules section.');\n      continue;\n    }\n    if (device.type != 'ios' && device.type != 'android') {\n      console.warn('Device[' + i + '] has invalid type.');\n      continue;\n    }\n    if (isIOS() != (device.type == 'ios')) continue;\n    var matched = false;\n    for (var j = 0; j < device.rules.length; j++) {\n      var rule = device.rules[j];\n      if (this.ruleMatches_(rule, userAgent, width, height)) {\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) continue;\n    var xdpi = device.dpi[0] || device.dpi;\n    var ydpi = device.dpi[1] || device.dpi;\n    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });\n  }\n  console.warn('No DPDB device match.');\n  return null;\n};\nDpdb.prototype.ruleMatches_ = function (rule, ua, screenWidth, screenHeight) {\n  if (!rule.ua && !rule.res) return false;\n  if (rule.ua && rule.ua.substring(0, 2) === 'SM') rule.ua = rule.ua.substring(0, 7);\n  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;\n  if (rule.res) {\n    if (!rule.res[0] || !rule.res[1]) return false;\n    var resX = rule.res[0];\n    var resY = rule.res[1];\n    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) || Math.max(screenWidth, screenHeight) != Math.max(resX, resY)) {\n      return false;\n    }\n  }\n  return true;\n};\nfunction DeviceParams(params) {\n  this.xdpi = params.xdpi;\n  this.ydpi = params.ydpi;\n  this.bevelMm = params.bevelMm;\n}\nfunction SensorSample(sample, timestampS) {\n  this.set(sample, timestampS);\n}\nSensorSample.prototype.set = function (sample, timestampS) {\n  this.sample = sample;\n  this.timestampS = timestampS;\n};\nSensorSample.prototype.copy = function (sensorSample) {\n  this.set(sensorSample.sample, sensorSample.timestampS);\n};\nfunction ComplementaryFilter(kFilter, isDebug) {\n  this.kFilter = kFilter;\n  this.isDebug = isDebug;\n  this.currentAccelMeasurement = new SensorSample();\n  this.currentGyroMeasurement = new SensorSample();\n  this.previousGyroMeasurement = new SensorSample();\n  if (isIOS()) {\n    this.filterQ = new Quaternion(-1, 0, 0, 1);\n  } else {\n    this.filterQ = new Quaternion(1, 0, 0, 1);\n  }\n  this.previousFilterQ = new Quaternion();\n  this.previousFilterQ.copy(this.filterQ);\n  this.accelQ = new Quaternion();\n  this.isOrientationInitialized = false;\n  this.estimatedGravity = new Vector3();\n  this.measuredGravity = new Vector3();\n  this.gyroIntegralQ = new Quaternion();\n}\nComplementaryFilter.prototype.addAccelMeasurement = function (vector, timestampS) {\n  this.currentAccelMeasurement.set(vector, timestampS);\n};\nComplementaryFilter.prototype.addGyroMeasurement = function (vector, timestampS) {\n  this.currentGyroMeasurement.set(vector, timestampS);\n  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;\n  if (isTimestampDeltaValid(deltaT)) {\n    this.run_();\n  }\n  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);\n};\nComplementaryFilter.prototype.run_ = function () {\n  if (!this.isOrientationInitialized) {\n    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);\n    this.previousFilterQ.copy(this.accelQ);\n    this.isOrientationInitialized = true;\n    return;\n  }\n  var deltaT = this.currentGyroMeasurement.timestampS - this.previousGyroMeasurement.timestampS;\n  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);\n  this.gyroIntegralQ.multiply(gyroDeltaQ);\n  this.filterQ.copy(this.previousFilterQ);\n  this.filterQ.multiply(gyroDeltaQ);\n  var invFilterQ = new Quaternion();\n  invFilterQ.copy(this.filterQ);\n  invFilterQ.inverse();\n  this.estimatedGravity.set(0, 0, -1);\n  this.estimatedGravity.applyQuaternion(invFilterQ);\n  this.estimatedGravity.normalize();\n  this.measuredGravity.copy(this.currentAccelMeasurement.sample);\n  this.measuredGravity.normalize();\n  var deltaQ = new Quaternion();\n  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);\n  deltaQ.inverse();\n  if (this.isDebug) {\n    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)', radToDeg * getQuaternionAngle(deltaQ), this.estimatedGravity.x.toFixed(1), this.estimatedGravity.y.toFixed(1), this.estimatedGravity.z.toFixed(1), this.measuredGravity.x.toFixed(1), this.measuredGravity.y.toFixed(1), this.measuredGravity.z.toFixed(1));\n  }\n  var targetQ = new Quaternion();\n  targetQ.copy(this.filterQ);\n  targetQ.multiply(deltaQ);\n  this.filterQ.slerp(targetQ, 1 - this.kFilter);\n  this.previousFilterQ.copy(this.filterQ);\n};\nComplementaryFilter.prototype.getOrientation = function () {\n  return this.filterQ;\n};\nComplementaryFilter.prototype.accelToQuaternion_ = function (accel) {\n  var normAccel = new Vector3();\n  normAccel.copy(accel);\n  normAccel.normalize();\n  var quat = new Quaternion();\n  quat.setFromUnitVectors(new Vector3(0, 0, -1), normAccel);\n  quat.inverse();\n  return quat;\n};\nComplementaryFilter.prototype.gyroToQuaternionDelta_ = function (gyro, dt) {\n  var quat = new Quaternion();\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  quat.setFromAxisAngle(axis, gyro.length() * dt);\n  return quat;\n};\nfunction PosePredictor(predictionTimeS, isDebug) {\n  this.predictionTimeS = predictionTimeS;\n  this.isDebug = isDebug;\n  this.previousQ = new Quaternion();\n  this.previousTimestampS = null;\n  this.deltaQ = new Quaternion();\n  this.outQ = new Quaternion();\n}\nPosePredictor.prototype.getPrediction = function (currentQ, gyro, timestampS) {\n  if (!this.previousTimestampS) {\n    this.previousQ.copy(currentQ);\n    this.previousTimestampS = timestampS;\n    return currentQ;\n  }\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  var angularSpeed = gyro.length();\n  if (angularSpeed < degToRad * 20) {\n    if (this.isDebug) {\n      console.log('Moving slowly, at %s deg/s: no prediction', (radToDeg * angularSpeed).toFixed(1));\n    }\n    this.outQ.copy(currentQ);\n    this.previousQ.copy(currentQ);\n    return this.outQ;\n  }\n  var predictAngle = angularSpeed * this.predictionTimeS;\n  this.deltaQ.setFromAxisAngle(axis, predictAngle);\n  this.outQ.copy(this.previousQ);\n  this.outQ.multiply(this.deltaQ);\n  this.previousQ.copy(currentQ);\n  this.previousTimestampS = timestampS;\n  return this.outQ;\n};\nfunction FusionPoseSensor(kFilter, predictionTime, yawOnly, isDebug) {\n  this.yawOnly = yawOnly;\n  this.accelerometer = new Vector3();\n  this.gyroscope = new Vector3();\n  this.filter = new ComplementaryFilter(kFilter, isDebug);\n  this.posePredictor = new PosePredictor(predictionTime, isDebug);\n  this.isFirefoxAndroid = isFirefoxAndroid();\n  this.isIOS = isIOS();\n  var chromeVersion = getChromeVersion();\n  this.isDeviceMotionInRadians = !this.isIOS && chromeVersion && chromeVersion < 66;\n  this.isWithoutDeviceMotion = isChromeWithoutDeviceMotion() || isSafariWithoutDeviceMotion();\n  this.filterToWorldQ = new Quaternion();\n  if (isIOS()) {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), Math.PI / 2);\n  } else {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n  }\n  this.inverseWorldToScreenQ = new Quaternion();\n  this.worldToScreenQ = new Quaternion();\n  this.originalPoseAdjustQ = new Quaternion();\n  this.originalPoseAdjustQ.setFromAxisAngle(new Vector3(0, 0, 1), -window.orientation * Math.PI / 180);\n  this.setScreenTransform_();\n  if (isLandscapeMode()) {\n    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ = new Quaternion();\n  this.orientationOut_ = new Float32Array(4);\n  this.start();\n}\nFusionPoseSensor.prototype.getPosition = function () {\n  return null;\n};\nFusionPoseSensor.prototype.getOrientation = function () {\n  var orientation = void 0;\n  if (this.isWithoutDeviceMotion && this._deviceOrientationQ) {\n    this.deviceOrientationFixQ = this.deviceOrientationFixQ || function () {\n      var z = new Quaternion().setFromAxisAngle(new Vector3(0, 0, -1), 0);\n      var y = new Quaternion();\n      if (window.orientation === -90) {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / -2);\n      } else {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / 2);\n      }\n      return z.multiply(y);\n    }();\n    this.deviceOrientationFilterToWorldQ = this.deviceOrientationFilterToWorldQ || function () {\n      var q = new Quaternion();\n      q.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n      return q;\n    }();\n    orientation = this._deviceOrientationQ;\n    var out = new Quaternion();\n    out.copy(orientation);\n    out.multiply(this.deviceOrientationFilterToWorldQ);\n    out.multiply(this.resetQ);\n    out.multiply(this.worldToScreenQ);\n    out.multiplyQuaternions(this.deviceOrientationFixQ, out);\n    if (this.yawOnly) {\n      out.x = 0;\n      out.z = 0;\n      out.normalize();\n    }\n    this.orientationOut_[0] = out.x;\n    this.orientationOut_[1] = out.y;\n    this.orientationOut_[2] = out.z;\n    this.orientationOut_[3] = out.w;\n    return this.orientationOut_;\n  } else {\n    var filterOrientation = this.filter.getOrientation();\n    orientation = this.posePredictor.getPrediction(filterOrientation, this.gyroscope, this.previousTimestampS);\n  }\n  var out = new Quaternion();\n  out.copy(this.filterToWorldQ);\n  out.multiply(this.resetQ);\n  out.multiply(orientation);\n  out.multiply(this.worldToScreenQ);\n  if (this.yawOnly) {\n    out.x = 0;\n    out.z = 0;\n    out.normalize();\n  }\n  this.orientationOut_[0] = out.x;\n  this.orientationOut_[1] = out.y;\n  this.orientationOut_[2] = out.z;\n  this.orientationOut_[3] = out.w;\n  return this.orientationOut_;\n};\nFusionPoseSensor.prototype.resetPose = function () {\n  this.resetQ.copy(this.filter.getOrientation());\n  this.resetQ.x = 0;\n  this.resetQ.y = 0;\n  this.resetQ.z *= -1;\n  this.resetQ.normalize();\n  if (isLandscapeMode()) {\n    this.resetQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ.multiply(this.originalPoseAdjustQ);\n};\nFusionPoseSensor.prototype.onDeviceOrientation_ = function (e) {\n  this._deviceOrientationQ = this._deviceOrientationQ || new Quaternion();\n  var alpha = e.alpha,\n      beta = e.beta,\n      gamma = e.gamma;\n  alpha = (alpha || 0) * Math.PI / 180;\n  beta = (beta || 0) * Math.PI / 180;\n  gamma = (gamma || 0) * Math.PI / 180;\n  this._deviceOrientationQ.setFromEulerYXZ(beta, alpha, -gamma);\n};\nFusionPoseSensor.prototype.onDeviceMotion_ = function (deviceMotion) {\n  this.updateDeviceMotion_(deviceMotion);\n};\nFusionPoseSensor.prototype.updateDeviceMotion_ = function (deviceMotion) {\n  var accGravity = deviceMotion.accelerationIncludingGravity;\n  var rotRate = deviceMotion.rotationRate;\n  var timestampS = deviceMotion.timeStamp / 1000;\n  var deltaS = timestampS - this.previousTimestampS;\n  if (deltaS < 0) {\n    warnOnce('fusion-pose-sensor:invalid:non-monotonic', 'Invalid timestamps detected: non-monotonic timestamp from devicemotion');\n    this.previousTimestampS = timestampS;\n    return;\n  } else if (deltaS <= MIN_TIMESTEP || deltaS > MAX_TIMESTEP) {\n    warnOnce('fusion-pose-sensor:invalid:outside-threshold', 'Invalid timestamps detected: Timestamp from devicemotion outside expected range.');\n    this.previousTimestampS = timestampS;\n    return;\n  }\n  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);\n  if (rotRate) {\n    if (isR7()) {\n      this.gyroscope.set(-rotRate.beta, rotRate.alpha, rotRate.gamma);\n    } else {\n      this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);\n    }\n    if (!this.isDeviceMotionInRadians) {\n      this.gyroscope.multiplyScalar(Math.PI / 180);\n    }\n    this.filter.addGyroMeasurement(this.gyroscope, timestampS);\n  }\n  this.filter.addAccelMeasurement(this.accelerometer, timestampS);\n  this.previousTimestampS = timestampS;\n};\nFusionPoseSensor.prototype.onOrientationChange_ = function (screenOrientation) {\n  this.setScreenTransform_();\n};\nFusionPoseSensor.prototype.onMessage_ = function (event) {\n  var message = event.data;\n  if (!message || !message.type) {\n    return;\n  }\n  var type = message.type.toLowerCase();\n  if (type !== 'devicemotion') {\n    return;\n  }\n  this.updateDeviceMotion_(message.deviceMotionEvent);\n};\nFusionPoseSensor.prototype.setScreenTransform_ = function () {\n  this.worldToScreenQ.set(0, 0, 0, 1);\n  switch (window.orientation) {\n    case 0:\n      break;\n    case 90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), -Math.PI / 2);\n      break;\n    case -90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), Math.PI / 2);\n      break;\n    case 180:\n      break;\n  }\n  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);\n  this.inverseWorldToScreenQ.inverse();\n};\nFusionPoseSensor.prototype.start = function () {\n  this.onDeviceMotionCallback_ = this.onDeviceMotion_.bind(this);\n  this.onOrientationChangeCallback_ = this.onOrientationChange_.bind(this);\n  this.onMessageCallback_ = this.onMessage_.bind(this);\n  this.onDeviceOrientationCallback_ = this.onDeviceOrientation_.bind(this);\n  if (isIOS() && isInsideCrossOriginIFrame()) {\n    window.addEventListener('message', this.onMessageCallback_);\n  }\n  window.addEventListener('orientationchange', this.onOrientationChangeCallback_);\n  if (this.isWithoutDeviceMotion) {\n    window.addEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  } else {\n    window.addEventListener('devicemotion', this.onDeviceMotionCallback_);\n  }\n};\nFusionPoseSensor.prototype.stop = function () {\n  window.removeEventListener('devicemotion', this.onDeviceMotionCallback_);\n  window.removeEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  window.removeEventListener('orientationchange', this.onOrientationChangeCallback_);\n  window.removeEventListener('message', this.onMessageCallback_);\n};\nvar SENSOR_FREQUENCY = 60;\nvar X_AXIS = new Vector3(1, 0, 0);\nvar Z_AXIS = new Vector3(0, 0, 1);\nvar SENSOR_TO_VR = new Quaternion();\nSENSOR_TO_VR.setFromAxisAngle(X_AXIS, -Math.PI / 2);\nSENSOR_TO_VR.multiply(new Quaternion().setFromAxisAngle(Z_AXIS, Math.PI / 2));\nvar PoseSensor = function () {\n  function PoseSensor(config) {\n    classCallCheck(this, PoseSensor);\n    this.config = config;\n    this.sensor = null;\n    this.fusionSensor = null;\n    this._out = new Float32Array(4);\n    this.api = null;\n    this.errors = [];\n    this._sensorQ = new Quaternion();\n    this._outQ = new Quaternion();\n    this._onSensorRead = this._onSensorRead.bind(this);\n    this._onSensorError = this._onSensorError.bind(this);\n    this.init();\n  }\n  createClass(PoseSensor, [{\n    key: 'init',\n    value: function init() {\n      var sensor = null;\n      try {\n        sensor = new RelativeOrientationSensor({\n          frequency: SENSOR_FREQUENCY,\n          referenceFrame: 'screen'\n        });\n        sensor.addEventListener('error', this._onSensorError);\n      } catch (error) {\n        this.errors.push(error);\n        if (error.name === 'SecurityError') {\n          console.error('Cannot construct sensors due to the Feature Policy');\n          console.warn('Attempting to fall back using \"devicemotion\"; however this will ' + 'fail in the future without correct permissions.');\n          this.useDeviceMotion();\n        } else if (error.name === 'ReferenceError') {\n          this.useDeviceMotion();\n        } else {\n          console.error(error);\n        }\n      }\n      if (sensor) {\n        this.api = 'sensor';\n        this.sensor = sensor;\n        this.sensor.addEventListener('reading', this._onSensorRead);\n        this.sensor.start();\n      }\n    }\n  }, {\n    key: 'useDeviceMotion',\n    value: function useDeviceMotion() {\n      this.api = 'devicemotion';\n      this.fusionSensor = new FusionPoseSensor(this.config.K_FILTER, this.config.PREDICTION_TIME_S, this.config.YAW_ONLY, this.config.DEBUG);\n      if (this.sensor) {\n        this.sensor.removeEventListener('reading', this._onSensorRead);\n        this.sensor.removeEventListener('error', this._onSensorError);\n        this.sensor = null;\n      }\n    }\n  }, {\n    key: 'getOrientation',\n    value: function getOrientation() {\n      if (this.fusionSensor) {\n        return this.fusionSensor.getOrientation();\n      }\n      if (!this.sensor || !this.sensor.quaternion) {\n        this._out[0] = this._out[1] = this._out[2] = 0;\n        this._out[3] = 1;\n        return this._out;\n      }\n      var q = this.sensor.quaternion;\n      this._sensorQ.set(q[0], q[1], q[2], q[3]);\n      var out = this._outQ;\n      out.copy(SENSOR_TO_VR);\n      out.multiply(this._sensorQ);\n      if (this.config.YAW_ONLY) {\n        out.x = out.z = 0;\n        out.normalize();\n      }\n      this._out[0] = out.x;\n      this._out[1] = out.y;\n      this._out[2] = out.z;\n      this._out[3] = out.w;\n      return this._out;\n    }\n  }, {\n    key: '_onSensorError',\n    value: function _onSensorError(event) {\n      this.errors.push(event.error);\n      if (event.error.name === 'NotAllowedError') {\n        console.error('Permission to access sensor was denied');\n      } else if (event.error.name === 'NotReadableError') {\n        console.error('Sensor could not be read');\n      } else {\n        console.error(event.error);\n      }\n      this.useDeviceMotion();\n    }\n  }, {\n    key: '_onSensorRead',\n    value: function _onSensorRead() {}\n  }]);\n  return PoseSensor;\n}();\nvar rotateInstructionsAsset = \"<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>\";\nfunction RotateInstructions() {\n  this.loadIcon_();\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.top = 0;\n  s.right = 0;\n  s.bottom = 0;\n  s.left = 0;\n  s.backgroundColor = 'gray';\n  s.fontFamily = 'sans-serif';\n  s.zIndex = 1000000;\n  var img = document.createElement('img');\n  img.src = this.icon;\n  var s = img.style;\n  s.marginLeft = '25%';\n  s.marginTop = '25%';\n  s.width = '50%';\n  overlay.appendChild(img);\n  var text = document.createElement('div');\n  var s = text.style;\n  s.textAlign = 'center';\n  s.fontSize = '16px';\n  s.lineHeight = '24px';\n  s.margin = '24px 25%';\n  s.width = '50%';\n  text.innerHTML = 'Place your phone into your Cardboard viewer.';\n  overlay.appendChild(text);\n  var snackbar = document.createElement('div');\n  var s = snackbar.style;\n  s.backgroundColor = '#CFD8DC';\n  s.position = 'fixed';\n  s.bottom = 0;\n  s.width = '100%';\n  s.height = '48px';\n  s.padding = '14px 24px';\n  s.boxSizing = 'border-box';\n  s.color = '#656A6B';\n  overlay.appendChild(snackbar);\n  var snackbarText = document.createElement('div');\n  snackbarText.style.float = 'left';\n  snackbarText.innerHTML = 'No Cardboard viewer?';\n  var snackbarButton = document.createElement('a');\n  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';\n  snackbarButton.innerHTML = 'get one';\n  snackbarButton.target = '_blank';\n  var s = snackbarButton.style;\n  s.float = 'right';\n  s.fontWeight = 600;\n  s.textTransform = 'uppercase';\n  s.borderLeft = '1px solid gray';\n  s.paddingLeft = '24px';\n  s.textDecoration = 'none';\n  s.color = '#656A6B';\n  snackbar.appendChild(snackbarText);\n  snackbar.appendChild(snackbarButton);\n  this.overlay = overlay;\n  this.text = text;\n  this.hide();\n}\nRotateInstructions.prototype.show = function (parent) {\n  if (!parent && !this.overlay.parentElement) {\n    document.body.appendChild(this.overlay);\n  } else if (parent) {\n    if (this.overlay.parentElement && this.overlay.parentElement != parent) this.overlay.parentElement.removeChild(this.overlay);\n    parent.appendChild(this.overlay);\n  }\n  this.overlay.style.display = 'block';\n  var img = this.overlay.querySelector('img');\n  var s = img.style;\n  if (isLandscapeMode()) {\n    s.width = '20%';\n    s.marginLeft = '40%';\n    s.marginTop = '3%';\n  } else {\n    s.width = '50%';\n    s.marginLeft = '25%';\n    s.marginTop = '25%';\n  }\n};\nRotateInstructions.prototype.hide = function () {\n  this.overlay.style.display = 'none';\n};\nRotateInstructions.prototype.showTemporarily = function (ms, parent) {\n  this.show(parent);\n  this.timer = setTimeout(this.hide.bind(this), ms);\n};\nRotateInstructions.prototype.disableShowTemporarily = function () {\n  clearTimeout(this.timer);\n};\nRotateInstructions.prototype.update = function () {\n  this.disableShowTemporarily();\n  if (!isLandscapeMode() && isMobile()) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\nRotateInstructions.prototype.loadIcon_ = function () {\n  this.icon = dataUri('image/svg+xml', rotateInstructionsAsset);\n};\nvar DEFAULT_VIEWER = 'CardboardV1';\nvar VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';\nvar CLASS_NAME = 'webvr-polyfill-viewer-selector';\nfunction ViewerSelector(defaultViewer) {\n  try {\n    this.selectedKey = localStorage.getItem(VIEWER_KEY);\n  } catch (error) {\n    console.error('Failed to load viewer profile: %s', error);\n  }\n  if (!this.selectedKey) {\n    this.selectedKey = defaultViewer || DEFAULT_VIEWER;\n  }\n  this.dialog = this.createDialog_(DeviceInfo.Viewers);\n  this.root = null;\n  this.onChangeCallbacks_ = [];\n}\nViewerSelector.prototype.show = function (root) {\n  this.root = root;\n  root.appendChild(this.dialog);\n  var selected = this.dialog.querySelector('#' + this.selectedKey);\n  selected.checked = true;\n  this.dialog.style.display = 'block';\n};\nViewerSelector.prototype.hide = function () {\n  if (this.root && this.root.contains(this.dialog)) {\n    this.root.removeChild(this.dialog);\n  }\n  this.dialog.style.display = 'none';\n};\nViewerSelector.prototype.getCurrentViewer = function () {\n  return DeviceInfo.Viewers[this.selectedKey];\n};\nViewerSelector.prototype.getSelectedKey_ = function () {\n  var input = this.dialog.querySelector('input[name=field]:checked');\n  if (input) {\n    return input.id;\n  }\n  return null;\n};\nViewerSelector.prototype.onChange = function (cb) {\n  this.onChangeCallbacks_.push(cb);\n};\nViewerSelector.prototype.fireOnChange_ = function (viewer) {\n  for (var i = 0; i < this.onChangeCallbacks_.length; i++) {\n    this.onChangeCallbacks_[i](viewer);\n  }\n};\nViewerSelector.prototype.onSave_ = function () {\n  this.selectedKey = this.getSelectedKey_();\n  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {\n    console.error('ViewerSelector.onSave_: this should never happen!');\n    return;\n  }\n  this.fireOnChange_(DeviceInfo.Viewers[this.selectedKey]);\n  try {\n    localStorage.setItem(VIEWER_KEY, this.selectedKey);\n  } catch (error) {\n    console.error('Failed to save viewer profile: %s', error);\n  }\n  this.hide();\n};\nViewerSelector.prototype.createDialog_ = function (options) {\n  var container = document.createElement('div');\n  container.classList.add(CLASS_NAME);\n  container.style.display = 'none';\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.left = 0;\n  s.top = 0;\n  s.width = '100%';\n  s.height = '100%';\n  s.background = 'rgba(0, 0, 0, 0.3)';\n  overlay.addEventListener('click', this.hide.bind(this));\n  var width = 280;\n  var dialog = document.createElement('div');\n  var s = dialog.style;\n  s.boxSizing = 'border-box';\n  s.position = 'fixed';\n  s.top = '24px';\n  s.left = '50%';\n  s.marginLeft = -width / 2 + 'px';\n  s.width = width + 'px';\n  s.padding = '24px';\n  s.overflow = 'hidden';\n  s.background = '#fafafa';\n  s.fontFamily = \"'Roboto', sans-serif\";\n  s.boxShadow = '0px 5px 20px #666';\n  dialog.appendChild(this.createH1_('Select your viewer'));\n  for (var id in options) {\n    dialog.appendChild(this.createChoice_(id, options[id].label));\n  }\n  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));\n  container.appendChild(overlay);\n  container.appendChild(dialog);\n  return container;\n};\nViewerSelector.prototype.createH1_ = function (name) {\n  var h1 = document.createElement('h1');\n  var s = h1.style;\n  s.color = 'black';\n  s.fontSize = '20px';\n  s.fontWeight = 'bold';\n  s.marginTop = 0;\n  s.marginBottom = '24px';\n  h1.innerHTML = name;\n  return h1;\n};\nViewerSelector.prototype.createChoice_ = function (id, name) {\n  var div = document.createElement('div');\n  div.style.marginTop = '8px';\n  div.style.color = 'black';\n  var input = document.createElement('input');\n  input.style.fontSize = '30px';\n  input.setAttribute('id', id);\n  input.setAttribute('type', 'radio');\n  input.setAttribute('value', id);\n  input.setAttribute('name', 'field');\n  var label = document.createElement('label');\n  label.style.marginLeft = '4px';\n  label.setAttribute('for', id);\n  label.innerHTML = name;\n  div.appendChild(input);\n  div.appendChild(label);\n  return div;\n};\nViewerSelector.prototype.createButton_ = function (label, onclick) {\n  var button = document.createElement('button');\n  button.innerHTML = label;\n  var s = button.style;\n  s.float = 'right';\n  s.textTransform = 'uppercase';\n  s.color = '#1094f7';\n  s.fontSize = '14px';\n  s.letterSpacing = 0;\n  s.border = 0;\n  s.background = 'none';\n  s.marginTop = '16px';\n  button.addEventListener('click', onclick);\n  return button;\n};\nvar commonjsGlobal$$1 = typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : typeof self !== 'undefined' ? self : {};\nfunction unwrapExports$$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule$$1(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\nvar NoSleep = createCommonjsModule$$1(function (module, exports) {\n(function webpackUniversalModuleDefinition(root, factory) {\n\tmodule.exports = factory();\n})(commonjsGlobal$$1, function() {\nreturn          (function(modules) {\n         \tvar installedModules = {};\n         \tfunction __webpack_require__(moduleId) {\n         \t\tif(installedModules[moduleId]) {\n         \t\t\treturn installedModules[moduleId].exports;\n         \t\t}\n         \t\tvar module = installedModules[moduleId] = {\n         \t\t\ti: moduleId,\n         \t\t\tl: false,\n         \t\t\texports: {}\n         \t\t};\n         \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n         \t\tmodule.l = true;\n         \t\treturn module.exports;\n         \t}\n         \t__webpack_require__.m = modules;\n         \t__webpack_require__.c = installedModules;\n         \t__webpack_require__.d = function(exports, name, getter) {\n         \t\tif(!__webpack_require__.o(exports, name)) {\n         \t\t\tObject.defineProperty(exports, name, {\n         \t\t\t\tconfigurable: false,\n         \t\t\t\tenumerable: true,\n         \t\t\t\tget: getter\n         \t\t\t});\n         \t\t}\n         \t};\n         \t__webpack_require__.n = function(module) {\n         \t\tvar getter = module && module.__esModule ?\n         \t\t\tfunction getDefault() { return module['default']; } :\n         \t\t\tfunction getModuleExports() { return module; };\n         \t\t__webpack_require__.d(getter, 'a', getter);\n         \t\treturn getter;\n         \t};\n         \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n         \t__webpack_require__.p = \"\";\n         \treturn __webpack_require__(__webpack_require__.s = 0);\n         })\n         ([\n      (function(module, exports, __webpack_require__) {\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar mediaFile = __webpack_require__(1);\nvar oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\nvar NoSleep = function () {\n  function NoSleep() {\n    _classCallCheck(this, NoSleep);\n    if (oldIOS) {\n      this.noSleepTimer = null;\n    } else {\n      this.noSleepVideo = document.createElement('video');\n      this.noSleepVideo.setAttribute('playsinline', '');\n      this.noSleepVideo.setAttribute('src', mediaFile);\n      this.noSleepVideo.addEventListener('timeupdate', function (e) {\n        if (this.noSleepVideo.currentTime > 0.5) {\n          this.noSleepVideo.currentTime = Math.random();\n        }\n      }.bind(this));\n    }\n  }\n  _createClass(NoSleep, [{\n    key: 'enable',\n    value: function enable() {\n      if (oldIOS) {\n        this.disable();\n        this.noSleepTimer = window.setInterval(function () {\n          window.location.href = '/';\n          window.setTimeout(window.stop, 0);\n        }, 15000);\n      } else {\n        this.noSleepVideo.play();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      if (oldIOS) {\n        if (this.noSleepTimer) {\n          window.clearInterval(this.noSleepTimer);\n          this.noSleepTimer = null;\n        }\n      } else {\n        this.noSleepVideo.pause();\n      }\n    }\n  }]);\n  return NoSleep;\n}();\nmodule.exports = NoSleep;\n      }),\n      (function(module, exports, __webpack_require__) {\nmodule.exports = 'data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA=';\n      })\n         ]);\n});\n});\nvar NoSleep$1 = unwrapExports$$1(NoSleep);\nvar nextDisplayId = 1000;\nvar defaultLeftBounds = [0, 0, 0.5, 1];\nvar defaultRightBounds = [0.5, 0, 0.5, 1];\nvar raf = window.requestAnimationFrame;\nvar caf = window.cancelAnimationFrame;\nfunction VRFrameData() {\n  this.leftProjectionMatrix = new Float32Array(16);\n  this.leftViewMatrix = new Float32Array(16);\n  this.rightProjectionMatrix = new Float32Array(16);\n  this.rightViewMatrix = new Float32Array(16);\n  this.pose = null;\n}\nfunction VRDisplayCapabilities(config) {\n  Object.defineProperties(this, {\n    hasPosition: {\n      writable: false, enumerable: true, value: config.hasPosition\n    },\n    hasExternalDisplay: {\n      writable: false, enumerable: true, value: config.hasExternalDisplay\n    },\n    canPresent: {\n      writable: false, enumerable: true, value: config.canPresent\n    },\n    maxLayers: {\n      writable: false, enumerable: true, value: config.maxLayers\n    },\n    hasOrientation: {\n      enumerable: true, get: function get() {\n        deprecateWarning('VRDisplayCapabilities.prototype.hasOrientation', 'VRDisplay.prototype.getFrameData');\n        return config.hasOrientation;\n      }\n    }\n  });\n}\nfunction VRDisplay(config) {\n  config = config || {};\n  var USE_WAKELOCK = 'wakelock' in config ? config.wakelock : true;\n  this.isPolyfilled = true;\n  this.displayId = nextDisplayId++;\n  this.displayName = '';\n  this.depthNear = 0.01;\n  this.depthFar = 10000.0;\n  this.isPresenting = false;\n  Object.defineProperty(this, 'isConnected', {\n    get: function get() {\n      deprecateWarning('VRDisplay.prototype.isConnected', 'VRDisplayCapabilities.prototype.hasExternalDisplay');\n      return false;\n    }\n  });\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: false,\n    hasExternalDisplay: false,\n    canPresent: false,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.waitingForPresent_ = false;\n  this.layer_ = null;\n  this.originalParent_ = null;\n  this.fullscreenElement_ = null;\n  this.fullscreenWrapper_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n  if (USE_WAKELOCK && isMobile()) {\n    this.wakelock_ = new NoSleep$1();\n  }\n}\nVRDisplay.prototype.getFrameData = function (frameData) {\n  return frameDataFromPose(frameData, this._getPose(), this);\n};\nVRDisplay.prototype.getPose = function () {\n  deprecateWarning('VRDisplay.prototype.getPose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.resetPose = function () {\n  deprecateWarning('VRDisplay.prototype.resetPose');\n  return this._resetPose();\n};\nVRDisplay.prototype.getImmediatePose = function () {\n  deprecateWarning('VRDisplay.prototype.getImmediatePose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.requestAnimationFrame = function (callback) {\n  return raf(callback);\n};\nVRDisplay.prototype.cancelAnimationFrame = function (id) {\n  return caf(id);\n};\nVRDisplay.prototype.wrapForFullscreen = function (element) {\n  if (isIOS()) {\n    return element;\n  }\n  if (!this.fullscreenWrapper_) {\n    this.fullscreenWrapper_ = document.createElement('div');\n    var cssProperties = ['height: ' + Math.min(screen.height, screen.width) + 'px !important', 'top: 0 !important', 'left: 0 !important', 'right: 0 !important', 'border: 0', 'margin: 0', 'padding: 0', 'z-index: 999999 !important', 'position: fixed'];\n    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');\n    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');\n  }\n  if (this.fullscreenElement_ == element) {\n    return this.fullscreenWrapper_;\n  }\n  if (this.fullscreenElement_) {\n    if (this.originalParent_) {\n      this.originalParent_.appendChild(this.fullscreenElement_);\n    } else {\n      this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_);\n    }\n  }\n  this.fullscreenElement_ = element;\n  this.originalParent_ = element.parentElement;\n  if (!this.originalParent_) {\n    document.body.appendChild(element);\n  }\n  if (!this.fullscreenWrapper_.parentElement) {\n    var parent = this.fullscreenElement_.parentElement;\n    parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);\n    parent.removeChild(this.fullscreenElement_);\n  }\n  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);\n  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');\n  var self = this;\n  function applyFullscreenElementStyle() {\n    if (!self.fullscreenElement_) {\n      return;\n    }\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0', 'width: ' + Math.max(screen.width, screen.height) + 'px', 'height: ' + Math.min(screen.height, screen.width) + 'px', 'border: 0', 'margin: 0', 'padding: 0'];\n    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');\n  }\n  applyFullscreenElementStyle();\n  return this.fullscreenWrapper_;\n};\nVRDisplay.prototype.removeFullscreenWrapper = function () {\n  if (!this.fullscreenElement_) {\n    return;\n  }\n  var element = this.fullscreenElement_;\n  if (this.fullscreenElementCachedStyle_) {\n    element.setAttribute('style', this.fullscreenElementCachedStyle_);\n  } else {\n    element.removeAttribute('style');\n  }\n  this.fullscreenElement_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  var parent = this.fullscreenWrapper_.parentElement;\n  this.fullscreenWrapper_.removeChild(element);\n  if (this.originalParent_ === parent) {\n    parent.insertBefore(element, this.fullscreenWrapper_);\n  }\n  else if (this.originalParent_) {\n      this.originalParent_.appendChild(element);\n    }\n  parent.removeChild(this.fullscreenWrapper_);\n  return element;\n};\nVRDisplay.prototype.requestPresent = function (layers) {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  if (!(layers instanceof Array)) {\n    deprecateWarning('VRDisplay.prototype.requestPresent with non-array argument', 'an array of VRLayers as the first argument');\n    layers = [layers];\n  }\n  return new Promise(function (resolve, reject) {\n    if (!self.capabilities.canPresent) {\n      reject(new Error('VRDisplay is not capable of presenting.'));\n      return;\n    }\n    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {\n      reject(new Error('Invalid number of layers.'));\n      return;\n    }\n    var incomingLayer = layers[0];\n    if (!incomingLayer.source) {\n      resolve();\n      return;\n    }\n    var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;\n    var rightBounds = incomingLayer.rightBounds || defaultRightBounds;\n    if (wasPresenting) {\n      var layer = self.layer_;\n      if (layer.source !== incomingLayer.source) {\n        layer.source = incomingLayer.source;\n      }\n      for (var i = 0; i < 4; i++) {\n        layer.leftBounds[i] = leftBounds[i];\n        layer.rightBounds[i] = rightBounds[i];\n      }\n      self.wrapForFullscreen(self.layer_.source);\n      self.updatePresent_();\n      resolve();\n      return;\n    }\n    self.layer_ = {\n      predistorted: incomingLayer.predistorted,\n      source: incomingLayer.source,\n      leftBounds: leftBounds.slice(0),\n      rightBounds: rightBounds.slice(0)\n    };\n    self.waitingForPresent_ = false;\n    if (self.layer_ && self.layer_.source) {\n      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);\n      var onFullscreenChange = function onFullscreenChange() {\n        var actualFullscreenElement = getFullscreenElement();\n        self.isPresenting = fullscreenElement === actualFullscreenElement;\n        if (self.isPresenting) {\n          if (screen.orientation && screen.orientation.lock) {\n            screen.orientation.lock('landscape-primary').catch(function (error) {\n              console.error('screen.orientation.lock() failed due to', error.message);\n            });\n          }\n          self.waitingForPresent_ = false;\n          self.beginPresent_();\n          resolve();\n        } else {\n          if (screen.orientation && screen.orientation.unlock) {\n            screen.orientation.unlock();\n          }\n          self.removeFullscreenWrapper();\n          self.disableWakeLock();\n          self.endPresent_();\n          self.removeFullscreenListeners_();\n        }\n        self.fireVRDisplayPresentChange_();\n      };\n      var onFullscreenError = function onFullscreenError() {\n        if (!self.waitingForPresent_) {\n          return;\n        }\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.disableWakeLock();\n        self.waitingForPresent_ = false;\n        self.isPresenting = false;\n        reject(new Error('Unable to present.'));\n      };\n      self.addFullscreenListeners_(fullscreenElement, onFullscreenChange, onFullscreenError);\n      if (requestFullscreen(fullscreenElement)) {\n        self.enableWakeLock();\n        self.waitingForPresent_ = true;\n      } else if (isIOS() || isWebViewAndroid()) {\n        self.enableWakeLock();\n        self.isPresenting = true;\n        self.beginPresent_();\n        self.fireVRDisplayPresentChange_();\n        resolve();\n      }\n    }\n    if (!self.waitingForPresent_ && !isIOS()) {\n      exitFullscreen();\n      reject(new Error('Unable to present.'));\n    }\n  });\n};\nVRDisplay.prototype.exitPresent = function () {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  this.isPresenting = false;\n  this.layer_ = null;\n  this.disableWakeLock();\n  return new Promise(function (resolve, reject) {\n    if (wasPresenting) {\n      if (!exitFullscreen() && isIOS()) {\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      if (isWebViewAndroid()) {\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      resolve();\n    } else {\n      reject(new Error('Was not presenting to VRDisplay.'));\n    }\n  });\n};\nVRDisplay.prototype.getLayers = function () {\n  if (this.layer_) {\n    return [this.layer_];\n  }\n  return [];\n};\nVRDisplay.prototype.fireVRDisplayPresentChange_ = function () {\n  var event = new CustomEvent('vrdisplaypresentchange', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.fireVRDisplayConnect_ = function () {\n  var event = new CustomEvent('vrdisplayconnect', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.addFullscreenListeners_ = function (element, changeHandler, errorHandler) {\n  this.removeFullscreenListeners_();\n  this.fullscreenEventTarget_ = element;\n  this.fullscreenChangeHandler_ = changeHandler;\n  this.fullscreenErrorHandler_ = errorHandler;\n  if (changeHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenchange', changeHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenchange', changeHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', changeHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenchange', changeHandler, false);\n    }\n  }\n  if (errorHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenerror', errorHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenerror', errorHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenerror', errorHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenerror', errorHandler, false);\n    }\n  }\n};\nVRDisplay.prototype.removeFullscreenListeners_ = function () {\n  if (!this.fullscreenEventTarget_) return;\n  var element = this.fullscreenEventTarget_;\n  if (this.fullscreenChangeHandler_) {\n    var changeHandler = this.fullscreenChangeHandler_;\n    element.removeEventListener('fullscreenchange', changeHandler, false);\n    element.removeEventListener('webkitfullscreenchange', changeHandler, false);\n    document.removeEventListener('mozfullscreenchange', changeHandler, false);\n    element.removeEventListener('msfullscreenchange', changeHandler, false);\n  }\n  if (this.fullscreenErrorHandler_) {\n    var errorHandler = this.fullscreenErrorHandler_;\n    element.removeEventListener('fullscreenerror', errorHandler, false);\n    element.removeEventListener('webkitfullscreenerror', errorHandler, false);\n    document.removeEventListener('mozfullscreenerror', errorHandler, false);\n    element.removeEventListener('msfullscreenerror', errorHandler, false);\n  }\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n};\nVRDisplay.prototype.enableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.enable();\n  }\n};\nVRDisplay.prototype.disableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.disable();\n  }\n};\nVRDisplay.prototype.beginPresent_ = function () {\n};\nVRDisplay.prototype.endPresent_ = function () {\n};\nVRDisplay.prototype.submitFrame = function (pose) {\n};\nVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  return null;\n};\nvar config = {\n  ADDITIONAL_VIEWERS: [],\n  DEFAULT_VIEWER: '',\n  MOBILE_WAKE_LOCK: true,\n  DEBUG: false,\n  DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n  K_FILTER: 0.98,\n  PREDICTION_TIME_S: 0.040,\n  CARDBOARD_UI_DISABLED: false,\n  ROTATE_INSTRUCTIONS_DISABLED: false,\n  YAW_ONLY: false,\n  BUFFER_SCALE: 0.5,\n  DIRTY_SUBMIT_FRAME_BINDINGS: false\n};\nvar Eye = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\nfunction CardboardVRDisplay(config$$1) {\n  var defaults = extend({}, config);\n  config$$1 = extend(defaults, config$$1 || {});\n  VRDisplay.call(this, {\n    wakelock: config$$1.MOBILE_WAKE_LOCK\n  });\n  this.config = config$$1;\n  this.displayName = 'Cardboard VRDisplay';\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: true,\n    hasExternalDisplay: false,\n    canPresent: true,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.bufferScale_ = this.config.BUFFER_SCALE;\n  this.poseSensor_ = new PoseSensor(this.config);\n  this.distorter_ = null;\n  this.cardboardUI_ = null;\n  this.dpdb_ = new Dpdb(this.config.DPDB_URL, this.onDeviceParamsUpdated_.bind(this));\n  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams(), config$$1.ADDITIONAL_VIEWERS);\n  this.viewerSelector_ = new ViewerSelector(config$$1.DEFAULT_VIEWER);\n  this.viewerSelector_.onChange(this.onViewerChanged_.bind(this));\n  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());\n  if (!this.config.ROTATE_INSTRUCTIONS_DISABLED) {\n    this.rotateInstructions_ = new RotateInstructions();\n  }\n  if (isIOS()) {\n    window.addEventListener('resize', this.onResize_.bind(this));\n  }\n}\nCardboardVRDisplay.prototype = Object.create(VRDisplay.prototype);\nCardboardVRDisplay.prototype._getPose = function () {\n  return {\n    position: null,\n    orientation: this.poseSensor_.getOrientation(),\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\nCardboardVRDisplay.prototype._resetPose = function () {\n  if (this.poseSensor_.resetPose) {\n    this.poseSensor_.resetPose();\n  }\n};\nCardboardVRDisplay.prototype._getFieldOfView = function (whichEye) {\n  var fieldOfView;\n  if (whichEye == Eye.LEFT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();\n  } else if (whichEye == Eye.RIGHT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return fieldOfView;\n};\nCardboardVRDisplay.prototype._getEyeOffset = function (whichEye) {\n  var offset;\n  if (whichEye == Eye.LEFT) {\n    offset = [-this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else if (whichEye == Eye.RIGHT) {\n    offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return offset;\n};\nCardboardVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  var offset = this._getEyeOffset(whichEye);\n  var fieldOfView = this._getFieldOfView(whichEye);\n  var eyeParams = {\n    offset: offset,\n    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,\n    renderHeight: this.deviceInfo_.device.height * this.bufferScale_\n  };\n  Object.defineProperty(eyeParams, 'fieldOfView', {\n    enumerable: true,\n    get: function get() {\n      deprecateWarning('VRFieldOfView', 'VRFrameData\\'s projection matrices');\n      return fieldOfView;\n    }\n  });\n  return eyeParams;\n};\nCardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function (newParams) {\n  if (this.config.DEBUG) {\n    console.log('DPDB reported that device params were updated.');\n  }\n  this.deviceInfo_.updateDeviceParams(newParams);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n};\nCardboardVRDisplay.prototype.updateBounds_ = function () {\n  if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {\n    this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);\n  }\n};\nCardboardVRDisplay.prototype.beginPresent_ = function () {\n  var gl = this.layer_.source.getContext('webgl');\n  if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n  if (!gl) gl = this.layer_.source.getContext('webgl2');\n  if (!gl) return;\n  if (this.layer_.predistorted) {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      gl.canvas.width = getScreenWidth() * this.bufferScale_;\n      gl.canvas.height = getScreenHeight() * this.bufferScale_;\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n  } else {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n    this.distorter_ = new CardboardDistorter(gl, this.cardboardUI_, this.config.BUFFER_SCALE, this.config.DIRTY_SUBMIT_FRAME_BINDINGS);\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.listen(function (e) {\n      this.viewerSelector_.show(this.layer_.source.parentElement);\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this), function (e) {\n      this.exitPresent();\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this));\n  }\n  if (this.rotateInstructions_) {\n    if (isLandscapeMode() && isMobile()) {\n      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);\n    } else {\n      this.rotateInstructions_.update();\n    }\n  }\n  this.orientationHandler = this.onOrientationChange_.bind(this);\n  window.addEventListener('orientationchange', this.orientationHandler);\n  this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);\n  window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.endPresent_ = function () {\n  if (this.distorter_) {\n    this.distorter_.destroy();\n    this.distorter_ = null;\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.destroy();\n    this.cardboardUI_ = null;\n  }\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.hide();\n  }\n  this.viewerSelector_.hide();\n  window.removeEventListener('orientationchange', this.orientationHandler);\n  window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n};\nCardboardVRDisplay.prototype.updatePresent_ = function () {\n  this.endPresent_();\n  this.beginPresent_();\n};\nCardboardVRDisplay.prototype.submitFrame = function (pose) {\n  if (this.distorter_) {\n    this.updateBounds_();\n    this.distorter_.submitFrame();\n  } else if (this.cardboardUI_ && this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var canvas = gl.canvas;\n    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {\n      this.cardboardUI_.onResize();\n    }\n    this.lastWidth = canvas.width;\n    this.lastHeight = canvas.height;\n    this.cardboardUI_.render();\n  }\n};\nCardboardVRDisplay.prototype.onOrientationChange_ = function (e) {\n  this.viewerSelector_.hide();\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.update();\n  }\n  this.onResize_();\n};\nCardboardVRDisplay.prototype.onResize_ = function (e) {\n  if (this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0',\n    'width: 100vw', 'height: 100vh', 'border: 0', 'margin: 0',\n    'padding: 0px', 'box-sizing: content-box'];\n    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');\n    safariCssSizeWorkaround(gl.canvas);\n  }\n};\nCardboardVRDisplay.prototype.onViewerChanged_ = function (viewer) {\n  this.deviceInfo_.setViewer(viewer);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function () {\n  var event = new CustomEvent('vrdisplaydeviceparamschange', {\n    detail: {\n      vrdisplay: this,\n      deviceInfo: this.deviceInfo_\n    }\n  });\n  window.dispatchEvent(event);\n};\nCardboardVRDisplay.VRFrameData = VRFrameData;\nCardboardVRDisplay.VRDisplay = VRDisplay;\nreturn CardboardVRDisplay;\n})));\n});\nvar CardboardVRDisplay = unwrapExports(cardboardVrDisplay);\n\nclass XRDevice extends EventTarget {\n  constructor(global) {\n    super();\n    this.global = global;\n    this.onWindowResize = this.onWindowResize.bind(this);\n    this.global.window.addEventListener('resize', this.onWindowResize);\n    this.environmentBlendMode = 'opaque';\n  }\n  onBaseLayerSet(sessionId, layer) { throw new Error('Not implemented'); }\n  isSessionSupported(mode) { throw new Error('Not implemented'); }\n  isFeatureSupported(featureDescriptor) { throw new Error('Not implemented'); }\n  async requestSession(mode, enabledFeatures) { throw new Error('Not implemented'); }\n  requestAnimationFrame(callback) { throw new Error('Not implemented'); }\n  onFrameStart(sessionId) { throw new Error('Not implemented'); }\n  onFrameEnd(sessionId) { throw new Error('Not implemented'); }\n  doesSessionSupportReferenceSpace(sessionId, type) { throw new Error('Not implemented'); }\n  requestStageBounds() { throw new Error('Not implemented'); }\n  async requestFrameOfReferenceTransform(type, options) {\n    return undefined;\n  }\n  cancelAnimationFrame(handle) { throw new Error('Not implemented'); }\n  endSession(sessionId) { throw new Error('Not implemented'); }\n  getViewport(sessionId, eye, layer, target) { throw new Error('Not implemented'); }\n  getProjectionMatrix(eye) { throw new Error('Not implemented'); }\n  getBasePoseMatrix() { throw new Error('Not implemented'); }\n  getBaseViewMatrix(eye) { throw new Error('Not implemented'); }\n  getInputSources() { throw new Error('Not implemented'); }\n  getInputPose(inputSource, coordinateSystem, poseType) { throw new Error('Not implemented'); }\n  onWindowResize() {\n    this.onWindowResize();\n  }\n}\n\nlet daydream = {\n  mapping: '',\n  profiles: ['google-daydream', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: null,\n    1: null,\n    2: 0\n  },\n};\nlet viveFocus = {\n  mapping: 'xr-standard',\n  profiles: ['htc-vive-focus', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n};\nlet oculusGo = {\n  mapping: 'xr-standard',\n  profiles: ['oculus-go', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n  gripTransform: {\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet oculusTouch = {\n  mapping: 'xr-standard',\n  displayProfiles: {\n    'Oculus Quest': ['oculus-touch-v2', 'oculus-touch', 'generic-trigger-squeeze-thumbstick']\n  },\n  profiles: ['oculus-touch', 'generic-trigger-squeeze-thumbstick'],\n  axes: {\n    length: 4,\n    0: null,\n    1: null,\n    2: 0,\n    3: 1\n  },\n  buttons: {\n    length: 7,\n    0: 1,\n    1: 2,\n    2: null,\n    3: 0,\n    4: 3,\n    5: 4,\n    6: null\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet openVr = {\n  mapping: 'xr-standard',\n  profiles: ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n  displayProfiles: {\n    'HTC Vive': ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n    'HTC Vive DVT': ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n    'Valve Index': ['valve-index', 'generic-trigger-squeeze-touchpad-thumbstick']\n  },\n  buttons: {\n    length: 3,\n    0: 1,\n    1: 2,\n    2: 0\n  },\n  gripTransform: {\n    position: [0, 0, 0.05, 1],\n  },\n  targetRayTransform: {\n    orientation: [Math.PI * -0.08, 0, 0, 1]\n  },\n  userAgentOverrides: {\n    \"Firefox\": {\n      axes: {\n        invert: [1, 3]\n      }\n    }\n  }\n};\nlet samsungGearVR = {\n  mapping: 'xr-standard',\n  profiles: ['samsung-gearvr', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n  gripTransform: {\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet samsungOdyssey = {\n  mapping: 'xr-standard',\n  profiles: ['samsung-odyssey', 'microsoft-mixed-reality', 'generic-trigger-squeeze-touchpad-thumbstick'],\n  buttons: {\n    length: 4,\n    0: 1,\n    1: 0,\n    2: 2,\n    3: 4,\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet windowsMixedReality = {\n  mapping: 'xr-standard',\n  profiles: ['microsoft-mixed-reality', 'generic-trigger-squeeze-touchpad-thumbstick'],\n  buttons: {\n    length: 4,\n    0: 1,\n    1: 0,\n    2: 2,\n    3: 4,\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet GamepadMappings = {\n  'Daydream Controller': daydream,\n  'Gear VR Controller': samsungGearVR,\n  'HTC Vive Focus Controller': viveFocus,\n  'Oculus Go Controller': oculusGo,\n  'Oculus Touch (Right)': oculusTouch,\n  'Oculus Touch (Left)': oculusTouch,\n  'OpenVR Gamepad': openVr,\n  'Spatial Controller (Spatial Interaction Source) 045E-065A': windowsMixedReality,\n  'Spatial Controller (Spatial Interaction Source) 045E-065D': samsungOdyssey,\n  'Windows Mixed Reality (Right)': windowsMixedReality,\n  'Windows Mixed Reality (Left)': windowsMixedReality,\n};\n\nconst HEAD_ELBOW_OFFSET_RIGHTHANDED = fromValues$1(0.155, -0.465, -0.15);\nconst HEAD_ELBOW_OFFSET_LEFTHANDED = fromValues$1(-0.155, -0.465, -0.15);\nconst ELBOW_WRIST_OFFSET = fromValues$1(0, 0, -0.25);\nconst WRIST_CONTROLLER_OFFSET = fromValues$1(0, 0, 0.05);\nconst ARM_EXTENSION_OFFSET = fromValues$1(-0.08, 0.14, 0.08);\nconst ELBOW_BEND_RATIO = 0.4;\nconst EXTENSION_RATIO_WEIGHT = 0.4;\nconst MIN_ANGULAR_SPEED = 0.61;\nconst MIN_ANGLE_DELTA = 0.175;\nconst MIN_EXTENSION_COS = 0.12;\nconst MAX_EXTENSION_COS = 0.87;\nconst RAD_TO_DEG = 180 / Math.PI;\nfunction eulerFromQuaternion(out, q, order) {\n  function clamp(value, min$$1, max$$1) {\n    return (value < min$$1 ? min$$1 : (value > max$$1 ? max$$1 : value));\n  }\n  var sqx = q[0] * q[0];\n  var sqy = q[1] * q[1];\n  var sqz = q[2] * q[2];\n  var sqw = q[3] * q[3];\n  if ( order === 'XYZ' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[1] * q[2] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[0] * q[2] + q[1] * q[3] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order ===  'YXZ' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] - q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZXY' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] + q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[2] * q[0] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZYX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[2] * q[1] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[1] * q[3] - q[0] * q[2] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order === 'YZX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[2] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[0] * q[2] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[0] * q[1] + q[2] * q[3] ), -1, 1 ) );\n  } else if ( order === 'XZY' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[1] * q[2] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[2] * q[3] - q[0] * q[1] ), -1, 1 ) );\n  } else {\n    console.log('No order given for quaternion to euler conversion.');\n    return;\n  }\n}\nclass OrientationArmModel {\n  constructor() {\n    this.hand = 'right';\n    this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n    this.controllerQ = create$4();\n    this.lastControllerQ = create$4();\n    this.headQ = create$4();\n    this.headPos = create$1();\n    this.elbowPos = create$1();\n    this.wristPos = create$1();\n    this.time = null;\n    this.lastTime = null;\n    this.rootQ = create$4();\n    this.position = create$1();\n  }\n  setHandedness(hand) {\n    if (this.hand != hand) {\n      this.hand = hand;\n      if (this.hand == 'left') {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_LEFTHANDED;\n      } else {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n      }\n    }\n  }\n  update(controllerOrientation, headPoseMatrix) {\n    this.time = now$1();\n    if (controllerOrientation) {\n      copy$4(this.lastControllerQ, this.controllerQ);\n      copy$4(this.controllerQ, controllerOrientation);\n    }\n    if (headPoseMatrix) {\n      getTranslation(this.headPos, headPoseMatrix);\n      getRotation(this.headQ, headPoseMatrix);\n    }\n    let headYawQ = this.getHeadYawOrientation_();\n    let angleDelta = this.quatAngle_(this.lastControllerQ, this.controllerQ);\n    let timeDelta = (this.time - this.lastTime) / 1000;\n    let controllerAngularSpeed = angleDelta / timeDelta;\n    if (controllerAngularSpeed > MIN_ANGULAR_SPEED) {\n      slerp(this.rootQ, this.rootQ, headYawQ,\n                 Math.min(angleDelta / MIN_ANGLE_DELTA, 1.0));\n    } else {\n      copy$4(this.rootQ, headYawQ);\n    }\n    let controllerForward = fromValues$1(0, 0, -1.0);\n    transformQuat(controllerForward, controllerForward, this.controllerQ);\n    let controllerDotY = dot(controllerForward, [0, 1, 0]);\n    let extensionRatio = this.clamp_(\n        (controllerDotY - MIN_EXTENSION_COS) / MAX_EXTENSION_COS, 0.0, 1.0);\n    let controllerCameraQ = clone$4(this.rootQ);\n    invert$2(controllerCameraQ, controllerCameraQ);\n    multiply$4(controllerCameraQ, controllerCameraQ, this.controllerQ);\n    let elbowPos = this.elbowPos;\n    copy$1(elbowPos, this.headPos);\n    add$1(elbowPos, elbowPos, this.headElbowOffset);\n    let elbowOffset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(elbowOffset, elbowOffset, extensionRatio);\n    add$1(elbowPos, elbowPos, elbowOffset);\n    let totalAngle = this.quatAngle_(controllerCameraQ, create$4());\n    let totalAngleDeg = totalAngle * RAD_TO_DEG;\n    let lerpSuppression = 1 - Math.pow(totalAngleDeg / 180, 4);let elbowRatio = ELBOW_BEND_RATIO;\n    let wristRatio = 1 - ELBOW_BEND_RATIO;\n    let lerpValue = lerpSuppression *\n        (elbowRatio + wristRatio * extensionRatio * EXTENSION_RATIO_WEIGHT);\n    let wristQ = create$4();\n    slerp(wristQ, wristQ, controllerCameraQ, lerpValue);\n    let invWristQ = invert$2(create$4(), wristQ);\n    let elbowQ = clone$4(controllerCameraQ);\n    multiply$4(elbowQ, elbowQ, invWristQ);\n    let wristPos = this.wristPos;\n    copy$1(wristPos, WRIST_CONTROLLER_OFFSET);\n    transformQuat(wristPos, wristPos, wristQ);\n    add$1(wristPos, wristPos, ELBOW_WRIST_OFFSET);\n    transformQuat(wristPos, wristPos, elbowQ);\n    add$1(wristPos, wristPos, elbowPos);\n    let offset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(offset, offset, extensionRatio);\n    add$1(this.position, this.wristPos, offset);\n    transformQuat(this.position, this.position, this.rootQ);\n    this.lastTime = this.time;\n  }\n  getPosition() {\n    return this.position;\n  }\n  getHeadYawOrientation_() {\n    let headEuler = create$1();\n    eulerFromQuaternion(headEuler, this.headQ, 'YXZ');\n    let destinationQ = fromEuler(create$4(), 0, headEuler[1] * RAD_TO_DEG, 0);\n    return destinationQ;\n  }\n  clamp_(value, min$$1, max$$1) {\n    return Math.min(Math.max(value, min$$1), max$$1);\n  }\n  quatAngle_(q1, q2) {\n    let vec1 = [0, 0, -1];\n    let vec2 = [0, 0, -1];\n    transformQuat(vec1, vec1, q1);\n    transformQuat(vec2, vec2, q2);\n    return angle(vec1, vec2);\n  }\n}\n\nconst PRIVATE$18 = Symbol('@@webxr-polyfill/XRRemappedGamepad');\nconst PLACEHOLDER_BUTTON = { pressed: false, touched: false, value: 0.0 };\nObject.freeze(PLACEHOLDER_BUTTON);\nclass XRRemappedGamepad {\n  constructor(gamepad, display, map) {\n    if (!map) {\n      map = {};\n    }\n    if (map.userAgentOverrides) {\n      for (let agent in map.userAgentOverrides) {\n        if (navigator.userAgent.includes(agent)) {\n          let override = map.userAgentOverrides[agent];\n          for (let key in override) {\n            if (key in map) {\n              Object.assign(map[key], override[key]);\n            } else {\n              map[key] = override[key];\n            }\n          }\n          break;\n        }\n      }\n    }\n    let axes = new Array(map.axes && map.axes.length ? map.axes.length : gamepad.axes.length);\n    let buttons = new Array(map.buttons && map.buttons.length ? map.buttons.length : gamepad.buttons.length);\n    let gripTransform = null;\n    if (map.gripTransform) {\n      let orientation = map.gripTransform.orientation || [0, 0, 0, 1];\n      gripTransform = create();\n      fromRotationTranslation(\n        gripTransform,\n        normalize$2(orientation, orientation),\n        map.gripTransform.position || [0, 0, 0]\n      );\n    }\n    let targetRayTransform = null;\n    if (map.targetRayTransform) {\n      let orientation =  map.targetRayTransform.orientation || [0, 0, 0, 1];\n      targetRayTransform = create();\n      fromRotationTranslation(\n        targetRayTransform,\n        normalize$2(orientation, orientation),\n        map.targetRayTransform.position || [0, 0, 0]\n      );\n    }\n    let profiles = map.profiles;\n    if (map.displayProfiles) {\n      if (display.displayName in map.displayProfiles) {\n        profiles = map.displayProfiles[display.displayName];\n      }\n    }\n    this[PRIVATE$18] = {\n      gamepad,\n      map,\n      profiles: profiles || [gamepad.id],\n      mapping: map.mapping || gamepad.mapping,\n      axes,\n      buttons,\n      gripTransform,\n      targetRayTransform,\n    };\n    this._update();\n  }\n  _update() {\n    let gamepad = this[PRIVATE$18].gamepad;\n    let map = this[PRIVATE$18].map;\n    let axes = this[PRIVATE$18].axes;\n    for (let i = 0; i < axes.length; ++i) {\n      if (map.axes && i in map.axes) {\n        if (map.axes[i] === null) {\n          axes[i] = 0;\n        } else {\n          axes[i] = gamepad.axes[map.axes[i]];\n        }\n      } else {\n        axes[i] = gamepad.axes[i];\n      }\n    }\n    if (map.axes && map.axes.invert) {\n      for (let axis of map.axes.invert) {\n        if (axis < axes.length) {\n          axes[axis] *= -1;\n        }\n      }\n    }\n    let buttons = this[PRIVATE$18].buttons;\n    for (let i = 0; i < buttons.length; ++i) {\n      if (map.buttons && i in map.buttons) {\n        if (map.buttons[i] === null) {\n          buttons[i] = PLACEHOLDER_BUTTON;\n        } else {\n          buttons[i] = gamepad.buttons[map.buttons[i]];\n        }\n      } else {\n        buttons[i] = gamepad.buttons[i];\n      }\n    }\n  }\n  get id() {\n    return '';\n  }\n  get _profiles() {\n    return this[PRIVATE$18].profiles;\n  }\n  get index() {\n    return -1;\n  }\n  get connected() {\n    return this[PRIVATE$18].gamepad.connected;\n  }\n  get timestamp() {\n    return this[PRIVATE$18].gamepad.timestamp;\n  }\n  get mapping() {\n    return this[PRIVATE$18].mapping;\n  }\n  get axes() {\n    return this[PRIVATE$18].axes;\n  }\n  get buttons() {\n    return this[PRIVATE$18].buttons;\n  }\n  get hapticActuators() {\n    return this[PRIVATE$18].gamepad.hapticActuators;\n  }\n}\nclass GamepadXRInputSource {\n  constructor(polyfill, display, primaryButtonIndex = 0, primarySqueezeButtonIndex = -1) {\n    this.polyfill = polyfill;\n    this.display = display;\n    this.nativeGamepad = null;\n    this.gamepad = null;\n    this.inputSource = new XRInputSource(this);\n    this.lastPosition = create$1();\n    this.emulatedPosition = false;\n    this.basePoseMatrix = create();\n    this.outputMatrix = create();\n    this.primaryButtonIndex = primaryButtonIndex;\n    this.primaryActionPressed = false;\n    this.primarySqueezeButtonIndex = primarySqueezeButtonIndex;\n    this.primarySqueezeActionPressed = false;\n    this.handedness = '';\n    this.targetRayMode = 'gaze';\n    this.armModel = null;\n  }\n  get profiles() {\n    return this.gamepad ? this.gamepad._profiles : [];\n  }\n  updateFromGamepad(gamepad) {\n    if (this.nativeGamepad !== gamepad) {\n      this.nativeGamepad = gamepad;\n      if (gamepad) {\n        this.gamepad = new XRRemappedGamepad(gamepad, this.display, GamepadMappings[gamepad.id]);\n      } else {\n        this.gamepad = null;\n      }\n    }\n    this.handedness = gamepad.hand === '' ? 'none' : gamepad.hand;\n    if (this.gamepad) {\n      this.gamepad._update();\n    }\n    if (gamepad.pose) {\n      this.targetRayMode = 'tracked-pointer';\n      this.emulatedPosition = !gamepad.pose.hasPosition;\n    } else if (gamepad.hand === '') {\n      this.targetRayMode = 'gaze';\n      this.emulatedPosition = false;\n    }\n  }\n  updateBasePoseMatrix() {\n    if (this.nativeGamepad && this.nativeGamepad.pose) {\n      let pose = this.nativeGamepad.pose;\n      let position = pose.position;\n      let orientation = pose.orientation;\n      if (!position && !orientation) {\n        return;\n      }\n      if (!position) {\n        if (!pose.hasPosition) {\n          if (!this.armModel) {\n            this.armModel = new OrientationArmModel();\n          }\n          this.armModel.setHandedness(this.nativeGamepad.hand);\n          this.armModel.update(orientation, this.polyfill.getBasePoseMatrix());\n          position = this.armModel.getPosition();\n        } else {\n          position = this.lastPosition;\n        }\n      } else {\n        this.lastPosition[0] = position[0];\n        this.lastPosition[1] = position[1];\n        this.lastPosition[2] = position[2];\n      }\n      fromRotationTranslation(this.basePoseMatrix, orientation, position);\n    } else {\n      copy(this.basePoseMatrix, this.polyfill.getBasePoseMatrix());\n    }\n    return this.basePoseMatrix;\n  }\n  getXRPose(coordinateSystem, poseType) {\n    this.updateBasePoseMatrix();\n    switch(poseType) {\n      case \"target-ray\":\n        coordinateSystem._transformBasePoseMatrix(this.outputMatrix, this.basePoseMatrix);\n        if (this.gamepad && this.gamepad[PRIVATE$18].targetRayTransform) {\n          multiply(this.outputMatrix, this.outputMatrix, this.gamepad[PRIVATE$18].targetRayTransform);\n        }\n        break;\n      case \"grip\":\n        if (!this.nativeGamepad || !this.nativeGamepad.pose) {\n          return null;\n        }\n        coordinateSystem._transformBasePoseMatrix(this.outputMatrix, this.basePoseMatrix);\n        if (this.gamepad && this.gamepad[PRIVATE$18].gripTransform) {\n          multiply(this.outputMatrix, this.outputMatrix, this.gamepad[PRIVATE$18].gripTransform);\n        }\n        break;\n      default:\n        return null;\n    }\n    coordinateSystem._adjustForOriginOffset(this.outputMatrix);\n    return new XRPose(new XRRigidTransform(this.outputMatrix), this.emulatedPosition);\n  }\n}\n\nconst TEST_ENV = \"production\" === 'test';\nconst EXTRA_PRESENTATION_ATTRIBUTES = {\n  highRefreshRate: true,\n};\nconst PRIMARY_BUTTON_MAP = {\n  oculus: 1,\n  openvr: 1,\n  'spatial controller (spatial interaction source)': 1\n};\nlet SESSION_ID = 0;\nclass Session {\n  constructor(mode, enabledFeatures, polyfillOptions={}) {\n    this.mode = mode;\n    this.enabledFeatures = enabledFeatures;\n    this.outputContext = null;\n    this.immersive = mode == 'immersive-vr' || mode == 'immersive-ar';\n    this.ended = null;\n    this.baseLayer = null;\n    this.id = ++SESSION_ID;\n    this.modifiedCanvasLayer = false;\n    if (this.outputContext && !TEST_ENV) {\n      const renderContextType = polyfillOptions.renderContextType || '2d';\n      this.renderContext = this.outputContext.canvas.getContext(renderContextType);\n    }\n  }\n}\nclass WebVRDevice extends XRDevice {\n  constructor(global, display) {\n    const { canPresent } = display.capabilities;\n    super(global);\n    this.display = display;\n    this.frame = new global.VRFrameData();\n    this.sessions = new Map();\n    this.immersiveSession = null;\n    this.canPresent = canPresent;\n    this.baseModelMatrix = create();\n    this.gamepadInputSources = {};\n    this.tempVec3 = new Float32Array(3);\n    this.onVRDisplayPresentChange = this.onVRDisplayPresentChange.bind(this);\n    global.window.addEventListener('vrdisplaypresentchange', this.onVRDisplayPresentChange);\n    this.CAN_USE_GAMEPAD = global.navigator && ('getGamepads' in global.navigator);\n    this.HAS_BITMAP_SUPPORT = isImageBitmapSupported(global);\n  }\n  get depthNear() { return this.display.depthNear; }\n  set depthNear(val) { this.display.depthNear = val; }\n  get depthFar() { return this.display.depthFar; }\n  set depthFar(val) { this.display.depthFar = val; }\n  onBaseLayerSet(sessionId, layer) {\n    const session = this.sessions.get(sessionId);\n    const canvas = layer.context.canvas;\n    if (session.immersive) {\n      const left = this.display.getEyeParameters('left');\n      const right = this.display.getEyeParameters('right');\n      canvas.width = Math.max(left.renderWidth, right.renderWidth) * 2;\n      canvas.height = Math.max(left.renderHeight, right.renderHeight);\n      this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES\n        }]).then(() => {\n        if (!TEST_ENV && !this.global.document.body.contains(canvas)) {\n          session.modifiedCanvasLayer = true;\n          this.global.document.body.appendChild(canvas);\n          applyCanvasStylesForMinimalRendering(canvas);\n        }\n        session.baseLayer = layer;\n      });\n    }\n    else {\n      session.baseLayer = layer;\n    }\n  }\n  isSessionSupported(mode) {\n    if (mode == 'immersive-ar') {\n      return false;\n    }\n    if (mode == 'immersive-vr' && this.canPresent === false) {\n      return false;\n    }\n    return true;\n  }\n  isFeatureSupported(featureDescriptor) {\n    switch(featureDescriptor) {\n      case 'viewer': return true;\n      case 'local': return true;\n      case 'local-floor': return true;\n      case 'bounded': return false;\n      case 'unbounded': return false;\n      default: return false;\n    }\n  }\n  async requestSession(mode, enabledFeatures) {\n    if (!this.isSessionSupported(mode)) {\n      return Promise.reject();\n    }\n    let immersive = mode == 'immersive-vr';\n    if (immersive) {\n      const canvas = this.global.document.createElement('canvas');\n      if (!TEST_ENV) {\n        const ctx = canvas.getContext('webgl');\n      }\n      await this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES }]);\n    }\n    const session = new Session(mode, enabledFeatures, {\n      renderContextType: this.HAS_BITMAP_SUPPORT ? 'bitmaprenderer' : '2d'\n    });\n    this.sessions.set(session.id, session);\n    if (immersive) {\n      this.immersiveSession = session;\n      this.dispatchEvent('@@webxr-polyfill/vr-present-start', session.id);\n    }\n    return Promise.resolve(session.id);\n  }\n  requestAnimationFrame(callback) {\n    return this.display.requestAnimationFrame(callback);\n  }\n  getPrimaryButtonIndex(gamepad) {\n    let primaryButton = 0;\n    let name = gamepad.id.toLowerCase();\n    for (let key in PRIMARY_BUTTON_MAP) {\n      if (name.includes(key)) {\n        primaryButton = PRIMARY_BUTTON_MAP[key];\n        break;\n      }\n    }\n    return Math.min(primaryButton, gamepad.buttons.length - 1);\n  }\n  onFrameStart(sessionId, renderState) {\n    this.display.depthNear = renderState.depthNear;\n    this.display.depthFar = renderState.depthFar;\n    this.display.getFrameData(this.frame);\n    const session = this.sessions.get(sessionId);\n    if (session.immersive && this.CAN_USE_GAMEPAD) {\n      let prevInputSources = this.gamepadInputSources;\n      this.gamepadInputSources = {};\n      let gamepads = this.global.navigator.getGamepads();\n      for (let i = 0; i < gamepads.length; ++i) {\n        let gamepad = gamepads[i];\n        if (gamepad && gamepad.displayId > 0) {\n          let inputSourceImpl = prevInputSources[i];\n          if (!inputSourceImpl) {\n            inputSourceImpl = new GamepadXRInputSource(this, this.display, this.getPrimaryButtonIndex(gamepad));\n          }\n          inputSourceImpl.updateFromGamepad(gamepad);\n          this.gamepadInputSources[i] = inputSourceImpl;\n          if (inputSourceImpl.primaryButtonIndex != -1) {\n            let primaryActionPressed = gamepad.buttons[inputSourceImpl.primaryButtonIndex].pressed;\n            if (primaryActionPressed && !inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-start', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            } else if (!primaryActionPressed && inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-end', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            }\n            inputSourceImpl.primaryActionPressed = primaryActionPressed;\n          }\n          if (inputSourceImpl.primarySqueezeButtonIndex != -1) {\n            let primarySqueezeActionPressed = gamepad.buttons[inputSourceImpl.primarySqueezeButtonIndex].pressed;\n            if (primarySqueezeActionPressed && !inputSourceImpl.primarySqueezeActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-squeeze-start', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            } else if (!primarySqueezeActionPressed && inputSourceImpl.primarySqueezeActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-squeeze-end', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            }\n            inputSourceImpl.primarySqueezeActionPressed = primarySqueezeActionPressed;\n          }\n        }\n      }\n    }\n    if (TEST_ENV) {\n      return;\n    }\n    if (!session.immersive && session.baseLayer) {\n      const canvas = session.baseLayer.context.canvas;\n      perspective(this.frame.leftProjectionMatrix, renderState.inlineVerticalFieldOfView,\n          canvas.width/canvas.height, renderState.depthNear, renderState.depthFar);\n    }\n  }\n  onFrameEnd(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended || !session.baseLayer) {\n      return;\n    }\n    if (session.outputContext &&\n        !(session.immersive && !this.display.capabilities.hasExternalDisplay)) {\n      const mirroring =\n        session.immersive && this.display.capabilities.hasExternalDisplay;\n      const iCanvas = session.baseLayer.context.canvas;\n      const iWidth = mirroring ? iCanvas.width / 2 : iCanvas.width;\n      const iHeight = iCanvas.height;\n      if (!TEST_ENV) {\n        const oCanvas = session.outputContext.canvas;\n        const oWidth = oCanvas.width;\n        const oHeight = oCanvas.height;\n        const renderContext = session.renderContext;\n        if (this.HAS_BITMAP_SUPPORT) {\n          if (iCanvas.transferToImageBitmap) {\n            renderContext.transferFromImageBitmap(iCanvas.transferToImageBitmap());\n          }\n          else {\n            this.global.createImageBitmap(iCanvas, 0, 0, iWidth, iHeight, {\n              resizeWidth: oWidth,\n              resizeHeight: oHeight,\n            }).then(bitmap => renderContext.transferFromImageBitmap(bitmap));\n          }\n        } else {\n          renderContext.drawImage(iCanvas, 0, 0, iWidth, iHeight,\n                                           0, 0, oWidth, oHeight);\n        }\n      }\n    }\n    if (session.immersive && session.baseLayer) {\n      this.display.submitFrame();\n    }\n  }\n  cancelAnimationFrame(handle) {\n    this.display.cancelAnimationFrame(handle);\n  }\n  async endSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return;\n    }\n    if (session.immersive) {\n      return this.display.exitPresent();\n    } else {\n      session.ended = true;\n    }\n  }\n  doesSessionSupportReferenceSpace(sessionId, type) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return false;\n    }\n    return session.enabledFeatures.has(type);\n  }\n  requestStageBounds() {\n    if (this.display.stageParameters) {\n      const width = this.display.stageParameters.sizeX;\n      const depth = this.display.stageParameters.sizeZ;\n      const data = [];\n      data.push(-width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(depth / 2);\n      data.push(-width / 2);\n      data.push(depth / 2);\n      return data;\n    }\n    return null;\n  }\n  async requestFrameOfReferenceTransform(type, options) {\n    if ((type === 'local-floor' || type === 'bounded-floor') &&\n        this.display.stageParameters &&\n        this.display.stageParameters.sittingToStandingTransform) {\n      return this.display.stageParameters.sittingToStandingTransform;\n    }\n    return null;\n  }\n  getProjectionMatrix(eye) {\n    if (eye === 'left') {\n      return this.frame.leftProjectionMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightProjectionMatrix;\n    } else if (eye === 'none') {\n      return this.frame.leftProjectionMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getViewport(sessionId, eye, layer, target) {\n    const session = this.sessions.get(sessionId);\n    const { width, height } = layer.context.canvas;\n    if (!session.immersive) {\n      target.x = target.y = 0;\n      target.width = width;\n      target.height = height;\n      return true;\n    }\n    if (eye === 'left' || eye === 'none') {\n      target.x = 0;\n    } else if (eye === 'right') {\n      target.x = width / 2;\n    } else {\n      return false;\n    }\n    target.y = 0;\n    target.width = width / 2;\n    target.height = height;\n    return true;\n  }\n  getBasePoseMatrix() {\n    let { position, orientation } = this.frame.pose;\n    if (!position && !orientation) {\n      return this.baseModelMatrix;\n    }\n    if (!position) {\n      position = this.tempVec3;\n      position[0] = position[1] = position[2] = 0;\n    }\n    fromRotationTranslation(this.baseModelMatrix, orientation, position);\n    return this.baseModelMatrix;\n  }\n  getBaseViewMatrix(eye) {\n    if (eye === 'left' || eye === 'none') {\n      return this.frame.leftViewMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightViewMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getInputSources() {\n    let inputSources = [];\n    for (let i in this.gamepadInputSources) {\n      inputSources.push(this.gamepadInputSources[i].inputSource);\n    }\n    return inputSources;\n  }\n  getInputPose(inputSource, coordinateSystem, poseType) {\n    if (!coordinateSystem) {\n      return null;\n    }\n    for (let i in this.gamepadInputSources) {\n      let inputSourceImpl = this.gamepadInputSources[i];\n      if (inputSourceImpl.inputSource === inputSource) {\n        return inputSourceImpl.getXRPose(coordinateSystem, poseType);\n      }\n    }\n    return null;\n  }\n  onWindowResize() {\n  }\n  onVRDisplayPresentChange(e) {\n    if (!this.display.isPresenting) {\n      this.sessions.forEach(session => {\n        if (session.immersive && !session.ended) {\n          if (session.modifiedCanvasLayer) {\n            const canvas = session.baseLayer.context.canvas;\n            document.body.removeChild(canvas);\n            canvas.setAttribute('style', '');\n          }\n          if (this.immersiveSession === session) {\n            this.immersiveSession = null;\n          }\n          this.dispatchEvent('@@webxr-polyfill/vr-present-end', session.id);\n        }\n      });\n    }\n  }\n}\n\nclass CardboardXRDevice extends WebVRDevice {\n  constructor(global, cardboardConfig) {\n    const display = new CardboardVRDisplay(cardboardConfig || {});\n    super(global, display);\n    this.display = display;\n    this.frame = {\n      rightViewMatrix: new Float32Array(16),\n      leftViewMatrix: new Float32Array(16),\n      rightProjectionMatrix: new Float32Array(16),\n      leftProjectionMatrix: new Float32Array(16),\n      pose: null,\n      timestamp: null,\n    };\n  }\n}\n\nconst TEST_ENV$1 = \"production\" === 'test';\nlet SESSION_ID$1 = 0;\nclass Session$1 {\n  constructor(mode, enabledFeatures) {\n    this.mode = mode;\n    this.enabledFeatures = enabledFeatures;\n    this.ended = null;\n    this.baseLayer = null;\n    this.id = ++SESSION_ID$1;\n  }\n}\nclass InlineDevice extends XRDevice {\n  constructor(global) {\n    super(global);\n    this.sessions = new Map();\n    this.projectionMatrix = create();\n    this.identityMatrix = create();\n  }\n  onBaseLayerSet(sessionId, layer) {\n    const session = this.sessions.get(sessionId);\n    session.baseLayer = layer;\n  }\n  isSessionSupported(mode) {\n    return mode == 'inline';\n  }\n  isFeatureSupported(featureDescriptor) {\n    switch(featureDescriptor) {\n      case 'viewer': return true;\n      default: return false;\n    }\n  }\n  async requestSession(mode, enabledFeatures) {\n    if (!this.isSessionSupported(mode)) {\n      return Promise.reject();\n    }\n    const session = new Session$1(mode, enabledFeatures);\n    this.sessions.set(session.id, session);\n    return Promise.resolve(session.id);\n  }\n  requestAnimationFrame(callback) {\n    return window.requestAnimationFrame(callback);\n  }\n  cancelAnimationFrame(handle) {\n    window.cancelAnimationFrame(handle);\n  }\n  onFrameStart(sessionId, renderState) {\n    if (TEST_ENV$1) {\n      return;\n    }\n    const session = this.sessions.get(sessionId);\n    if (session.baseLayer) {\n      const canvas = session.baseLayer.context.canvas;\n      perspective(this.projectionMatrix, renderState.inlineVerticalFieldOfView,\n          canvas.width/canvas.height, renderState.depthNear, renderState.depthFar);\n    }\n  }\n  onFrameEnd(sessionId) {\n  }\n  async endSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    session.ended = true;\n  }\n  doesSessionSupportReferenceSpace(sessionId, type) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return false;\n    }\n    return session.enabledFeatures.has(type);\n  }\n  requestStageBounds() {\n    return null;\n  }\n  async requestFrameOfReferenceTransform(type, options) {\n    return null;\n  }\n  getProjectionMatrix(eye) {\n    return this.projectionMatrix;\n  }\n  getViewport(sessionId, eye, layer, target) {\n    const session = this.sessions.get(sessionId);\n    const { width, height } = layer.context.canvas;\n    target.x = target.y = 0;\n    target.width = width;\n    target.height = height;\n    return true;\n  }\n  getBasePoseMatrix() {\n    return this.identityMatrix;\n  }\n  getBaseViewMatrix(eye) {\n    return this.identityMatrix;\n  }\n  getInputSources() {\n    return [];\n  }\n  getInputPose(inputSource, coordinateSystem, poseType) {\n    return null;\n  }\n  onWindowResize() {\n  }\n}\n\nconst getWebVRDevice = async function (global) {\n  let device = null;\n  if ('getVRDisplays' in global.navigator) {\n    try {\n      const displays = await global.navigator.getVRDisplays();\n      if (displays && displays.length) {\n        device = new WebVRDevice(global, displays[0]);\n      }\n    } catch (e) {}\n  }\n  return device;\n};\nconst requestXRDevice = async function (global, config) {\n  if (config.webvr) {\n    let xr = await getWebVRDevice(global);\n    if (xr) {\n      return xr;\n    }\n  }\n  let mobile = isMobile(global);\n  if ((mobile && config.cardboard) ||\n      (!mobile && config.allowCardboardOnDesktop)) {\n    if (!global.VRFrameData) {\n      global.VRFrameData = function () {\n        this.rightViewMatrix = new Float32Array(16);\n        this.leftViewMatrix = new Float32Array(16);\n        this.rightProjectionMatrix = new Float32Array(16);\n        this.leftProjectionMatrix = new Float32Array(16);\n        this.pose = null;\n      };\n    }\n    return new CardboardXRDevice(global, config.cardboardConfig);\n  }\n  return new InlineDevice(global);\n};\n\nconst CONFIG_DEFAULTS = {\n  global: _global,\n  webvr: true,\n  cardboard: true,\n  cardboardConfig: null,\n  allowCardboardOnDesktop: false,\n};\nconst partials = ['navigator', 'HTMLCanvasElement', 'WebGLRenderingContext'];\nclass WebXRPolyfill {\n  constructor(config={}) {\n    this.config = Object.freeze(Object.assign({}, CONFIG_DEFAULTS, config));\n    this.global = this.config.global;\n    this.nativeWebXR = 'xr' in this.global.navigator;\n    this.injected = false;\n    if (!this.nativeWebXR) {\n      this._injectPolyfill(this.global);\n    } else {\n      this._injectCompatibilityShims(this.global);\n    }\n  }\n  _injectPolyfill(global) {\n    if (!partials.every(iface => !!global[iface])) {\n      throw new Error(`Global must have the following attributes : ${partials}`);\n    }\n    for (const className of Object.keys(API)) {\n      if (global[className] !== undefined) {\n        console.warn(`${className} already defined on global.`);\n      } else {\n        global[className] = API[className];\n      }\n    }\n    {\n      const polyfilledCtx = polyfillMakeXRCompatible(global.WebGLRenderingContext);\n      if (polyfilledCtx) {\n        polyfillGetContext(global.HTMLCanvasElement);\n        if (global.OffscreenCanvas) {\n          polyfillGetContext(global.OffscreenCanvas);\n        }\n        if (global.WebGL2RenderingContext){\n          polyfillMakeXRCompatible(global.WebGL2RenderingContext);\n        }\n        if (!window.isSecureContext) {\n          console.warn(`WebXR Polyfill Warning:\nThis page is not running in a secure context (https:// or localhost)!\nThis means that although the page may be able to use the WebXR Polyfill it will\nnot be able to use native WebXR implementations, and as such will not be able to\naccess dedicated VR or AR hardware, and will not be able to take advantage of\nany performance improvements a native WebXR implementation may offer. Please\nhost this content on a secure origin for the best user experience.\n`);\n        }\n      }\n    }\n    this.injected = true;\n    this._patchNavigatorXR();\n  }\n  _patchNavigatorXR() {\n    let devicePromise = requestXRDevice(this.global, this.config);\n    this.xr = new API.XRSystem(devicePromise);\n    Object.defineProperty(this.global.navigator, 'xr', {\n      value: this.xr,\n      configurable: true,\n    });\n  }\n  _injectCompatibilityShims(global) {\n    if (!partials.every(iface => !!global[iface])) {\n      throw new Error(`Global must have the following attributes : ${partials}`);\n    }\n    if (global.navigator.xr &&\n        'supportsSession' in global.navigator.xr &&\n        !('isSessionSupported' in global.navigator.xr)) {\n      let originalSupportsSession = global.navigator.xr.supportsSession;\n      global.navigator.xr.isSessionSupported = function(mode) {\n        return originalSupportsSession.call(this, mode).then(() => {\n          return true;\n        }).catch(() => {\n          return false;\n        });\n      };\n      global.navigator.xr.supportsSession = function(mode) {\n        console.warn(\"navigator.xr.supportsSession() is deprecated. Please \" +\n        \"call navigator.xr.isSessionSupported() instead and check the boolean \" +\n        \"value returned when the promise resolves.\");\n        return originalSupportsSession.call(this, mode);\n      };\n    }\n  }\n}\n\nexport default WebXRPolyfill;\n","var NOW;\r\n// Include a performance.now polyfill.\r\n// In node.js, use process.hrtime.\r\n// eslint-disable-next-line\r\n// @ts-ignore\r\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\r\n    NOW = function () {\r\n        // eslint-disable-next-line\r\n        // @ts-ignore\r\n        var time = process.hrtime();\r\n        // Convert [seconds, nanoseconds] to milliseconds.\r\n        return time[0] * 1000 + time[1] / 1000000;\r\n    };\r\n}\r\n// In a browser, use self.performance.now if it is available.\r\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\r\n    // This must be bound, because directly assigning this function\r\n    // leads to an invocation exception in Chrome.\r\n    NOW = self.performance.now.bind(self.performance);\r\n}\r\n// Use Date.now if it is available.\r\nelse if (Date.now !== undefined) {\r\n    NOW = Date.now;\r\n}\r\n// Otherwise, use 'new Date().getTime()'.\r\nelse {\r\n    NOW = function () {\r\n        return new Date().getTime();\r\n    };\r\n}\r\nvar NOW$1 = NOW;\n\n/**\r\n * Controlling groups of tweens\r\n *\r\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\r\n * In these cases, you may want to create your own smaller groups of tween\r\n */\r\nvar Group = /** @class */ (function () {\r\n    function Group() {\r\n        this._tweens = {};\r\n        this._tweensAddedDuringUpdate = {};\r\n    }\r\n    Group.prototype.getAll = function () {\r\n        var _this = this;\r\n        return Object.keys(this._tweens).map(function (tweenId) {\r\n            return _this._tweens[tweenId];\r\n        });\r\n    };\r\n    Group.prototype.removeAll = function () {\r\n        this._tweens = {};\r\n    };\r\n    Group.prototype.add = function (tween) {\r\n        this._tweens[tween.getId()] = tween;\r\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\r\n    };\r\n    Group.prototype.remove = function (tween) {\r\n        delete this._tweens[tween.getId()];\r\n        delete this._tweensAddedDuringUpdate[tween.getId()];\r\n    };\r\n    Group.prototype.update = function (time, preserve) {\r\n        var tweenIds = Object.keys(this._tweens);\r\n        if (tweenIds.length === 0) {\r\n            return false;\r\n        }\r\n        time = time !== undefined ? time : NOW$1();\r\n        // Tweens are updated in \"batches\". If you add a new tween during an\r\n        // update, then the new tween will be updated in the next batch.\r\n        // If you remove a tween during an update, it may or may not be updated.\r\n        // However, if the removed tween was added during the current batch,\r\n        // then it will not be updated.\r\n        while (tweenIds.length > 0) {\r\n            this._tweensAddedDuringUpdate = {};\r\n            for (var i = 0; i < tweenIds.length; i++) {\r\n                var tween = this._tweens[tweenIds[i]];\r\n                if (tween && tween.update(time) === false && !preserve) {\r\n                    delete this._tweens[tweenIds[i]];\r\n                }\r\n            }\r\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\r\n        }\r\n        return true;\r\n    };\r\n    return Group;\r\n}());\n\n/**\r\n * The Ease class provides a collection of easing functions for use with tween.js.\r\n */\r\nvar Easing = {\r\n    Linear: {\r\n        None: function (amount) {\r\n            return amount;\r\n        },\r\n    },\r\n    Quadratic: {\r\n        In: function (amount) {\r\n            return amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return amount * (2 - amount);\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount;\r\n            }\r\n            return -0.5 * (--amount * (amount - 2) - 1);\r\n        },\r\n    },\r\n    Cubic: {\r\n        In: function (amount) {\r\n            return amount * amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return --amount * amount * amount + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount * amount;\r\n            }\r\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\r\n        },\r\n    },\r\n    Quartic: {\r\n        In: function (amount) {\r\n            return amount * amount * amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return 1 - --amount * amount * amount * amount;\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount * amount * amount;\r\n            }\r\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\r\n        },\r\n    },\r\n    Quintic: {\r\n        In: function (amount) {\r\n            return amount * amount * amount * amount * amount;\r\n        },\r\n        Out: function (amount) {\r\n            return --amount * amount * amount * amount * amount + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * amount * amount * amount * amount * amount;\r\n            }\r\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\r\n        },\r\n    },\r\n    Sinusoidal: {\r\n        In: function (amount) {\r\n            return 1 - Math.cos((amount * Math.PI) / 2);\r\n        },\r\n        Out: function (amount) {\r\n            return Math.sin((amount * Math.PI) / 2);\r\n        },\r\n        InOut: function (amount) {\r\n            return 0.5 * (1 - Math.cos(Math.PI * amount));\r\n        },\r\n    },\r\n    Exponential: {\r\n        In: function (amount) {\r\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\r\n        },\r\n        Out: function (amount) {\r\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\r\n        },\r\n        InOut: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * Math.pow(1024, amount - 1);\r\n            }\r\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\r\n        },\r\n    },\r\n    Circular: {\r\n        In: function (amount) {\r\n            return 1 - Math.sqrt(1 - amount * amount);\r\n        },\r\n        Out: function (amount) {\r\n            return Math.sqrt(1 - --amount * amount);\r\n        },\r\n        InOut: function (amount) {\r\n            if ((amount *= 2) < 1) {\r\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\r\n            }\r\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\r\n        },\r\n    },\r\n    Elastic: {\r\n        In: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\r\n        },\r\n        Out: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            if (amount === 0) {\r\n                return 0;\r\n            }\r\n            if (amount === 1) {\r\n                return 1;\r\n            }\r\n            amount *= 2;\r\n            if (amount < 1) {\r\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\r\n            }\r\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\r\n        },\r\n    },\r\n    Back: {\r\n        In: function (amount) {\r\n            var s = 1.70158;\r\n            return amount * amount * ((s + 1) * amount - s);\r\n        },\r\n        Out: function (amount) {\r\n            var s = 1.70158;\r\n            return --amount * amount * ((s + 1) * amount + s) + 1;\r\n        },\r\n        InOut: function (amount) {\r\n            var s = 1.70158 * 1.525;\r\n            if ((amount *= 2) < 1) {\r\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\r\n            }\r\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\r\n        },\r\n    },\r\n    Bounce: {\r\n        In: function (amount) {\r\n            return 1 - Easing.Bounce.Out(1 - amount);\r\n        },\r\n        Out: function (amount) {\r\n            if (amount < 1 / 2.75) {\r\n                return 7.5625 * amount * amount;\r\n            }\r\n            else if (amount < 2 / 2.75) {\r\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\r\n            }\r\n            else if (amount < 2.5 / 2.75) {\r\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\r\n            }\r\n            else {\r\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\r\n            }\r\n        },\r\n        InOut: function (amount) {\r\n            if (amount < 0.5) {\r\n                return Easing.Bounce.In(amount * 2) * 0.5;\r\n            }\r\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\r\n        },\r\n    },\r\n};\n\n/**\r\n *\r\n */\r\nvar Interpolation = {\r\n    Linear: function (v, k) {\r\n        var m = v.length - 1;\r\n        var f = m * k;\r\n        var i = Math.floor(f);\r\n        var fn = Interpolation.Utils.Linear;\r\n        if (k < 0) {\r\n            return fn(v[0], v[1], f);\r\n        }\r\n        if (k > 1) {\r\n            return fn(v[m], v[m - 1], m - f);\r\n        }\r\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\r\n    },\r\n    Bezier: function (v, k) {\r\n        var b = 0;\r\n        var n = v.length - 1;\r\n        var pw = Math.pow;\r\n        var bn = Interpolation.Utils.Bernstein;\r\n        for (var i = 0; i <= n; i++) {\r\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\r\n        }\r\n        return b;\r\n    },\r\n    CatmullRom: function (v, k) {\r\n        var m = v.length - 1;\r\n        var f = m * k;\r\n        var i = Math.floor(f);\r\n        var fn = Interpolation.Utils.CatmullRom;\r\n        if (v[0] === v[m]) {\r\n            if (k < 0) {\r\n                i = Math.floor((f = m * (1 + k)));\r\n            }\r\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\r\n        }\r\n        else {\r\n            if (k < 0) {\r\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\r\n            }\r\n            if (k > 1) {\r\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\r\n            }\r\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\r\n        }\r\n    },\r\n    Utils: {\r\n        Linear: function (p0, p1, t) {\r\n            return (p1 - p0) * t + p0;\r\n        },\r\n        Bernstein: function (n, i) {\r\n            var fc = Interpolation.Utils.Factorial;\r\n            return fc(n) / fc(i) / fc(n - i);\r\n        },\r\n        Factorial: (function () {\r\n            var a = [1];\r\n            return function (n) {\r\n                var s = 1;\r\n                if (a[n]) {\r\n                    return a[n];\r\n                }\r\n                for (var i = n; i > 1; i--) {\r\n                    s *= i;\r\n                }\r\n                a[n] = s;\r\n                return s;\r\n            };\r\n        })(),\r\n        CatmullRom: function (p0, p1, p2, p3, t) {\r\n            var v0 = (p2 - p0) * 0.5;\r\n            var v1 = (p3 - p1) * 0.5;\r\n            var t2 = t * t;\r\n            var t3 = t * t2;\r\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\r\n        },\r\n    },\r\n};\n\n/**\r\n * Utils\r\n */\r\nvar Sequence = /** @class */ (function () {\r\n    function Sequence() {\r\n    }\r\n    Sequence.nextId = function () {\r\n        return Sequence._nextId++;\r\n    };\r\n    Sequence._nextId = 0;\r\n    return Sequence;\r\n}());\n\n/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\r\nvar Tween = /** @class */ (function () {\r\n    function Tween(_object, _group) {\r\n        if (_group === void 0) { _group = TWEEN; }\r\n        this._object = _object;\r\n        this._group = _group;\r\n        this._isPaused = false;\r\n        this._pauseStart = 0;\r\n        this._valuesStart = {};\r\n        this._valuesEnd = {};\r\n        this._valuesStartRepeat = {};\r\n        this._duration = 1000;\r\n        this._initialRepeat = 0;\r\n        this._repeat = 0;\r\n        this._yoyo = false;\r\n        this._isPlaying = false;\r\n        this._reversed = false;\r\n        this._delayTime = 0;\r\n        this._startTime = 0;\r\n        this._easingFunction = TWEEN.Easing.Linear.None;\r\n        this._interpolationFunction = TWEEN.Interpolation.Linear;\r\n        this._chainedTweens = [];\r\n        this._onStartCallbackFired = false;\r\n        this._id = TWEEN.nextId();\r\n        this._isChainStopped = false;\r\n    }\r\n    Tween.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    Tween.prototype.isPlaying = function () {\r\n        return this._isPlaying;\r\n    };\r\n    Tween.prototype.isPaused = function () {\r\n        return this._isPaused;\r\n    };\r\n    Tween.prototype.to = function (properties, duration) {\r\n        for (var prop in properties) {\r\n            this._valuesEnd[prop] = properties[prop];\r\n        }\r\n        if (duration !== undefined) {\r\n            this._duration = duration;\r\n        }\r\n        return this;\r\n    };\r\n    Tween.prototype.duration = function (d) {\r\n        this._duration = d;\r\n        return this;\r\n    };\r\n    Tween.prototype.start = function (time) {\r\n        if (this._isPlaying) {\r\n            return this;\r\n        }\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.add(this);\r\n        this._repeat = this._initialRepeat;\r\n        if (this._reversed) {\r\n            // If we were reversed (f.e. using the yoyo feature) then we need to\r\n            // flip the tween direction back to forward.\r\n            this._reversed = false;\r\n            for (var property in this._valuesStartRepeat) {\r\n                this._swapEndStartRepeatValues(property);\r\n                this._valuesStart[property] = this._valuesStartRepeat[property];\r\n            }\r\n        }\r\n        this._isPlaying = true;\r\n        this._isPaused = false;\r\n        this._onStartCallbackFired = false;\r\n        this._isChainStopped = false;\r\n        this._startTime =\r\n            time !== undefined ? (typeof time === 'string' ? TWEEN.now() + parseFloat(time) : time) : TWEEN.now();\r\n        this._startTime += this._delayTime;\r\n        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\r\n        return this;\r\n    };\r\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\r\n        for (var property in _valuesEnd) {\r\n            var startValue = _object[property];\r\n            var startValueIsArray = Array.isArray(startValue);\r\n            var propType = startValueIsArray ? 'array' : typeof startValue;\r\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\r\n            // If `to()` specifies a property that doesn't exist in the source object,\r\n            // we should not set that property in the object\r\n            if (propType === 'undefined' || propType === 'function') {\r\n                continue;\r\n            }\r\n            // Check if an Array was provided as property value\r\n            if (isInterpolationList) {\r\n                var endValues = _valuesEnd[property];\r\n                if (endValues.length === 0) {\r\n                    continue;\r\n                }\r\n                // handle an array of relative values\r\n                endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\r\n                // Create a local copy of the Array with the start value at the front\r\n                _valuesEnd[property] = [startValue].concat(endValues);\r\n            }\r\n            // handle the deepness of the values\r\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\r\n                _valuesStart[property] = startValueIsArray ? [] : {};\r\n                // eslint-disable-next-line\r\n                for (var prop in startValue) {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _valuesStart[property][prop] = startValue[prop];\r\n                }\r\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\r\n                // eslint-disable-next-line\r\n                // @ts-ignore FIXME?\r\n                this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\r\n            }\r\n            else {\r\n                // Save the starting value, but only once.\r\n                if (typeof _valuesStart[property] === 'undefined') {\r\n                    _valuesStart[property] = startValue;\r\n                }\r\n                if (!startValueIsArray) {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\r\n                }\r\n                if (isInterpolationList) {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\r\n                }\r\n                else {\r\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Tween.prototype.stop = function () {\r\n        if (!this._isChainStopped) {\r\n            this._isChainStopped = true;\r\n            this.stopChainedTweens();\r\n        }\r\n        if (!this._isPlaying) {\r\n            return this;\r\n        }\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.remove(this);\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n        if (this._onStopCallback) {\r\n            this._onStopCallback(this._object);\r\n        }\r\n        return this;\r\n    };\r\n    Tween.prototype.end = function () {\r\n        this.update(Infinity);\r\n        return this;\r\n    };\r\n    Tween.prototype.pause = function (time) {\r\n        if (this._isPaused || !this._isPlaying) {\r\n            return this;\r\n        }\r\n        this._isPaused = true;\r\n        this._pauseStart = time === undefined ? TWEEN.now() : time;\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.remove(this);\r\n        return this;\r\n    };\r\n    Tween.prototype.resume = function (time) {\r\n        if (!this._isPaused || !this._isPlaying) {\r\n            return this;\r\n        }\r\n        this._isPaused = false;\r\n        this._startTime += (time === undefined ? TWEEN.now() : time) - this._pauseStart;\r\n        this._pauseStart = 0;\r\n        // eslint-disable-next-line\r\n        // @ts-ignore FIXME?\r\n        this._group.add(this);\r\n        return this;\r\n    };\r\n    Tween.prototype.stopChainedTweens = function () {\r\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\r\n            this._chainedTweens[i].stop();\r\n        }\r\n        return this;\r\n    };\r\n    Tween.prototype.group = function (group) {\r\n        this._group = group;\r\n        return this;\r\n    };\r\n    Tween.prototype.delay = function (amount) {\r\n        this._delayTime = amount;\r\n        return this;\r\n    };\r\n    Tween.prototype.repeat = function (times) {\r\n        this._initialRepeat = times;\r\n        this._repeat = times;\r\n        return this;\r\n    };\r\n    Tween.prototype.repeatDelay = function (amount) {\r\n        this._repeatDelayTime = amount;\r\n        return this;\r\n    };\r\n    Tween.prototype.yoyo = function (yoyo) {\r\n        this._yoyo = yoyo;\r\n        return this;\r\n    };\r\n    Tween.prototype.easing = function (easingFunction) {\r\n        this._easingFunction = easingFunction;\r\n        return this;\r\n    };\r\n    Tween.prototype.interpolation = function (interpolationFunction) {\r\n        this._interpolationFunction = interpolationFunction;\r\n        return this;\r\n    };\r\n    Tween.prototype.chain = function () {\r\n        var tweens = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            tweens[_i] = arguments[_i];\r\n        }\r\n        this._chainedTweens = tweens;\r\n        return this;\r\n    };\r\n    Tween.prototype.onStart = function (callback) {\r\n        this._onStartCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onUpdate = function (callback) {\r\n        this._onUpdateCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onRepeat = function (callback) {\r\n        this._onRepeatCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onComplete = function (callback) {\r\n        this._onCompleteCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.onStop = function (callback) {\r\n        this._onStopCallback = callback;\r\n        return this;\r\n    };\r\n    Tween.prototype.update = function (time) {\r\n        var property;\r\n        var elapsed;\r\n        var endTime = this._startTime + this._duration;\r\n        if (time > endTime && !this._isPlaying) {\r\n            return false;\r\n        }\r\n        // If the tween was already finished,\r\n        if (!this.isPlaying) {\r\n            this.start(time);\r\n        }\r\n        if (time < this._startTime) {\r\n            return true;\r\n        }\r\n        if (this._onStartCallbackFired === false) {\r\n            if (this._onStartCallback) {\r\n                this._onStartCallback(this._object);\r\n            }\r\n            this._onStartCallbackFired = true;\r\n        }\r\n        elapsed = (time - this._startTime) / this._duration;\r\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\r\n        var value = this._easingFunction(elapsed);\r\n        // properties transformations\r\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\r\n        if (this._onUpdateCallback) {\r\n            this._onUpdateCallback(this._object, elapsed);\r\n        }\r\n        if (elapsed === 1) {\r\n            if (this._repeat > 0) {\r\n                if (isFinite(this._repeat)) {\r\n                    this._repeat--;\r\n                }\r\n                // Reassign starting values, restart by making startTime = now\r\n                for (property in this._valuesStartRepeat) {\r\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\r\n                        this._valuesStartRepeat[property] =\r\n                            // eslint-disable-next-line\r\n                            // @ts-ignore FIXME?\r\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\r\n                    }\r\n                    if (this._yoyo) {\r\n                        this._swapEndStartRepeatValues(property);\r\n                    }\r\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\r\n                }\r\n                if (this._yoyo) {\r\n                    this._reversed = !this._reversed;\r\n                }\r\n                if (this._repeatDelayTime !== undefined) {\r\n                    this._startTime = time + this._repeatDelayTime;\r\n                }\r\n                else {\r\n                    this._startTime = time + this._delayTime;\r\n                }\r\n                if (this._onRepeatCallback) {\r\n                    this._onRepeatCallback(this._object);\r\n                }\r\n                return true;\r\n            }\r\n            else {\r\n                if (this._onCompleteCallback) {\r\n                    this._onCompleteCallback(this._object);\r\n                }\r\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\r\n                    // Make the chained tweens start exactly at the time they should,\r\n                    // even if the `update()` method was called way past the duration of the tween\r\n                    this._chainedTweens[i].start(this._startTime + this._duration);\r\n                }\r\n                this._isPlaying = false;\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\r\n        for (var property in _valuesEnd) {\r\n            // Don't update properties that do not exist in the source object\r\n            if (_valuesStart[property] === undefined) {\r\n                continue;\r\n            }\r\n            var start = _valuesStart[property] || 0;\r\n            var end = _valuesEnd[property];\r\n            var startIsArray = Array.isArray(_object[property]);\r\n            var endIsArray = Array.isArray(end);\r\n            var isInterpolationList = !startIsArray && endIsArray;\r\n            if (isInterpolationList) {\r\n                _object[property] = this._interpolationFunction(end, value);\r\n            }\r\n            else if (typeof end === 'object' && end) {\r\n                // eslint-disable-next-line\r\n                // @ts-ignore FIXME?\r\n                this._updateProperties(_object[property], start, end, value);\r\n            }\r\n            else {\r\n                // Parses relative end values with start as base (e.g.: +10, -3)\r\n                end = this._handleRelativeValue(start, end);\r\n                // Protect against non numeric properties.\r\n                if (typeof end === 'number') {\r\n                    // eslint-disable-next-line\r\n                    // @ts-ignore FIXME?\r\n                    _object[property] = start + (end - start) * value;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Tween.prototype._handleRelativeValue = function (start, end) {\r\n        if (typeof end !== 'string') {\r\n            return end;\r\n        }\r\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\r\n            return start + parseFloat(end);\r\n        }\r\n        else {\r\n            return parseFloat(end);\r\n        }\r\n    };\r\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\r\n        var tmp = this._valuesStartRepeat[property];\r\n        if (typeof this._valuesEnd[property] === 'string') {\r\n            // eslint-disable-next-line\r\n            // @ts-ignore FIXME?\r\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\r\n        }\r\n        else {\r\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\r\n        }\r\n        this._valuesEnd[property] = tmp;\r\n    };\r\n    return Tween;\r\n}());\n\nvar VERSION = '18.6.0';\n\n/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * Controlling groups of tweens\r\n *\r\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\r\n * In these cases, you may want to create your own smaller groups of tween\r\n */\r\nvar Main = /** @class */ (function (_super) {\r\n    __extends(Main, _super);\r\n    function Main() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.version = VERSION;\r\n        _this.now = NOW$1;\r\n        _this.Group = Group;\r\n        _this.Easing = Easing;\r\n        _this.Interpolation = Interpolation;\r\n        _this.nextId = Sequence.nextId;\r\n        _this.Tween = Tween;\r\n        return _this;\r\n    }\r\n    return Main;\r\n}(Group));\r\nvar TWEEN = new Main();\n\nexport default TWEEN;\n","// Original src: https://github.com/zz85/threejs-path-flow\r\nconst BITS = 3;\r\nconst TEXTURE_WIDTH = 1024;\r\nconst TEXTURE_HEIGHT = 4; // Ideally this should be able to be set to high powers of 2 but the parts from further down the texture get warped in that situation\r\n\r\nimport {\r\n\tDataTexture,\r\n\tRGBFormat,\r\n\tFloatType,\r\n\tRepeatWrapping,\r\n\tMesh,\r\n\tInstancedMesh,\r\n\tNearestFilter,\r\n\tDynamicDrawUsage,\r\n\tMatrix4\r\n} from 'three';\r\n\r\n/**\r\n * Prepares texture for storing positions and normals for spline\r\n */\r\nexport function initSplineTexture(numberOfCurves) {\r\n\tconst dataArray = new Float32Array( TEXTURE_WIDTH * TEXTURE_HEIGHT * numberOfCurves * BITS );\r\n\tconst dataTexture = new DataTexture(\r\n\t\tdataArray,\r\n\t\tTEXTURE_WIDTH,\r\n\t\tTEXTURE_HEIGHT * numberOfCurves,\r\n\t\tRGBFormat,\r\n\t\tFloatType\r\n\t);\r\n\r\n\tdataTexture.wrapS = RepeatWrapping;\r\n\tdataTexture.wrapY = RepeatWrapping;\r\n\tdataTexture.magFilter = NearestFilter;\r\n\tdataTexture.needsUpdate = true;\r\n\r\n\treturn dataTexture;\r\n}\r\n\r\nexport function updateSplineTexture(texture, splineCurve, offset) {\r\n\r\n\tconst numberOfPoints = Math.floor(TEXTURE_WIDTH * (TEXTURE_HEIGHT/4));\r\n\tsplineCurve.arcLengthDivisions = numberOfPoints/2;\r\n\tsplineCurve.updateArcLengths();\r\n\tconst points = splineCurve.getSpacedPoints(numberOfPoints);\r\n\tconst frenetFrames = splineCurve.computeFrenetFrames(numberOfPoints, true);\r\n\r\n\tfor (let i = 0; i < numberOfPoints; i++) {\r\n\t\tlet rowOffset = Math.floor(i / TEXTURE_WIDTH);\r\n\t\tlet rowIndex = i % TEXTURE_WIDTH;\r\n\r\n\t\tlet pt = points[i];\r\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 0 + rowOffset + (TEXTURE_HEIGHT * offset));\r\n\t\tpt = frenetFrames.tangents[i];\r\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 1 + rowOffset + (TEXTURE_HEIGHT * offset));\r\n\t\tpt = frenetFrames.normals[i];\r\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 2 + rowOffset + (TEXTURE_HEIGHT * offset));\r\n\t\tpt = frenetFrames.binormals[i];\r\n\t\tsetTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 3 + rowOffset + (TEXTURE_HEIGHT * offset));\r\n\t}\r\n\r\n\ttexture.needsUpdate = true;\r\n}\r\n\r\nfunction setTextureValue(texture, index, x, y, z, o) {\r\n\tconst image = texture.image;\r\n\tconst { data } = image;\r\n\tconst i = BITS * TEXTURE_WIDTH * o; // Row Offset\r\n\tdata[index * BITS + i + 0] = x;\r\n\tdata[index * BITS + i + 1] = y;\r\n\tdata[index * BITS + i + 2] = z;\r\n}\r\n\r\nexport function getUniforms(splineTexture) {\r\n\tconst uniforms = {\r\n\t\tspineTexture: { value: splineTexture },\r\n\t\tpathOffset: { type: 'f', value: 0 }, // time of path curve\r\n\t\tpathSegment: { type: 'f', value: 1 }, // fractional length of path\r\n\t\tspineOffset: { type: 'f', value: 161 },\r\n\t\tspineLength: { type: 'f', value: 400 },\r\n\t\tflow: { type: 'i', value: 1 },\r\n\t};\r\n\treturn uniforms;\r\n}\r\n\r\nexport function modifyShader(material, uniforms, numberOfCurves) {\r\n\tuniforms = uniforms || getUniforms();\r\n\tif (material.__ok) return;\r\n\tmaterial.__ok = true;\r\n\r\n\tmaterial.onBeforeCompile = (shader) => {\r\n\r\n\t\tif (shader.__modified) return;\r\n\t\tshader.__modified = true;\r\n\r\n\t\tObject.assign(shader.uniforms, uniforms);\r\n\r\n\t\tconst vertexShader = `\r\n\t\tuniform sampler2D spineTexture;\r\n\t\tuniform float pathOffset;\r\n\t\tuniform float pathSegment;\r\n\t\tuniform float spineOffset;\r\n\t\tuniform float spineLength;\r\n\t\tuniform int flow;\r\n\r\n\t\tfloat textureLayers = ${TEXTURE_HEIGHT * numberOfCurves}.;\r\n\t\tfloat textureStacks = ${TEXTURE_HEIGHT/4}.;\r\n\r\n\t\t${shader.vertexShader}\r\n\t\t`.replace(\r\n\t\t'#include <defaultnormal_vertex>',\r\n\t\t`\r\n\t\tvec4 worldPos = modelMatrix * vec4(position, 1.);\r\n\r\n\t\tbool bend = flow > 0;\r\n\t\tfloat xWeight = bend ? 0. : 1.;\r\n\r\n\t\t#ifdef USE_INSTANCING\r\n\t\tfloat pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\r\n\t\tfloat spineLengthFromInstanceMatrix = instanceMatrix[3][0];\r\n\t\tfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\r\n\t\tfloat mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\r\n\t\t#else\r\n\t\tfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\r\n\t\tfloat mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\r\n\t\t#endif\r\n\r\n\t\tmt = mod(mt, textureStacks);\r\n\t\tfloat rowOffset = floor(mt);\r\n\r\n\t\t#ifdef USE_INSTANCING\r\n\t\trowOffset += instanceMatrix[3][1] * ${TEXTURE_HEIGHT}.;\r\n\t\t#endif\r\n\r\n\t\tvec3 spinePos = texture(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\r\n\t\tvec3 a =        texture(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\r\n\t\tvec3 b =        texture(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\r\n\t\tvec3 c =        texture(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\r\n\t\tmat3 basis = mat3(a, b, c);\r\n\r\n\t\tvec3 transformed = basis\r\n\t\t\t* vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\r\n\t\t\t+ spinePos;\r\n\r\n\t\tvec3 transformedNormal = normalMatrix * (basis * objectNormal);\r\n\t\t`\r\n\t).replace(\r\n\t\t'#include <begin_vertex>',\r\n\t\t''\r\n\t).replace(\r\n\t\t'#include <project_vertex>',\r\n\t\t`\r\n\t\t\tvec4 mvPosition = viewMatrix * vec4( transformed, 1.0 );\r\n\t\t\t// vec4 mvPosition = viewMatrix * worldPos;\r\n\t\t\tgl_Position = projectionMatrix * mvPosition;\r\n\t\t\t`\r\n\t)\r\n\r\n\t\tshader.vertexShader = vertexShader\r\n\t}\r\n\r\n\treturn uniforms;\r\n}\r\n\r\n/**\r\n * Ideally this would perform the material changes before cloning\r\n * so that they all share the same material making it much more\r\n * efficient but as far as I can tell there is currently no way\r\n * of doing that with beforeCompile.\r\n */\r\nexport class Flow {\r\n\tconstructor(mesh, numberOfCurves=1) {\r\n\t\tconst obj3D = mesh.clone();\r\n\t\tconst splineTexure = initSplineTexture(numberOfCurves);\r\n\t\tconst uniforms = getUniforms(splineTexure);\r\n\t\tobj3D.traverse(function (child) {\r\n\t\t\tif (\r\n\t\t\t\tchild instanceof Mesh ||\r\n\t\t\t\tchild instanceof InstancedMesh\r\n\t\t\t) {\r\n\t\t\t\tchild.material = child.material.clone();\r\n\t\t\t\tmodifyShader( child.material, uniforms, numberOfCurves );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.curveArray = new Array(numberOfCurves);\r\n\t\tthis.curveLengthArray = new Array(numberOfCurves);\r\n\t\tthis.currentCurveCount = 0;\r\n\r\n\t\tthis.object3D = obj3D;\r\n\t\tthis.splineTexure = splineTexure;\r\n\t\tthis.uniforms = uniforms;\r\n\t}\r\n\r\n\tupdateCurve(index, curve) {\r\n\t\tif (index >= this.curveArray.length) throw Error('Index out of range for Flow');\r\n\t\tconst curveLength = curve.getLength();\r\n\t\tthis.uniforms.spineLength.value = curveLength;\r\n\t\tthis.curveLengthArray[index] = curveLength;\r\n\t\tthis.curveArray[index] = curve;\r\n\t\tupdateSplineTexture(this.splineTexure, curve, index);\r\n\t}\r\n\r\n\tmoveAlongCurve(amount) {\r\n\t\tthis.uniforms.pathOffset.value += amount;\r\n\t}\r\n}\r\n\r\n\r\n\r\n/******\r\n\t instancedFlow\r\n*******/\r\nconst matrix = new Matrix4();\r\nexport class InstancedFlow extends Flow {\r\n\tconstructor(count, curveCount, geometry, material) {\r\n\t\tconst mesh = new InstancedMesh(\r\n\t\t\tgeometry,\r\n\t\t\tmaterial,\r\n\t\t\tcount\r\n\t\t);\r\n\t\tmesh.instanceMatrix.setUsage(DynamicDrawUsage);\r\n\t\tsuper(mesh, curveCount);\r\n\r\n\t\tthis.offsets = new Array(count).fill(0);\r\n\t\tthis.whichCurve = new Array(count).fill(0);\r\n\t\tthis.count = count;\r\n\t}\r\n\twriteChanges(index) {\r\n\t\tmatrix.makeTranslation(\r\n\t\t\tthis.curveLengthArray[this.whichCurve[index]],\r\n\t\t\tthis.whichCurve[index],\r\n\t\t\tthis.offsets[index]\r\n\t\t);\r\n\t\tthis.object3D.setMatrixAt(index, matrix);\r\n\t\tthis.object3D.instanceMatrix.needsUpdate = true;\r\n\t}\r\n\tmoveIndividualAlongCurve(index, offset) {\r\n\t\tthis.offsets[index] += offset;\r\n\t\tthis.writeChanges(index);\r\n\t}\r\n\tsetCurve(index, curveNo) {\r\n\t\tif (isNaN(curveNo)) throw Error(\"curve index being set is Not a Number (NaN)\")\r\n\t\tthis.whichCurve[index] = curveNo;\r\n\t\tthis.writeChanges(index);\r\n\t}\r\n}","/* eslint-disable no-case-declarations */\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\r\nimport {\r\n\tWebGLRenderer,\r\n\tScene,\r\n\tPerspectiveCamera,\r\n\tAmbientLight,\r\n\tDirectionalLight,\r\n\tSphereGeometry,\r\n\tBackSide,\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tVector3,\r\n\tMeshLambertMaterial,\r\n\tPlaneGeometry,\r\n\tTextureLoader,\r\n\tGroup,\r\n\tRepeatWrapping,\r\n\tMeshPhongMaterial\r\n} from 'three';\r\nimport { VRButton } from 'three/examples/jsm/webxr/VRButton.js';\r\nimport WebXRPolyfill from 'webxr-polyfill';\r\nimport TWEEN from '@tweenjs/tween.js/dist/tween.esm.js';\r\nimport * as THREE from '../../node_modules/three/build/three.module.js'\r\nimport { InstancedFlow } from \"./flow.js\"\r\n\r\nconst sceneRadius = 500;\r\n\r\nconst cameraGroup = new Group();\r\n\r\nconst canvas = document.querySelector('canvas');\r\nconst context = canvas.getContext( 'webgl2', { antialias: true } );\r\nconst renderer = new WebGLRenderer({ canvas, context });\r\nrenderer.xr.enabled = true;\r\nrenderer.logarithmicDepthBuffer = true;\r\nrenderer.setPixelRatio(window.devicePixelRatio);\r\n\r\nconst scene = new Scene();\r\nscene.name = \"xrgarden\"\r\nwindow.scene = scene;\r\nconst camera = new PerspectiveCamera();\r\ncamera.far = 1000;\r\ncameraGroup.add(camera);\r\nscene.add(cameraGroup);\r\n\r\nconst controls = new OrbitControls(camera, renderer.domElement);\r\ncontrols.maxPolarAngle = Math.PI * 1;\r\ncontrols.maxDistance = 10;\r\ncamera.position.set(0, 1.6, -5);\r\ncontrols.target = new Vector3(0, 1, 0);\r\ncontrols.update();\r\n\r\nfunction onWindowResize() {\r\n\tconst w = window.innerWidth;\r\n\tconst h = window.innerHeight;\r\n\tcamera.aspect = window.innerWidth / window.innerHeight;\r\n\tcamera.updateProjectionMatrix();\r\n\trenderer.setSize(w, h);\r\n}\r\nwindow.addEventListener('resize', onWindowResize, false);\r\nonWindowResize();\r\n\r\nconst light = new DirectionalLight(0xffaa33);\r\nlight.position.set(-sceneRadius, sceneRadius, sceneRadius);\r\nlight.intensity = 1.0;\r\nscene.add(light);\r\n// Add the sun\r\nlight.add(\r\n\tnew Mesh(new SphereGeometry(sceneRadius/10, 32, 32), new MeshBasicMaterial({\r\n\t\tcolor: 0xffaa33\r\n\t}))\r\n)\r\n\r\nconst light2 = new AmbientLight(0x003973);\r\nlight2.intensity = 1.0;\r\nscene.add(light2);\r\n\r\nconst skygeometry = new SphereGeometry(sceneRadius, 50, 50, 0, 2 * Math.PI);\r\nconst skymaterial = new MeshBasicMaterial({\r\n\tside: BackSide,\r\n\tdepthWrite: false\r\n});\r\n\r\nskymaterial.onBeforeCompile = function (shader) {\r\n\tshader.vertexShader = shader.vertexShader.replace('#include <common>', '#include <common>\\n#define USE_UV');\r\n\tshader.fragmentShader = shader.fragmentShader.replace('#include <common>', `\r\n    #include <common>\r\n    #define USE_UV\r\n    `);\r\n\tshader.fragmentShader = shader.fragmentShader.replace('#include <map_fragment>', `\r\n        vec4 col1 = vec4( 249, 229, 180, 255 ) / 255.0;\r\n        vec4 col2 = vec4( 0, 57, 115, 255 ) / 255.0;\r\n        float mixAmount = 0.0;\r\n        if (vUv.y > 1) {\r\n            float newY = (vUv.y - 1) * 2.0;\r\n            mixAmount = sqrt(newY)*2.0;\r\n        } else {\r\n            col1 = vec4(0.6,0.6,0.6,1.0);\r\n\t\t}\r\n        diffuseColor *= mix(col1, col2, mixAmount);\r\n    `);\r\n};\r\nskymaterial.dithering = true;\r\nconst skysphere = new Mesh(skygeometry, skymaterial);\r\nskysphere.name = 'skysphere';\r\nscene.add(skysphere);\r\n\r\nconst floorTexture = new TextureLoader().load('https://cdn.glitch.com/3423c223-e1e5-450d-8cfa-2f5215104916%2Fmemphis-mini.png?v=1579618577700');\r\nfloorTexture.repeat.multiplyScalar(sceneRadius/5);\r\nfloorTexture.wrapS = floorTexture.wrapT = RepeatWrapping;\r\nconst floor = new Mesh(\r\n\tnew PlaneGeometry(sceneRadius*2,sceneRadius*2,50,50),\r\n\tnew MeshLambertMaterial({\r\n\t\tmap: floorTexture\r\n\t})\r\n);\r\nfloor.rotation.x = -Math.PI / 2;\r\nfloor.name = 'floor';\r\nscene.add(floor);\r\n\r\nconst waterTexture = new TextureLoader().load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/waternormals.jpg');\r\nwaterTexture.wrapS = waterTexture.wrapT = RepeatWrapping;\r\nwaterTexture.repeat.multiplyScalar(sceneRadius/50);\r\nconst water = new Mesh(\r\n\tnew PlaneGeometry(sceneRadius*2,sceneRadius*2,50,50),\r\n\tnew MeshPhongMaterial({\r\n\t\tnormalMap: waterTexture,\r\n\t\tshininess: 1,\r\n\t\tcolor: 0x8ab39f,\r\n\t\ttransparent: true,\r\n\t\topacity: 0.4\r\n\t})\r\n);\r\nwater.geometry.rotateX(-Math.PI / 2);\r\nwater.position.y = 5.0;\r\nscene.add(water);\r\n\r\nnew WebXRPolyfill();\r\nconst vrbutton = VRButton.createButton(renderer);\r\ndocument.body.appendChild(vrbutton);\r\nvrbutton.addEventListener('click', function () {\r\n\tif (!window.canaudio.checked) window.canaudio.click();\r\n});\r\n\r\nconst rafCallbacks = new Set();\r\n\r\nrafCallbacks.add(function (t) {\r\n\twater.material.normalMap.offset.x += 0.01 * Math.sin(t / 10000)/sceneRadius;\r\n\twater.material.normalMap.offset.y += 0.01 * Math.cos(t / 8000)/sceneRadius;\r\n\twater.material.normalScale.x = 10 * (0.8 + 1 * Math.cos(t / 1000));\r\n\twater.material.normalScale.y = 10 * (0.8 + 1 * Math.sin(t / 1200));\r\n\twater.position.y = 5.0 + 0.1 * Math.sin(t / 2000);\r\n});\r\n\r\n\r\n//控制器\r\nconst curveHandles = [];\r\nconst boxGeometry = new THREE.BoxGeometry( 0.1, 0.1, 0.1 );\r\nconst boxMaterial = new THREE.MeshBasicMaterial();\r\nlet controlFlow;\r\n\r\nconst curves = [\r\n\t[\r\n\t\t{ x: 1, y: 3, z: -1 },\r\n\t\t{ x: 3, y: 4, z: 3 },\r\n\t\t{ x: -4, y: 2, z: 3 },\r\n\t\t{ x: -1, y: 2, z: -4 },\r\n\t],\r\n\t[\r\n\t\t{ x: 1, y: 1, z: 0 },\r\n\t\t{ x: -2, y: 2, z: 0 },\r\n\t\t{ x: 4, y: 1, z: -1 },\r\n\t\t{ x: 3, y: 3, z: -3 },\r\n\t],\r\n\t[\r\n\t\t{ x: 1, y: 1, z: -2 },\r\n\t\t{ x: -3, y: 3, z: 3 },\r\n\t\t{ x: 1, y: 1, z: 1 },\r\n\t\t{ x: -1, y: 3, z: -4 },\r\n\t]\r\n].map( function ( curvePoints ) {\r\n\r\n\tconst curveVertices = curvePoints.map( function ( handlePos ) {\r\n\r\n\t\tconst handle = new THREE.Mesh( boxGeometry, boxMaterial );\r\n\t\thandle.position.copy( handlePos );\r\n\t\tcurveHandles.push( handle );\r\n\t\tscene.add( handle );\r\n\t\treturn handle.position;\r\n\r\n\t} );\r\n\r\n\tconst curve = new THREE.CatmullRomCurve3( curveVertices );\r\n\tcurve.curveType = 'centripetal';\r\n\tcurve.closed = true;\r\n\r\n\tconst points = curve.getPoints( 50 );\r\n\tconst line = new THREE.LineLoop(\r\n\t\tnew THREE.BufferGeometry().setFromPoints( points ),\r\n\t\tnew THREE.LineBasicMaterial( { color: 0x00ff00 } )\r\n\t);\r\n\r\n\tscene.add( line );\r\n\r\n\treturn {\r\n\t\tcurve,\r\n\t\tline\r\n\t};\r\n\r\n} );\r\n\r\n//控制器loader\r\nconst loader = new THREE.FontLoader();\r\nloader.load( 'assets/helvetiker_regular.typeface.json', function ( font ) {\r\n\r\n\tconst geometry = new THREE.TextGeometry( 'AUV', {\r\n\t\tfont: font,\r\n\t\tsize: 0.2,\r\n\t\theight: 0.05,\r\n\t\tcurveSegments: 12,\r\n\t\tbevelEnabled: true,\r\n\t\tbevelThickness: 0.02,\r\n\t\tbevelSize: 0.01,\r\n\t\tbevelOffset: 0,\r\n\t\tbevelSegments: 5,\r\n\t} );\r\n\r\n\tgeometry.rotateX( Math.PI );\r\n\r\n\tconst material = new THREE.MeshStandardMaterial( {\r\n\t\tcolor: 0x99ffff\r\n\t} );\r\n\r\n\tconst numberOfInstances = 3;\r\n\tcontrolFlow = new InstancedFlow( numberOfInstances, curves.length, geometry, material );\r\n\r\n\tcurves.forEach( function ( { curve }, i ) {\r\n\r\n\t\tcontrolFlow.updateCurve( i, curve );\r\n\t\tscene.add( controlFlow.object3D );\r\n\r\n\t} );\r\n\r\n\tfor ( let i = 0; i < numberOfInstances; i ++ ) {\r\n\r\n\t\tconst curveIndex = i % curves.length;\r\n\t\tcontrolFlow.setCurve( i, curveIndex );\r\n\t\tcontrolFlow.moveIndividualAlongCurve( i, i * 1 / numberOfInstances );\r\n\t\tcontrolFlow.object3D.setColorAt( i, new THREE.Color( 0xffffff * Math.random() ) );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//动画\r\nrenderer.setAnimationLoop(function (time) {\r\n\tTWEEN.update(time);\r\n\trafCallbacks.forEach(cb => cb(time));\r\n\trenderer.render(scene, camera);\r\n\tif( controlFlow ){\r\n\t\tcontrolFlow.moveAlongCurve( 0.002 );\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\nexport {\r\n\trenderer,\r\n\tscene,\r\n\trafCallbacks,\r\n\tcameraGroup,\r\n\tcamera,\r\n\tcontext,\r\n\twater,\r\n\tfloor,\r\n\tcontrols\r\n}","class VRButton {\n\n\tstatic createButton( renderer, options ) {\n\n\t\tif ( options ) {\n\n\t\t\tconsole.error( 'THREE.VRButton: The \"options\" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.' );\n\n\t\t}\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tfunction onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\trenderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { VRButton };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tCanvasTexture,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from \"../../../build/three.module.js\";\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\t\tthis.ktx2Loader = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetKTX2Loader: function ( ktx2Loader ) {\n\n\t\t\tthis.ktx2Loader = ktx2Loader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\t\t\tvar plugins = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager,\n\t\t\t\tktx2Loader: this.ktx2Loader\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\t\tfor ( var i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\t\tvar plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t\t// Remove this workaround if we move all the existing\n\t\t\t\t// extension handlers to plugin system\n\t\t\t\textensions[ plugin.name ] = true;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.setExtensions( extensions );\n\t\t\tparser.setPlugins( plugins );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\tGLTFLightsExtension.prototype._markDefs = function () {\n\n\t\tvar parser = this.parser;\n\t\tvar nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGLTFLightsExtension.prototype._loadLight = function ( lightIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar cacheKey = 'light:' + lightIndex;\n\t\tvar dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tvar json = parser.json;\n\t\tvar extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tvar lightDefs = extensions.lights || [];\n\t\tvar lightDef = lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t};\n\n\tGLTFLightsExtension.prototype.createNodeAttachment = function ( nodeIndex ) {\n\n\t\tvar self = this;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\t\tvar lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tvar lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\tfunction GLTFMaterialsTransmissionExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tGLTFMaterialsTransmissionExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t * (draft PR https://github.com/KhronosGroup/glTF/pull/1751)\n\t */\n\tfunction GLTFTextureBasisUExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tGLTFTextureBasisUExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ this.name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.setExtensions = function ( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t};\n\n\tGLTFParser.prototype.setPlugins = function ( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t};\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype._markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\tGLTFParser.prototype._addNodeRef = function ( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t};\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\tGLTFParser.prototype._getNodeRef = function ( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tvar ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t};\n\n\tGLTFParser.prototype._invokeOne = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t};\n\n\tGLTFParser.prototype._invokeAll = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar loader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tloader = options.manager.getHandler( source.uri );\n\n\t\t}\n\n\t\tif ( ! loader ) {\n\n\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t: this.textureLoader;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\tGLTFParser.prototype.loadTextureImage = function ( textureIndex, source, loader ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\t\tvar hasAlpha = true;\n\n\t\tif ( source.mimeType === 'image/jpeg' ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative — the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tvar colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tvar onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new CanvasTexture( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.clearcoatNormalScale.y = - material.clearcoatNormalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\tGLTFParser.prototype.getMaterialType = function ( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tGLTFParser.prototype.createUniqueName = function ( originalName ) {\n\n\t\tvar name = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tfor ( var i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = originalName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new Vector3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tvar nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\nexport { GLTFLoader };\n","/**\n * @webxr-input-profiles/motion-controllers 1.0.0 https://github.com/immersive-web/webxr-input-profiles\n */\n\nconst Constants = {\n  Handedness: Object.freeze({\n    NONE: 'none',\n    LEFT: 'left',\n    RIGHT: 'right'\n  }),\n\n  ComponentState: Object.freeze({\n    DEFAULT: 'default',\n    TOUCHED: 'touched',\n    PRESSED: 'pressed'\n  }),\n\n  ComponentProperty: Object.freeze({\n    BUTTON: 'button',\n    X_AXIS: 'xAxis',\n    Y_AXIS: 'yAxis',\n    STATE: 'state'\n  }),\n\n  ComponentType: Object.freeze({\n    TRIGGER: 'trigger',\n    SQUEEZE: 'squeeze',\n    TOUCHPAD: 'touchpad',\n    THUMBSTICK: 'thumbstick',\n    BUTTON: 'button'\n  }),\n\n  ButtonTouchThreshold: 0.05,\n\n  AxisTouchThreshold: 0.1,\n\n  VisualResponseProperty: Object.freeze({\n    TRANSFORM: 'transform',\n    VISIBILITY: 'visibility'\n  })\n};\n\n/**\n * @description Static helper function to fetch a JSON file and turn it into a JS object\n * @param {string} path - Path to JSON file to be fetched\n */\nasync function fetchJsonFile(path) {\n  const response = await fetch(path);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  } else {\n    return response.json();\n  }\n}\n\nasync function fetchProfilesList(basePath) {\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  const profileListFileName = 'profilesList.json';\n  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);\n  return profilesList;\n}\n\nasync function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {\n  if (!xrInputSource) {\n    throw new Error('No xrInputSource supplied');\n  }\n\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  // Get the list of profiles\n  const supportedProfilesList = await fetchProfilesList(basePath);\n\n  // Find the relative path to the first requested profile that is recognized\n  let match;\n  xrInputSource.profiles.some((profileId) => {\n    const supportedProfile = supportedProfilesList[profileId];\n    if (supportedProfile) {\n      match = {\n        profileId,\n        profilePath: `${basePath}/${supportedProfile.path}`,\n        deprecated: !!supportedProfile.deprecated\n      };\n    }\n    return !!match;\n  });\n\n  if (!match) {\n    if (!defaultProfile) {\n      throw new Error('No matching profile name found');\n    }\n\n    const supportedProfile = supportedProfilesList[defaultProfile];\n    if (!supportedProfile) {\n      throw new Error(`No matching profile name found and default profile \"${defaultProfile}\" missing.`);\n    }\n\n    match = {\n      profileId: defaultProfile,\n      profilePath: `${basePath}/${supportedProfile.path}`,\n      deprecated: !!supportedProfile.deprecated\n    };\n  }\n\n  const profile = await fetchJsonFile(match.profilePath);\n\n  let assetPath;\n  if (getAssetPath) {\n    let layout;\n    if (xrInputSource.handedness === 'any') {\n      layout = profile.layouts[Object.keys(profile.layouts)[0]];\n    } else {\n      layout = profile.layouts[xrInputSource.handedness];\n    }\n    if (!layout) {\n      throw new Error(\n        `No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`\n      );\n    }\n\n    if (layout.assetPath) {\n      assetPath = match.profilePath.replace('profile.json', layout.assetPath);\n    }\n  }\n\n  return { profile, assetPath };\n}\n\n/** @constant {Object} */\nconst defaultComponentValues = {\n  xAxis: 0,\n  yAxis: 0,\n  button: 0,\n  state: Constants.ComponentState.DEFAULT\n};\n\n/**\n * @description Converts an X, Y coordinate from the range -1 to 1 (as reported by the Gamepad\n * API) to the range 0 to 1 (for interpolation). Also caps the X, Y values to be bounded within\n * a circle. This ensures that thumbsticks are not animated outside the bounds of their physical\n * range of motion and touchpads do not report touch locations off their physical bounds.\n * @param {number} x The original x coordinate in the range -1 to 1\n * @param {number} y The original y coordinate in the range -1 to 1\n */\nfunction normalizeAxes(x = 0, y = 0) {\n  let xAxis = x;\n  let yAxis = y;\n\n  // Determine if the point is outside the bounds of the circle\n  // and, if so, place it on the edge of the circle\n  const hypotenuse = Math.sqrt((x * x) + (y * y));\n  if (hypotenuse > 1) {\n    const theta = Math.atan2(y, x);\n    xAxis = Math.cos(theta);\n    yAxis = Math.sin(theta);\n  }\n\n  // Scale and move the circle so values are in the interpolation range.  The circle's origin moves\n  // from (0, 0) to (0.5, 0.5). The circle's radius scales from 1 to be 0.5.\n  const result = {\n    normalizedXAxis: (xAxis * 0.5) + 0.5,\n    normalizedYAxis: (yAxis * 0.5) + 0.5\n  };\n  return result;\n}\n\n/**\n * Contains the description of how the 3D model should visually respond to a specific user input.\n * This is accomplished by initializing the object with the name of a node in the 3D model and\n * property that need to be modified in response to user input, the name of the nodes representing\n * the allowable range of motion, and the name of the input which triggers the change. In response\n * to the named input changing, this object computes the appropriate weighting to use for\n * interpolating between the range of motion nodes.\n */\nclass VisualResponse {\n  constructor(visualResponseDescription) {\n    this.componentProperty = visualResponseDescription.componentProperty;\n    this.states = visualResponseDescription.states;\n    this.valueNodeName = visualResponseDescription.valueNodeName;\n    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;\n\n    if (this.valueNodeProperty === Constants.VisualResponseProperty.TRANSFORM) {\n      this.minNodeName = visualResponseDescription.minNodeName;\n      this.maxNodeName = visualResponseDescription.maxNodeName;\n    }\n\n    // Initializes the response's current value based on default data\n    this.value = 0;\n    this.updateFromComponent(defaultComponentValues);\n  }\n\n  /**\n   * Computes the visual response's interpolation weight based on component state\n   * @param {Object} componentValues - The component from which to update\n   * @param {number} xAxis - The reported X axis value of the component\n   * @param {number} yAxis - The reported Y axis value of the component\n   * @param {number} button - The reported value of the component's button\n   * @param {string} state - The component's active state\n   */\n  updateFromComponent({\n    xAxis, yAxis, button, state\n  }) {\n    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);\n    switch (this.componentProperty) {\n      case Constants.ComponentProperty.X_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedXAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.Y_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedYAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.BUTTON:\n        this.value = (this.states.includes(state)) ? button : 0;\n        break;\n      case Constants.ComponentProperty.STATE:\n        if (this.valueNodeProperty === Constants.VisualResponseProperty.VISIBILITY) {\n          this.value = (this.states.includes(state));\n        } else {\n          this.value = this.states.includes(state) ? 1.0 : 0.0;\n        }\n        break;\n      default:\n        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);\n    }\n  }\n}\n\nclass Component {\n  /**\n   * @param {Object} componentId - Id of the component\n   * @param {Object} componentDescription - Description of the component to be created\n   */\n  constructor(componentId, componentDescription) {\n    if (!componentId\n     || !componentDescription\n     || !componentDescription.visualResponses\n     || !componentDescription.gamepadIndices\n     || Object.keys(componentDescription.gamepadIndices).length === 0) {\n      throw new Error('Invalid arguments supplied');\n    }\n\n    this.id = componentId;\n    this.type = componentDescription.type;\n    this.rootNodeName = componentDescription.rootNodeName;\n    this.touchPointNodeName = componentDescription.touchPointNodeName;\n\n    // Build all the visual responses for this component\n    this.visualResponses = {};\n    Object.keys(componentDescription.visualResponses).forEach((responseName) => {\n      const visualResponse = new VisualResponse(componentDescription.visualResponses[responseName]);\n      this.visualResponses[responseName] = visualResponse;\n    });\n\n    // Set default values\n    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);\n\n    this.values = {\n      state: Constants.ComponentState.DEFAULT,\n      button: (this.gamepadIndices.button !== undefined) ? 0 : undefined,\n      xAxis: (this.gamepadIndices.xAxis !== undefined) ? 0 : undefined,\n      yAxis: (this.gamepadIndices.yAxis !== undefined) ? 0 : undefined\n    };\n  }\n\n  get data() {\n    const data = { id: this.id, ...this.values };\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   * @param {Object} gamepad - The gamepad object from which the component data should be polled\n   */\n  updateFromGamepad(gamepad) {\n    // Set the state to default before processing other data sources\n    this.values.state = Constants.ComponentState.DEFAULT;\n\n    // Get and normalize button\n    if (this.gamepadIndices.button !== undefined\n        && gamepad.buttons.length > this.gamepadIndices.button) {\n      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];\n      this.values.button = gamepadButton.value;\n      this.values.button = (this.values.button < 0) ? 0 : this.values.button;\n      this.values.button = (this.values.button > 1) ? 1 : this.values.button;\n\n      // Set the state based on the button\n      if (gamepadButton.pressed || this.values.button === 1) {\n        this.values.state = Constants.ComponentState.PRESSED;\n      } else if (gamepadButton.touched || this.values.button > Constants.ButtonTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize x axis value\n    if (this.gamepadIndices.xAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.xAxis) {\n      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];\n      this.values.xAxis = (this.values.xAxis < -1) ? -1 : this.values.xAxis;\n      this.values.xAxis = (this.values.xAxis > 1) ? 1 : this.values.xAxis;\n\n      // If the state is still default, check if the xAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.xAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize Y axis value\n    if (this.gamepadIndices.yAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.yAxis) {\n      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];\n      this.values.yAxis = (this.values.yAxis < -1) ? -1 : this.values.yAxis;\n      this.values.yAxis = (this.values.yAxis > 1) ? 1 : this.values.yAxis;\n\n      // If the state is still default, check if the yAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.yAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Update the visual response weights based on the current component data\n    Object.values(this.visualResponses).forEach((visualResponse) => {\n      visualResponse.updateFromComponent(this.values);\n    });\n  }\n}\n\n/**\n  * @description Builds a motion controller with components and visual responses based on the\n  * supplied profile description. Data is polled from the xrInputSource's gamepad.\n  * @author Nell Waliczek / https://github.com/NellWaliczek\n*/\nclass MotionController {\n  /**\n   * @param {Object} xrInputSource - The XRInputSource to build the MotionController around\n   * @param {Object} profile - The best matched profile description for the supplied xrInputSource\n   * @param {Object} assetUrl\n   */\n  constructor(xrInputSource, profile, assetUrl) {\n    if (!xrInputSource) {\n      throw new Error('No xrInputSource supplied');\n    }\n\n    if (!profile) {\n      throw new Error('No profile supplied');\n    }\n\n    this.xrInputSource = xrInputSource;\n    this.assetUrl = assetUrl;\n    this.id = profile.profileId;\n\n    // Build child components as described in the profile description\n    this.layoutDescription = profile.layouts[xrInputSource.handedness];\n    this.components = {};\n    Object.keys(this.layoutDescription.components).forEach((componentId) => {\n      const componentDescription = this.layoutDescription.components[componentId];\n      this.components[componentId] = new Component(componentId, componentDescription);\n    });\n\n    // Initialize components based on current gamepad state\n    this.updateFromGamepad();\n  }\n\n  get gripSpace() {\n    return this.xrInputSource.gripSpace;\n  }\n\n  get targetRaySpace() {\n    return this.xrInputSource.targetRaySpace;\n  }\n\n  /**\n   * @description Returns a subset of component data for simplified debugging\n   */\n  get data() {\n    const data = [];\n    Object.values(this.components).forEach((component) => {\n      data.push(component.data);\n    });\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   */\n  updateFromGamepad() {\n    Object.values(this.components).forEach((component) => {\n      component.updateFromGamepad(this.xrInputSource.gamepad);\n    });\n  }\n}\n\nexport { Constants, MotionController, fetchProfile, fetchProfilesList };\n","import {\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tQuaternion,\n\tSphereBufferGeometry,\n} from \"../../../build/three.module.js\";\n\nimport { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nimport {\n\tConstants as MotionControllerConstants,\n\tfetchProfile,\n\tMotionController\n} from '../libs/motion-controllers.module.js';\n\nconst DEFAULT_PROFILES_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles';\nconst DEFAULT_PROFILE = 'generic-trigger';\n\nfunction XRControllerModel( ) {\n\n\tObject3D.call( this );\n\n\tthis.motionController = null;\n\tthis.envMap = null;\n\n}\n\nXRControllerModel.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: XRControllerModel,\n\n\tsetEnvironmentMap: function ( envMap ) {\n\n\t\tif ( this.envMap == envMap ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.envMap = envMap;\n\t\tthis.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = this.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Polls data from the XRInputSource and updates the model's components to match\n\t * the real world data\n\t */\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( ! this.motionController ) return;\n\n\t\t// Cause the MotionController to poll the Gamepad for data\n\t\tthis.motionController.updateFromGamepad();\n\n\t\t// Update the 3D model to reflect the button, thumbstick, and touchpad state\n\t\tObject.values( this.motionController.components ).forEach( ( component ) => {\n\n\t\t\t// Update node data based on the visual responses' current states\n\t\t\tObject.values( component.visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\t\tconst { valueNode, minNode, maxNode, value, valueNodeProperty } = visualResponse;\n\n\t\t\t\t// Skip if the visual response node is not found. No error is needed,\n\t\t\t\t// because it will have been reported at load time.\n\t\t\t\tif ( ! valueNode ) return;\n\n\t\t\t\t// Calculate the new properties based on the weight supplied\n\t\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.VISIBILITY ) {\n\n\t\t\t\t\tvalueNode.visible = value;\n\n\t\t\t\t} else if ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\t\tQuaternion.slerp(\n\t\t\t\t\t\tminNode.quaternion,\n\t\t\t\t\t\tmaxNode.quaternion,\n\t\t\t\t\t\tvalueNode.quaternion,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t\tvalueNode.position.lerpVectors(\n\t\t\t\t\t\tminNode.position,\n\t\t\t\t\t\tmaxNode.position,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n} );\n\n/**\n * Walks the model's tree to find the nodes needed to animate the components and\n * saves them to the motionContoller components for use in the frame loop. When\n * touchpads are found, attaches a touch dot to them.\n */\nfunction findNodes( motionController, scene ) {\n\n\t// Loop through the components and find the nodes needed for each components' visual responses\n\tObject.values( motionController.components ).forEach( ( component ) => {\n\n\t\tconst { type, touchPointNodeName, visualResponses } = component;\n\n\t\tif ( type === MotionControllerConstants.ComponentType.TOUCHPAD ) {\n\n\t\t\tcomponent.touchPointNode = scene.getObjectByName( touchPointNodeName );\n\t\t\tif ( component.touchPointNode ) {\n\n\t\t\t\t// Attach a touch dot to the touchpad.\n\t\t\t\tconst sphereGeometry = new SphereBufferGeometry( 0.001 );\n\t\t\t\tconst material = new MeshBasicMaterial( { color: 0x0000FF } );\n\t\t\t\tconst sphere = new Mesh( sphereGeometry, material );\n\t\t\t\tcomponent.touchPointNode.add( sphere );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( `Could not find touch dot, ${component.touchPointNodeName}, in touchpad component ${component.id}` );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Loop through all the visual responses to be applied to this component\n\t\tObject.values( visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\tconst { valueNodeName, minNodeName, maxNodeName, valueNodeProperty } = visualResponse;\n\n\t\t\t// If animating a transform, find the two nodes to be interpolated between.\n\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\tvisualResponse.minNode = scene.getObjectByName( minNodeName );\n\t\t\t\tvisualResponse.maxNode = scene.getObjectByName( maxNodeName );\n\n\t\t\t\t// If the extents cannot be found, skip this animation\n\t\t\t\tif ( ! visualResponse.minNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${minNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! visualResponse.maxNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${maxNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If the target node cannot be found, skip this animation\n\t\t\tvisualResponse.valueNode = scene.getObjectByName( valueNodeName );\n\t\t\tif ( ! visualResponse.valueNode ) {\n\n\t\t\t\tconsole.warn( `Could not find ${valueNodeName} in the model` );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n}\n\nfunction addAssetSceneToControllerModel( controllerModel, scene ) {\n\n\t// Find the nodes needed for animation and cache them on the motionController.\n\tfindNodes( controllerModel.motionController, scene );\n\n\t// Apply any environment map that the mesh already has set.\n\tif ( controllerModel.envMap ) {\n\n\t\tscene.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = controllerModel.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// Add the glTF scene to the controllerModel.\n\tcontrollerModel.add( scene );\n\n}\n\nvar XRControllerModelFactory = ( function () {\n\n\tfunction XRControllerModelFactory( gltfLoader = null ) {\n\n\t\tthis.gltfLoader = gltfLoader;\n\t\tthis.path = DEFAULT_PROFILES_PATH;\n\t\tthis._assetCache = {};\n\n\t\t// If a GLTFLoader wasn't supplied to the constructor create a new one.\n\t\tif ( ! this.gltfLoader ) {\n\n\t\t\tthis.gltfLoader = new GLTFLoader();\n\n\t\t}\n\n\t}\n\n\tXRControllerModelFactory.prototype = {\n\n\t\tconstructor: XRControllerModelFactory,\n\n\t\tcreateControllerModel: function ( controller ) {\n\n\t\t\tconst controllerModel = new XRControllerModel();\n\t\t\tlet scene = null;\n\n\t\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\t\tconst xrInputSource = event.data;\n\n\t\t\t\tif ( xrInputSource.targetRayMode !== 'tracked-pointer' || ! xrInputSource.gamepad ) return;\n\n\t\t\t\tfetchProfile( xrInputSource, this.path, DEFAULT_PROFILE ).then( ( { profile, assetPath } ) => {\n\n\t\t\t\t\tcontrollerModel.motionController = new MotionController(\n\t\t\t\t\t\txrInputSource,\n\t\t\t\t\t\tprofile,\n\t\t\t\t\t\tassetPath\n\t\t\t\t\t);\n\n\t\t\t\t\tconst cachedAsset = this._assetCache[ controllerModel.motionController.assetUrl ];\n\t\t\t\t\tif ( cachedAsset ) {\n\n\t\t\t\t\t\tscene = cachedAsset.scene.clone();\n\n\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( ! this.gltfLoader ) {\n\n\t\t\t\t\t\t\tthrow new Error( `GLTFLoader not set.` );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.gltfLoader.setPath( '' );\n\t\t\t\t\t\tthis.gltfLoader.load( controllerModel.motionController.assetUrl, ( asset ) => {\n\n\t\t\t\t\t\t\tthis._assetCache[ controllerModel.motionController.assetUrl ] = asset;\n\n\t\t\t\t\t\t\tscene = asset.scene.clone();\n\n\t\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t() => {\n\n\t\t\t\t\t\t\tthrow new Error( `Asset ${controllerModel.motionController.assetUrl} missing or malformed.` );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} ).catch( ( err ) => {\n\n\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\t\tcontrollerModel.motionController = null;\n\t\t\t\tcontrollerModel.remove( scene );\n\t\t\t\tscene = null;\n\n\t\t\t} );\n\n\t\t\treturn controllerModel;\n\n\t\t}\n\n\t};\n\n\treturn XRControllerModelFactory;\n\n} )();\n\nexport { XRControllerModelFactory };\n","import {\r\n\trenderer, rafCallbacks\r\n} from '../scene.js';\r\n\r\nconst prevGamePads = new Map();\r\nconst gamepad = new EventTarget();\r\n\r\nfunction dispatchEvent(type, detail) {\r\n\tconst specificEvent = new CustomEvent(type, {detail});\r\n\r\n\tconst generalDetail = {type};\r\n\tObject.assign(generalDetail, detail);\r\n\tconst generalEvent = new CustomEvent('gamepadInteraction', {detail: generalDetail});\r\n\r\n\tgamepad.dispatchEvent(specificEvent);\r\n\tgamepad.dispatchEvent(generalEvent);\r\n}\r\n\r\nrafCallbacks.add(() => {\r\n\tconst session = renderer.xr.getSession();\r\n\tlet i = 0;\r\n\tif (session) for (const source of session.inputSources) {\r\n\t\tif (!source.gamepad) continue;\r\n\t\tconst controller = renderer.xr.getController(i++);\r\n\t\tconst old = prevGamePads.get(source);\r\n\t\tconst data = {\r\n\t\t\tbuttons: source.gamepad.buttons.map(b => b.value),\r\n\t\t\taxes: source.gamepad.axes.slice(0)\r\n\t\t};\r\n\t\tif (old) {\r\n\t\t\tdata.buttons.forEach((value,i)=>{\r\n\t\t\t\tif (value !== old.buttons[i]) {\r\n\t\t\t\t\tif (value === 1) {\r\n\t\t\t\t\t\tdispatchEvent(`button${i}Down`, {value, source, controller,data});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatchEvent(`button${i}Up`, {value, source, controller,data});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdata.axes.forEach((value,i)=>{\r\n\t\t\t\tif (value !== old.axes[i]) {\r\n\t\t\t\t\tdispatchEvent(`axes${i}Move`, {value, source, controller,data});\r\n\t\t\t\t\tif (old.axes[i] === 0) {\r\n\t\t\t\t\t\tdispatchEvent(`axes${i}MoveStart`, {value, source, controller,data});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Math.abs(old.axes[i]) < 0.5 && Math.abs(value) > 0.5) {\r\n\t\t\t\t\t\tdispatchEvent(`axes${i}MoveMiddle`, {value, source, controller,data});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (value === 0) {\r\n\t\t\t\t\t\tdispatchEvent(`axes${i}MoveEnd`, {value, source, controller,data});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tprevGamePads.set(source, data);\r\n\t}\r\n});\r\n\r\nexport {\r\n\tgamepad\r\n}","import {\r\n\tcameraGroup, camera\r\n} from '../../scene.js';\r\nimport {\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tSphereBufferGeometry,\r\n\tBackSide\r\n} from 'three';\r\n\r\nimport TWEEN from '@tweenjs/tween.js/dist/tween.esm.js';\r\n\r\nfunction locomotion(offset) {\r\n\r\n\tblinkerSphere.visible = true;\r\n\tblinkerSphere.material.opacity = 0;\r\n\tnew TWEEN.Tween(blinkerSphere.material)\r\n\t\t.to({opacity: 1}, 200)\r\n\t\t.easing(TWEEN.Easing.Quadratic.Out)\r\n\t\t.onComplete(function () {\r\n\r\n\t\t\t// Do the teleport\r\n\t\t\tcameraGroup.position.add(offset);\r\n\r\n\t\t\t// Fade back\r\n\t\t\tnew TWEEN.Tween(blinkerSphere.material)\r\n\t\t\t\t.to({opacity: 0}, 200)\r\n\t\t\t\t.onComplete(() => blinkerSphere.visible = false)\r\n\t\t\t\t.start();\r\n\t\t})\r\n\t\t.start();\r\n}\r\n\r\nconst blinkerSphereGeometry = new SphereBufferGeometry(0.3, 16, 16);\r\nblinkerSphereGeometry.translate(0,0.3,0);\r\nconst blinkerSphereMaterial = new MeshBasicMaterial({\r\n\tside: BackSide,\r\n\tcolor: 0x000000,\r\n\ttransparent: true\r\n});\r\nconst blinkerSphere = new Mesh( blinkerSphereGeometry, blinkerSphereMaterial );\r\nblinkerSphere.rotation.set(Math.PI/2, 0, 0);\r\nblinkerSphere.position.set(0, 0, -0.3);\r\nblinkerSphere.visible = false;\r\ncamera.add(blinkerSphere);\r\nblinkerSphereMaterial.renderOrder = -101;\r\n\r\nexport {\r\n\tlocomotion\r\n}","import {\r\n\tscene, renderer, rafCallbacks, cameraGroup, camera\r\n} from '../scene.js';\r\nimport { XRControllerModelFactory } from 'three/examples/jsm/webxr/XRControllerModelFactory.js';\r\nimport {\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tVector3,\r\n\tPointLight,\r\n\tPlaneGeometry,\r\n\tTextureLoader,\r\n\tBufferGeometry,\r\n\tBufferAttribute,\r\n\tLineBasicMaterial,\r\n\tAdditiveBlending,\r\n\tLine\r\n} from 'three';\r\nimport {\r\n\tgamepad\r\n} from './gamepad.js';\r\n\r\nimport {\r\n\tlocomotion\r\n} from './locomotion/fade.js';\r\n\r\nfunction positionAtT(inVec,t,p,v,g) {\r\n\tinVec.copy(p);\r\n\tinVec.addScaledVector(v,t);\r\n\tinVec.addScaledVector(g,0.5*t**2);\r\n\treturn inVec;\r\n}\r\n\r\n// Utility Vectors\r\nconst g = new Vector3(0,-9.8,0);\r\nconst tempVec = new Vector3();\r\nconst tempVec1 = new Vector3();\r\nconst tempVecP = new Vector3();\r\nconst tempVecV = new Vector3();\r\n\r\n// The guideline\r\nconst lineSegments=10;\r\nconst lineGeometry = new BufferGeometry();\r\nconst lineGeometryVertices = new Float32Array((lineSegments +1) * 3);\r\nlineGeometryVertices.fill(0);\r\nconst lineGeometryColors = new Float32Array((lineSegments +1) * 3);\r\nlineGeometryColors.fill(0.5);\r\nlineGeometry.setAttribute('position', new BufferAttribute(lineGeometryVertices, 3));\r\nlineGeometry.setAttribute('color', new BufferAttribute(lineGeometryColors, 3));\r\nconst lineMaterial = new LineBasicMaterial({ vertexColors: true, blending: AdditiveBlending });\r\nconst guideline = new Line( lineGeometry, lineMaterial );\r\n\r\n// The light at the end of the line\r\nconst guidelight = new PointLight(0xffeeaa, 0, 2);\r\n\r\n// The target on the ground\r\nconst guidespriteTexture = new TextureLoader().load('./assets/target.png');\r\nconst guidesprite = new Mesh(\r\n\tnew PlaneGeometry(0.3, 0.3, 1, 1),\r\n\tnew MeshBasicMaterial({\r\n\t\tmap: guidespriteTexture,\r\n\t\tblending: AdditiveBlending,\r\n\t\tcolor: 0x555555,\r\n\t\ttransparent: true\r\n\t})\r\n);\r\nguidesprite.rotation.x = -Math.PI/2;\r\n\r\nconst controller1 = renderer.xr.getController(0);\r\ncontroller1.addEventListener('selectstart', onSelectStart);\r\ncontroller1.addEventListener('selectend', onSelectEnd);\r\ncameraGroup.add(controller1);\r\nlet guidingController = null;\r\n\r\nconst controller2 = renderer.xr.getController(1);\r\ncontroller2.addEventListener('selectstart', onSelectStart);\r\ncontroller2.addEventListener('selectend', onSelectEnd);\r\ncameraGroup.add(controller2);\r\n\r\nconst controllerModelFactory = new XRControllerModelFactory();\r\n\r\nconst controllerGrip1 = renderer.xr.getControllerGrip(0);\r\nconst model1 = controllerModelFactory.createControllerModel( controllerGrip1 );\r\ncontrollerGrip1.add( model1 );\r\ncameraGroup.add( controllerGrip1 );\r\n\r\nconst controllerGrip2 = renderer.xr.getControllerGrip( 1 );\r\nconst model2 = controllerModelFactory.createControllerModel( controllerGrip2 );\r\ncontrollerGrip2.add( model2 );\r\ncameraGroup.add( controllerGrip2 );\r\n\r\nfunction onSelectStart() {\r\n\tguidingController = this;\r\n\tguidelight.intensity = 1;\r\n\tthis.add(guideline);\r\n\tscene.add(guidesprite);\r\n}\r\n\r\nfunction onSelectEnd() {\r\n\tif (guidingController === this) {\r\n\r\n\t\t// first work out vector from feet to cursor\r\n\r\n\t\t// feet position\r\n\t\tconst feetPos = renderer.xr.getCamera(camera).getWorldPosition(tempVec);\r\n\t\tfeetPos.y = 0;\r\n\r\n\t\t// cursor position\r\n\t\tconst p = guidingController.getWorldPosition(tempVecP);\r\n\t\tconst v = guidingController.getWorldDirection(tempVecV);\r\n\t\tv.multiplyScalar(6);\r\n\t\tconst t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\r\n\t\tconst cursorPos = positionAtT(tempVec1,t,p,v,g);\r\n\r\n\t\t// Offset\r\n\t\tconst offset = cursorPos.addScaledVector(feetPos ,-1);\r\n\r\n\t\t// Do the locomotion\r\n\t\tlocomotion(offset);\r\n\r\n\t\t// clean up\r\n\t\tguidingController = null;\r\n\t\tguidelight.intensity = 0;\r\n\t\tthis.remove(guideline);\r\n\t\tscene.remove(guidesprite);\r\n\t}\r\n}\r\n\r\nrafCallbacks.add(() => {\r\n\tif (guidingController) {\r\n\t\t// Controller start position\r\n\t\tconst p = guidingController.getWorldPosition(tempVecP);\r\n\r\n\t\t// Set Vector V to the direction of the controller, at 1m/s\r\n\t\tconst v = guidingController.getWorldDirection(tempVecV);\r\n\r\n\t\t// Scale the initial velocity to 6m/s\r\n\t\tv.multiplyScalar(6);\r\n\r\n\t\t// Time for tele ball to hit ground\r\n\t\tconst t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\r\n\r\n\t\tconst vertex = tempVec.set(0,0,0);\r\n\t\tfor (let i=1; i<=lineSegments; i++) {\r\n\r\n\t\t\t// set vertex to current position of the virtual ball at time t\r\n\t\t\tpositionAtT(vertex,i*t/lineSegments,p,v,g);\r\n\t\t\tguidingController.worldToLocal(vertex);\r\n\t\t\tvertex.toArray(lineGeometryVertices,i*3);\r\n\t\t}\r\n\t\tguideline.geometry.attributes.position.needsUpdate = true;\r\n\r\n\t\t// Place the light and sprite near the end of the poing\r\n\t\tpositionAtT(guidelight.position,t*0.98,p,v,g);\r\n\t\tpositionAtT(guidesprite.position,t*0.98,p,v,g);\r\n\t}\r\n});\r\n\r\nfunction handleMove({detail}) {\r\n\t// Turn left\r\n\tif (detail.value > 0) {\r\n\t\tcameraGroup.rotation.y -= Math.PI/4;\r\n\t}\r\n\t// Turn right\r\n\tif (detail.value < 0) {\r\n\t\tcameraGroup.rotation.y += Math.PI/4;\r\n\t}\r\n}\r\ngamepad.addEventListener('axes0MoveMiddle', handleMove, true);\r\ngamepad.addEventListener('axes2MoveMiddle', handleMove, true);\r\n\r\nfunction handleUp({detail}) {\r\n\tif (detail.value < 0) {\r\n\t\tonSelectStart.bind(detail.controller)();\r\n\t}\r\n}\r\nfunction handleUpEnd({detail}) {\r\n\tonSelectEnd.bind(detail.controller)();\r\n}\r\ngamepad.addEventListener('axes1MoveMiddle', handleUp, true);\r\ngamepad.addEventListener('axes3MoveMiddle', handleUp, true);\r\ngamepad.addEventListener('axes1MoveEnd', handleUpEnd, true);\r\ngamepad.addEventListener('axes3MoveEnd', handleUpEnd, true);\r\n\r\nexport {\r\n\tcontroller1,\r\n\tcontroller2,\r\n\tcontrollerGrip1,\r\n\tcontrollerGrip2\r\n}","import { Vector3 } from \"three\";\r\nconst curveData = JSON.parse(\"[[[-1,0.15,1],[-1,0.15,-1],[-1.181,0,-2.783],[1.019,0.15,-2.352],[3.143,0.15,-1],[2,0.15,2]],[[0.585,0,4.602],[0.949,0.15,2.508],[-0.181,0,2.341],[0,0.15,1],[-1,0.15,-2],[-2.324,0,-1.334],[-2,0.15,1],[-3,0.15,4]],[[7.609,0.15,0.07],[10.305,0.15,0.851],[7.943,0.15,3.415],[5.731,0,4.937],[4.372,0,2.548],[5.874,0.15,1.987]],[[0.48,0,-3.013],[-0.927,0,-3.178],[-1.662,0,-2.851],[-2.895,0,-3.53],[-2.153,0,-5.519],[-0.731,0,-6.387],[0.406,0,-5.602],[0.845,0,-4.414]],[[-14.143,0,-1.582],[-12.974,0,-4.005],[-11.093,0,-4.994],[-8.276,0,-6.303],[-6.037,0,-5.134],[-5.598,0,-2.426],[-6.756,0,-0.779],[-9.308,0,-1.146],[-12.407,0,-0.196]],[[-11.268,0,3.552],[-8.877,0,4.241],[-8.752,0,2.78],[-7.076,0,2.479],[-4.63,0,3.15],[-3.283,0,1.436],[-2.555,0,0.182],[-3.448,0,-0.893],[-5.919,0,-0.658],[-7.421,0,0.33],[-9.554,0,-0.223],[-11.381,0,0.569]],[[-2.544,0,8.43],[-1.779,0,5.972],[-3.337,0,6.654],[-4.747,0,5.874],[-3.961,0,4.454],[-5.661,0,4.084],[-7.603,0,3.953],[-8.199,0,4.645],[-9.519,0,5.208],[-10.295,0,6.14],[-9.092,0,8.563],[-8.171,0,9.79],[-7.17,0,9.577],[-7.766,0,8.75],[-7.081,0,6.775],[-5.739,0,8.582],[-7.303,0,10.329]],[[-0.981,0,8.102],[-1.071,0,6.366],[3.132,0,4.779],[4.68,0,6.075],[3.931,0,8.25],[2.431,0,9.101],[0.694,0,7.657],[0.506,0,5.367],[3.035,0,5.493],[3.472,0,7.077],[2.381,0,7.836],[1.624,0,7.307]],[[-7.099,0,-12.514],[-5.901,0,-11.888],[-4.256,0,-10.233],[-6.128,0,-8.909],[-8.381,0,-10.521],[-7.53,0,-11.605]],[[3.87,0,-4.785],[5.653,0,-5.735],[7.329,0,-3.98],[6.057,0,-2.805],[3.998,0,-3.511]],[[5.328,0,6.344],[8.128,0,4.969],[9.063,0,7.791],[7.52,0,9.222],[5.288,0,8.956]],[[-7.21,0,-2.618],[-9.013,0,-3.601],[-10.172,0,-3.451],[-11.815,0,-6.614],[-13.207,0,-4.267],[-12.216,0,-3.248],[-12.023,0,-2.199],[-11.49,0,-0.99],[-10.077,0,-1.343],[-8.047,0,-1.694]],[[2.511,0,0.777],[2.704,0,-1.219],[0.312,0,-1.598],[0.46,0,0.008]],[[3.555,0,2.104],[3.226,0,0.983],[3.89,0,-0.925],[2.138,0,-2.237],[3.546,0,-3.144],[5.016,0,-2.35],[7.103,0,-2.382],[8.051,0,-1.758],[7.27,0,-0.42],[6.4,0,0.731],[5.509,0,1.609]],[[-10.346,0,3.433],[-10.866,0,2.243],[-10.492,0,0.366],[-8.583,0,0.556],[-8.364,0,1.895],[-9.473,0,3.43]],[[-7.572,0,1.525],[-6.665,0,0.787],[-5.618,0,-0.071],[-4.262,0,-0.293],[-4.249,0,0.875],[-3.816,0,1.763],[-5.145,0,2.699],[-6.298,0,2.251]],[[1.308,0,4.122],[1.6,0,3.036],[2.286,0,2.147],[3.58,0,2.658],[3.905,0,3.691],[3.346,0,4.412],[1.965,0,4.334]],[[-4.538,0,4.823],[-5.207,0,4.535],[-7.154,0,4.802],[-8.455,0,6.313],[-7.628,0,6.537],[-5.909,0,6.584],[-5.201,0,8.037],[-4.204,0,8.502],[-3.079,0,8.015],[-2.168,0,7.196],[-3.26,0,6.985],[-4.817,0,6.435],[-5.08,0,5.701]],[[-1.812,0,2.236],[-0.852,0,1.788],[-0.637,0,2.516],[0.672,0,2.919],[0.481,0,3.999],[-1.125,0,4.368],[-2.406,0,4.044]],[[-4.541,0,-2.186],[-3.62,0,-2.669],[-3.033,0,-1.838],[-3.649,0,-1.37]],[[1.18,0,-12.513],[2.768,0,-10.997],[3.464,0,-8.367],[1.437,0,-7.586],[0.156,0,-7.036],[-0.887,0,-8.682],[0.109,0,-10.614]],[[2.353,0,-5.524],[1.879,0,-6.822],[3.422,0,-7.657],[-1.599,0,-11.696],[-1.172,0,-10.717],[-2.005,0,-8.23],[-3.473,0,-6.588],[-5.197,0,-6.988],[-5.462,0,-8.365],[-3.999,0,-9.301],[-4.063,0,-11.428]],[[2.673,0,-7.133],[4.413,0,-7.885],[5.14,0,-6.248],[4.198,0,-5.599],[3.419,0,-5.143],[3.345,0,-4.144],[1.618,0,-3.875],[1.06,0,-4.785],[1.036,0,-6.336]],[[6.979,0,-9.945],[7.506,0,-4.59],[6.669,0,-6.427],[5.048,0,-8.403],[3.409,0,-10.188],[1.965,0,-12.822]],[[8.019,0,-3.865],[10.063,0,-3.804],[11.247,0,-5.626],[11.025,0,-4.073],[12.51,0,-5.346],[11.998,0,-3.846],[14.276,0,-3.373],[12.933,0,-2.573],[13.905,0,-1.157],[12.624,0,-1.534],[11.721,0,-0.445],[10.423,0,-1.439],[8.728,0,-3.016],[9.712,0,-4.664],[7.765,0,-5.505]],[[12.206,0,1.27],[12.956,0,2.156],[11.434,0,2.824],[13.371,0,3.806],[14.251,0,5.444],[12.494,0,6.359],[10.743,0,7.531],[10.03,0,6.089],[8.921,0,4.48]]]\");\r\nconst lilyPad1Data = JSON.parse(\"[[-8.166,-1.184,-3.625],[0.759,-0.118,0.201],[2.127,0,1.745],[-2.644,7.108,-0.629],[-8.293,0,4.19],[-4.026,0,6.005],[3.061,0,7.008],[6.414,0,-3.748],[5.725,0,-3.251],[0.736,0,-8.463],[0.716,0,-9.431]]\");\r\nconst lilyPad2Data = JSON.parse(\"[[-0.728,0,3.497],[-1.483,0,3.603],[7.124,0,2.894],[7.823,0,1.236],[-8.2,0,-3.662],[-7.197,0,-3.354],[-7.013,0,3.543],[-7.788,0,2.617],[-3.806,0,7.43],[-7.295,0,5.788],[1.6,0,7.936],[2.071,0,6.071],[6.452,0,6.896],[7.638,0,7.418],[11.143,0,5.576],[11.766,0,4.914],[12.005,0,-1.567],[11.59,0,-2.894],[-6.432,0,-10.409],[-6.034,0,-10.763],[2.065,0,-0.56],[1.382,0,-0.861],[5.85,0,-0.066],[4.992,0,0.311]]\");\r\n\r\nexport const curves = curveData.map((curve) =>\r\n\tcurve.map((vertex) => new Vector3().fromArray(vertex))\r\n);\r\n\r\nexport const lilyPad1 = lilyPad1Data.map((vertex) => new Vector3().fromArray(vertex));\r\nexport const lilyPad2 = lilyPad2Data.map((vertex) => new Vector3().fromArray(vertex));","import { BackSide } from \"three\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\r\nconst loader = new GLTFLoader();\r\n\r\nasync function loadModels() {\r\n\t// Forest from Google Poly, https://poly.google.com/view/2_fv3tn3NG_\r\n\tconst { scene: trees } = await new Promise((resolve) =>\r\n\t\tloader.load(\"./assets/forest.glb\", resolve)\r\n\t);\r\n\tconst flotsam = trees.children[0];\r\n\tflotsam.position.y = 0;\r\n\tflotsam.material.side = BackSide;\r\n\tflotsam.material.transparent = true;\r\n\tflotsam.material.opacity = 0.5;\r\n\r\n\t// LilyPad by Poly by Google, https://poly.google.com/view/0-_GjMekeob\r\n\tconst { scene: lilyPad1 } = await new Promise((resolve) =>\r\n\t\tloader.load(\"./assets/LilyPad.glb\", resolve)\r\n\t);\r\n\r\n\tconst { scene: lilyPad2 } = await new Promise((resolve) =>\r\n\t\tloader.load(\"./assets/LilyPad2.glb\", resolve)\r\n\t);\r\n\r\n\t// Fish by RunemarkStudio, https://sketchfab.com/3d-models/koi-fish-8ffded4f28514e439ea0a26d28c1852a\r\n\tconst { scene: fish } = await new Promise((resolve) =>\r\n\t\tloader.load(\"./assets/fish.glb\", resolve)\r\n\t);\r\n\r\n\treturn {\r\n\t\tfish,\r\n\t\tlilyPad2,\r\n\t\tlilyPad1,\r\n\t\ttrees,\r\n\t\tflotsam\r\n\t};\r\n}\r\n//这里返回的时loadModels方法执行的结果，而不是该方法本身\r\nexport const models = loadModels();","import { Vector3 } from 'three';\r\nimport { rafCallbacks, camera } from './scene.js';\r\n\r\n/* global ResonanceAudio */\r\n// Notes in the key of G\r\nconst fileNames = [\r\n\t\"assets/piano/piano_mf_4_G.mp3\",\r\n\t// \"assets/piano/piano_mf_5_Ab.mp3\",\r\n\t\"assets/piano/piano_mf_5_A.mp3\",\r\n\t// \"assets/piano/piano_mf_5_Bb.mp3\",\r\n\t\"assets/piano/piano_mf_5_B.mp3\",\r\n\t\"assets/piano/piano_mf_5_C.mp3\",\r\n\t// \"assets/piano/piano_mf_5_Db.mp3\",\r\n\t\"assets/piano/piano_mf_5_D.mp3\",\r\n\t// \"assets/piano/piano_mf_5_Eb.mp3\",\r\n\t\"assets/piano/piano_mf_5_E.mp3\",\r\n\t// \"assets/piano/piano_mf_5_F.mp3\",\r\n\t\"assets/piano/piano_mf_5_Gb.mp3\",\r\n\t\"assets/piano/piano_mf_5_G.mp3\",\r\n];\r\nconst notes = new Map();\r\n\r\nclass Note {\r\n\tconstructor(audioElement, source) {\r\n\t\tthis.audioElement = audioElement;\r\n\t\tthis.source = source;\r\n\t}\r\n\r\n\tsetLocationAndPlay(vector3) {\r\n\t\tthis.source.setPosition(vector3.x, vector3.y, vector3.z);\r\n\t\tthis.audioElement.play();\r\n\t}\r\n}\r\n\r\nlet hasInit = false;\r\n\r\nexport function init() {\r\n\tif (hasInit) return;\r\n\thasInit = true;\r\n\r\n\t// Create an AudioContext\r\n\tconst audioContext = new AudioContext();\r\n\tconst resonanceAudioScene = new ResonanceAudio(audioContext);\r\n\tresonanceAudioScene.output.connect(audioContext.destination);\r\n\r\n\t// Details: https://resonance-audio.github.io/resonance-audio/reference/web/Utils.html#.ROOM_MATERIAL_COEFFICIENTS\r\n\tconst roomDimensions = {\r\n\t\twidth: 30,\r\n\t\theight: 2.5,\r\n\t\tdepth: 30,\r\n\t};\r\n\tconst roomMaterials = {\r\n\t\tleft: \"transparent\",\r\n\t\tright: \"transparent\",\r\n\t\tfront: \"transparent\",\r\n\t\tback: \"transparent\",\r\n\t\tdown: \"water-or-ice-surface\",\r\n\t\tup: \"transparent\",\r\n\t};\r\n\tresonanceAudioScene.setRoomProperties(roomDimensions, roomMaterials);\r\n\r\n\tconst tempVector1 = new Vector3();\r\n\tconst tempUpVector = new Vector3();\r\n\trafCallbacks.add(function () {\r\n\t\ttempVector1.set(0, 0, -1);\r\n\t\ttempVector1.applyQuaternion(camera.quaternion);\r\n\t\ttempUpVector.set(0, 1, 0);\r\n\t\ttempUpVector.applyQuaternion(camera.quaternion);\r\n\t\tresonanceAudioScene.setListenerOrientation(\r\n\t\t\ttempVector1.x,\r\n\t\t\ttempVector1.y,\r\n\t\t\ttempVector1.z,\r\n\t\t\ttempUpVector.x,\r\n\t\t\ttempUpVector.y,\r\n\t\t\ttempUpVector.z\r\n\t\t);\r\n\t\tresonanceAudioScene.setListenerPosition(\r\n\t\t\tcamera.position.x,\r\n\t\t\tcamera.position.y,\r\n\t\t\tcamera.position.z\r\n\t\t);\r\n\t});\r\n\r\n\tfor (const filename of fileNames) {\r\n\t\tconst audioElement = document.createElement(\"audio\");\r\n\t\taudioElement.src = filename;\r\n\t\tconst audioElementSource = audioContext.createMediaElementSource(\r\n\t\t\taudioElement\r\n\t\t);\r\n\t\tconst source = resonanceAudioScene.createSource();\r\n\t\taudioElementSource.connect(source.input);\r\n\r\n\t\tconst note = new Note(audioElement, source);\r\n\t\tnotes.set(filename, note);\r\n\t}\r\n}\r\n\r\nexport function playRandomNote(positionRelativeToHead) {\r\n\tif (!hasInit) return;\r\n\tconst index = Math.floor(Math.random() * fileNames.length);\r\n\tconst note = notes.get(fileNames[index]);\r\n\tnote.setLocationAndPlay(positionRelativeToHead);\r\n}\r\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","//布景模块\r\nimport { renderer, scene, camera, rafCallbacks, water } from \"./lib/scene.js\";\r\n// Adds locomotion\r\nimport \"./lib/controllers/controllers.js\";\r\n\r\nimport { InstancedFlow } from \"./lib/flow.js\";\r\n//轨迹加载模块： 从JSON中导出三组点向量数组：curves、lilyPad1、lilyPad2\r\nimport { curves, lilyPad1, lilyPad2 } from \"./lib/positions.js\";\r\n//模型加载 模块\r\nimport { models } from \"./lib/meshes.js\";\r\n//音频加载 模块\r\nimport { init as audioInit, playRandomNote } from \"./lib/audio.js\";\r\n\r\nwindow.canaudio.checked = false;\r\nwindow.canaudio.addEventListener('change', function () {\r\n\tif (this.checked) {\r\n\t\taudioInit();\r\n\t\twindow.bgsound.play();\r\n\t} else {\r\n\t\twindow.bgsound.pause();\r\n\t}\r\n});\r\n\r\nimport {\r\n\tAdditiveBlending,\r\n\tVector3,\r\n\tCatmullRomCurve3,\r\n\tLineBasicMaterial,\r\n\tLineLoop,\r\n\tCircleGeometry,\r\n\tColor\r\n} from \"three\";\r\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\r\nconst stats = new Stats();\r\ndocument.body.appendChild( stats.dom );\r\n\r\n\r\nconst modelsPromise = (async function () {\r\n\t//异步执行loadModels()，并做解构\r\n\tconst {\r\n\t\tfish: fishScene,\r\n\t\tflotsam,\r\n\t\tlilyPad1: lilyPad1Model,\r\n\t\tlilyPad2: lilyPad2Model\r\n\t} = await models;\r\n\r\n\tfor (const l of lilyPad1) {\r\n\t\tconst newPad = lilyPad1Model.clone();\r\n\t\tnewPad.position.copy(l);\r\n\t\tnewPad.position.y = 0;\r\n\t\tnewPad.rotation.y = Math.PI*2*Math.random();\r\n\t\tnewPad.scale.multiplyScalar(0.8 + 0.4 * Math.random());\r\n\t\twater.add(newPad);\r\n\t}\r\n\r\n\tfor (const l of lilyPad2) {\r\n\t\tconst newPad = lilyPad2Model.clone();\r\n\t\tnewPad.position.copy(l);\r\n\t\tnewPad.position.y = 0;\r\n\t\tnewPad.rotation.y = Math.PI*2*Math.random();\r\n\t\tnewPad.scale.multiplyScalar(0.8 + 0.4 * Math.random());\r\n\t\twater.add(newPad);\r\n\t}\r\n\r\n\twater.add(flotsam);\r\n\t// scene.add(trees);\r\n\t// scene.remove(trees);\r\n\r\n\t/******\r\n\t  instancedFlow\r\n\t*******/\r\n\tclass Fishes extends InstancedFlow {\r\n\r\n\t\tconstructor(count, curveCount) {\r\n\t\t\tfishScene.children[0].geometry.scale(0.6, 0.6, 0.6);\r\n\t\t\tfishScene.children[0].geometry.rotateZ(Math.PI);\r\n\t\t\tfishScene.children[0].geometry.rotateY(-Math.PI / 2);\r\n\t\t\tsuper( count, curveCount, fishScene.children[0].geometry, fishScene.children[0].material );\r\n\t\t}\r\n\t}\r\n\treturn { Fishes };\r\n\r\n})(); //立即执行\r\n\r\n(async function generatePath() {\r\n\r\n\tconst { Fishes } = await modelsPromise;\r\n\tlet totalFishCount = 60;\r\n\tconst searchMatch = (window.location.search || \"\").match(/^\\?fish=(\\d+)/);\r\n\tif (searchMatch) {\r\n\t\ttotalFishCount = +searchMatch[1];\r\n\t}\r\n\tconst fishes = new Fishes(totalFishCount, curves.length); // 10 fish models, space for 2 curves\r\n\tscene.add(fishes.object3D);\r\n\twindow.fishes = fishes;\r\n\r\n\tfor (let i = 0; i < curves.length; i++) {\r\n\t\tconst curve = new CatmullRomCurve3(curves[i]);\r\n\t\tcurve.curveType = \"centripetal\";\r\n\t\tcurve.closed = true;\r\n\t\tfishes.updateCurve(i, curve);\r\n\t}\r\n\r\n\tconst totalCurveLength = fishes.curveLengthArray.reduce((a, b) => a + b, 0);\r\n\tconst noOfFishPersegment = fishes.curveLengthArray.map(length => Math.round(totalFishCount * length / totalCurveLength));\r\n\tconst noOfFish = noOfFishPersegment.slice(0);\r\n\tfor (let i = 0; i < noOfFish.length; i++) {\r\n\t\tnoOfFish[i]+=(i===0?0:noOfFish[i-1])\r\n\t}\r\n\tfor (let i = 0; i < fishes.count; i++) {\r\n\t\tconst curveIndex = noOfFish.findIndex(n => i <= n);\r\n\t\tfishes.setCurve(i, curveIndex);\r\n\t\tfishes.moveIndividualAlongCurve(i, (i * 1) / noOfFishPersegment[curveIndex]);\r\n\t\tfishes.object3D.setColorAt(i, new Color(`hsl(${Math.floor(50 * Math.random())}, ${Math.floor(100 * Math.random())}%, ${Math.floor(20 + 80 * Math.random())}%)`));\r\n\t}\r\n\r\n\tconst speedPerTick = 0.009 / 10;\r\n\trafCallbacks.add(function () {\r\n\t\t// fishes.moveAlongCurve(speedPerTick);\r\n\t\tfor (let i = 0; i < fishes.count; i++) {\r\n\t\t\tfishes.moveIndividualAlongCurve(i, speedPerTick);\r\n\t\t}\r\n\t});\r\n\r\n\trafCallbacks.add(() => stats.update());\r\n})();\r\n\r\n(function rain() {\r\n\tconst rainRipples = [];\r\n\tconst unsedRainRipples = [];\r\n\tconst geometry = new CircleGeometry(1, 32);\r\n\tconst dripPos = new Vector3();\r\n\r\n\tgeometry.rotateX(-Math.PI / 2);\r\n\tgeometry.vertices.splice(0, 1);\r\n\r\n\tfor (let i = 0; i < 5*3; i++) {\r\n\t\tconst material = new LineBasicMaterial({\r\n\t\t\tcolor: 0x999999,\r\n\t\t\tblending: AdditiveBlending,\r\n\t\t});\r\n\t\tconst mesh = new LineLoop(geometry, material);\r\n\t\trainRipples.push(mesh);\r\n\t\tunsedRainRipples.push(mesh);\r\n\t}\r\n\r\n\t(function drip() {\r\n\t\tif (unsedRainRipples.length > 3) {\r\n\t\t\tconst ripplesToUse = unsedRainRipples.splice(0, 3);\r\n\t\t\tconst x = 20 * (Math.random() - 0.5);\r\n\t\t\tconst z = 20 * (Math.random() - 0.5);\r\n\r\n\t\t\tdripPos.set(x, water.position.y, z);\r\n\t\t\tif (window.canaudio.checked) playRandomNote(dripPos);\r\n\r\n\t\t\tfor (let ri = 1; ri <= 3; ri++) {\r\n\t\t\t\tconst ripple = ripplesToUse[ri - 1];\r\n\t\t\t\tripple.position.set(x, -0.1, z);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tripple.scale.multiplyScalar(0);\r\n\t\t\t\t\tripple.material.color.setHex(0xffffff);\r\n\t\t\t\t\twater.add(ripple);\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\twater.remove(ripple);\r\n\t\t\t\t\t\tunsedRainRipples.push(ripple)\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t}, ri * 800);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetTimeout(drip, Math.random() * 1000);\r\n\t}());\r\n\r\n\tconst rippleSpeed = new Vector3(1, 1, 1).multiplyScalar(0.018);\r\n\trafCallbacks.add(function () {\r\n\t\tfor (const r of rainRipples) {\r\n\t\t\tr.scale.add(rippleSpeed);\r\n\t\t\tconst col = (r.material.color.getHex() >> 16)*0.99;\r\n\t\t\tconst newCol = (col << 16) + (col << 8) + col;\r\n\t\t\tr.material.color.setHex(newCol);\r\n\t\t}\r\n\t});\r\n})();\r\n\r\nwindow.renderer = renderer;\r\nwindow.camera = camera;\r\nwindow.scene = scene;\r\n\r\nif (location.search === \"?editor\") {\r\n\timport(\"./lib/editor.js\");\r\n}"],"names":["OrbitControls","object","domElement","offset","quat","quatInverse","lastPosition","lastQuaternion","twoPI","undefined","console","warn","document","error","this","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","Quaternion","setFromUnitVectors","up","inverse","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","onKeyDown","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","v","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","preventDefault","focus","window","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","addEventListener","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tabIndex","prototype","Object","create","EventDispatcher","constructor","MapControls","call","_global","global","self","PRIVATE","Symbol","EventTarget","[object Object]","listeners","Map","listener","Error","typedListeners","get","push","i","pop","queue","ARRAY_TYPE","Float32Array","Array","out","identity","invert","a","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","fromRotationTranslation","q","z","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","getTranslation","mat","getRotation","trace","S","perspective","fovy","aspect","near","far","nf","f","create$1","clone$1","fromValues$1","copy$1","add$1","scale$1","normalize","len","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","create$4","multiply$4","ax","ay","az","aw","bx","by","bz","bw","slerp","t","omega","cosom","sinom","scale0","scale1","acos","sin","invert$2","a0","a1","a2","a3","dot$$1","invDot","vec","create$3","clone$4","fromValues$4","copy$4","normalize$2","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","create$2","PRIVATE$1","XRRigidTransform$1","orientation","arguments","_getPoint","DOMPointReadOnly","fromPoint","arg","invMatrix","PRIVATE$2","XRSpace","specialType","inputSource","baseMatrix","inverseBaseMatrix","lastFrameId","_specialType","_inputSource","device","frameId","_onPoseUpdate","_baseMatrix","getBasePoseMatrix","_inverseBaseMatrix","space","PRIVATE$3","XRReferenceSpaceTypes","XRReferenceSpace","transform","includes","super","isFloor","originOffset","pose","transformMatrix","inverseOriginOffsetMatrix","_getSpaceRelativeTransform","_adjustForOriginOffset","XRRigidTransform","additionalOffset","newSpace","bounds","PRIVATE$4","XRSessionModes","DEFAULT_SESSION_OPTIONS","inline","requiredFeatures","optionalFeatures","immersive-vr","immersive-ar","now","startTime","Date","performance","now$1","PRIVATE$5","XRPose$1","emulatedPosition","PRIVATE$6","XRViewerPose","views","PRIVATE$7","XRViewport","width","height","XREyes","PRIVATE$8","XRView","eye","sessionId","temp","viewport","projectionMatrix","getProjectionMatrix","layer","getViewport","PRIVATE$9","NON_ACTIVE_MSG","NEXT_FRAME_ID","XRFrame","session","id","active","animationFrame","referenceSpace","DOMException","PRIVATE$15","viewerSpace","_ensurePoseUpdated","viewerTransform","viewSpace","viewSpaces","viewTransform","view","baseSpace","getInputPose","XRPose","PRIVATE$10","XRRenderStateInit","freeze","depthNear","depthFar","inlineVerticalFieldOfView","baseLayer","XRRenderState","stateInit","config","assign","POLYFILLED_XR_COMPATIBLE","XR_COMPATIBLE","PRIVATE$11","XRWebGLLayerInit","antialias","depth","stencil","alpha","multiview","ignoreDepthValues","framebufferScaleFactor","PRIVATE$12","XRInputSourceEvent","Event","eventInitDict","frame","setPrototypeOf","PRIVATE$13","XRSessionEvent","PRIVATE$14","XRInputSourcesChangeEvent","added","removed","XRViewSpace","getBaseViewMatrix","XRSession$1","mode","immersive","initialRenderState","ended","suspended","frameCallbacks","currentFrameCallbacks","frameHandle","deviceFrameHandle","activeRenderState","pendingRenderState","currentInputSources","onDeviceFrame","startDeviceFrameLoop","onBaseLayerSet","callbacks","onFrameStart","_checkInputSourcesChange","rightNow","cancelled","callback","err","onFrameEnd","requestAnimationFrame","stopDeviceFrameLoop","handle","cancelAnimationFrame","onPresentationEnd","onPresentationStart","onSelectStart","onSelectEnd","evt","dispatchInputSourceEvent","onSqueezeStart","onSqueezeEnd","onblur","onfocus","onresetpose","onend","onselect","onselectstart","onselectend","renderState","environmentBlendMode","TypeError","doesSessionSupportReferenceSpace","requestFrameOfReferenceTransform","requestStageBounds","index","findIndex","d","splice","inputSources","getInputSources","endSession","newState","_session","newInputSources","oldInputSources","newInputSource","oldInputSource","PRIVATE$16","XRInputSource","impl","gripSpace","targetRaySpace","handedness","targetRayMode","profiles","gamepad","PRIVATE$17","XRReferenceSpaceEvent","API","XRSystem","devicePromise","immersiveSession","inlineSessions","Set","then","Promise","resolve","isSessionSupported","options","defaultOptions","concat","enabledFeatures","requirementsFailed","feature","isFeatureSupported","log","requestSession","XRSession","onSessionEnd","delete","XRWebGLLayer","context","layerInit","framebuffer","getParameter","FRAMEBUFFER_BINDING","framebufferWidth","drawingBufferWidth","framebufferHeight","drawingBufferHeight","_getViewport","polyfillMakeXRCompatible","Context","makeXRCompatible","polyfillGetContext","Canvas","getContext","contextType","glAttribs","ctx","xrCompatible","commonjsGlobal","module","cardboardVrDisplay","exports","observedWarnings","match","value","classCallCheck","instance","Constructor","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","iterator","next","done","isArray","MIN_TIMESTEP","MAX_TIMESTEP","dataUri","mimeType","svg","encodeURIComponent","lerp","isIOS","test","navigator","platform","isWebViewAndroid","userAgent","indexOf","isSafari","isFirefoxAndroid","getChromeVersion","parseInt","isSafariWithoutDeviceMotion","isChromeWithoutDeviceMotion","_match$1$split","split","_match$1$split2","branch","build","isR7","isLandscapeMode","rtn","isTimestampDeltaValid","timestampDeltaS","isNaN","getScreenWidth","screen","devicePixelRatio","getScreenHeight","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","getFullscreenElement","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","linkProgram","gl","vertexSource","fragmentSource","attribLocationMap","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attribName","attachShader","bindAttribLocation","deleteShader","getProgramUniforms","uniforms","uniformCount","getProgramParameter","ACTIVE_UNIFORMS","uniformName","getActiveUniform","name","replace","getUniformLocation","orthoMatrix","lr","bt","isMobile","check","vendor","opera","substr","extend","dest","src","hasOwnProperty","safariCssSizeWorkaround","canvas","style","setTimeout","frameDataFromPose","piOver180","rad45","mat4_perspectiveFromFieldOfView","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","mat4_fromRotationTranslation","mat4_translate","mat4_invert","defaultOrientation","defaultPosition","updateEyeMatrices","projection","vrDisplay","frameData","timestamp","leftProjectionMatrix","leftViewMatrix","_getFieldOfView","_getEyeOffset","rightProjectionMatrix","rightViewMatrix","isInsideCrossOriginIFrame","isFramed","refOrigin","getOriginFromUrl","referrer","thisOrigin","location","href","url","domainIdx","protoSepIdx","domainEndIdx","substring","getQuaternionAngle","warnOnce","message","deprecateWarning","deprecated","suggested","WGLUPreserveGLState","bindings","boundValues","activeTexture","binding","TEXTURE_BINDING_2D","TEXTURE_BINDING_CUBE_MAP","textureUnit","TEXTURE0","TEXTURE31","ACTIVE_TEXTURE","boundValue","ARRAY_BUFFER_BINDING","bindBuffer","ARRAY_BUFFER","COLOR_CLEAR_VALUE","clearColor","COLOR_WRITEMASK","colorMask","CURRENT_PROGRAM","useProgram","ELEMENT_ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER","bindFramebuffer","FRAMEBUFFER","RENDERBUFFER_BINDING","bindRenderbuffer","RENDERBUFFER","bindTexture","TEXTURE_2D","TEXTURE_CUBE_MAP","VIEWPORT","BLEND","CULL_FACE","DEPTH_TEST","SCISSOR_TEST","STENCIL_TEST","enable","disable","toString","glPreserveState","distortionVS","join","distortionFS","CardboardDistorter","cardboardUI","bufferScale","dirtySubmitFrameBindings","ctxAttribs","getContextAttributes","instanceExt","getExtension","meshWidth","meshHeight","bufferWidth","bufferHeight","realBindFramebuffer","realEnable","realDisable","realColorMask","realClearColor","realViewport","realCanvasWidth","getOwnPropertyDescriptor","__proto__","realCanvasHeight","isPatched","lastBoundFramebuffer","cullFace","depthTest","blend","scissorTest","stencilTest","attribs","texCoord","viewportOffsetScale","setTextureBounds","vertexBuffer","createBuffer","indexBuffer","indexCount","renderTarget","createTexture","createFramebuffer","depthStencilBuffer","depthBuffer","stencilBuffer","createRenderbuffer","patch","onResize","destroy","unpatch","deleteProgram","deleteBuffer","deleteTexture","deleteFramebuffer","deleteRenderbuffer","glState","clear","COLOR_BUFFER_BIT","texImage2D","RGBA","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","renderbufferStorage","DEPTH_STENCIL","framebufferRenderbuffer","DEPTH_STENCIL_ATTACHMENT","DEPTH_COMPONENT16","DEPTH_ATTACHMENT","STENCIL_INDEX8","STENCIL_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","apply","pname","r","g","h","leftBounds","rightBounds","submitFrame","positionDivisor","texCoordDivisor","getVertexAttrib","VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE","enableVertexAttribArray","vertexAttribPointer","FLOAT","vertexAttribDivisorANGLE","uniform1i","diffuse","uniform4fv","drawElements","TRIANGLES","UNSIGNED_SHORT","renderNoState","preserveDrawingBuffer","updateDeviceInfo","deviceInfo","vertices","computeMeshVertices_","bufferData","STATIC_DRAW","indices","computeMeshIndices_","lensFrustum","getLeftEyeVisibleTanAngles","noLensFrustum","getLeftEyeNoLensTanAngles","getLeftEyeVisibleScreenRect","vidx","e","j","u","s","distortion","distortInverse","Uint16Array","halfwidth","halfheight","iidx","getOwnPropertyDescriptor_","proto","attrName","getAttribute","val","setAttribute","uiVS","uiFS","DEG2RAD","kAnglePerGearSection","kOuterRimEndAngle","kInnerRimBeginAngle","kOuterRadius","kMiddleRadius","kInnerRadius","kCenterLineThicknessDp","kButtonWidthDp","kTouchSlopFactor","CardboardUI","gearOffset","gearVertexCount","arrowOffset","arrowVertexCount","projMat","Distortion","coefficients","listen","optionsCallback","backCallback","midline","buttonSize","physicalPixels","dps","lineWidth","buttonScale","buttonBorder","addGearSegment","cos","segmentTheta","addArrowVertex","angledLineWidth","render","uniform4f","color","uniformMatrix4fv","projectionMat","drawArrays","TRIANGLE_STRIP","r0","r1","dr0","distort","abs","dr1","r2","ret","degToRad","radToDeg","scalar","invScalar","ix","iy","iz","iw","v1","Device","params","widthMeters","heightMeters","bevelMeters","setFromEulerXYZ","c1","c2","c3","s1","s2","s3","setFromEulerYXZ","setFromAxisAngle","axis","halfAngle","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","l","qb","cosHalfTheta","halfTheta","sinHalfTheta","ratioA","ratioB","vFrom","vTo","DEFAULT_ANDROID","DEFAULT_IOS","Viewers","CardboardV1","CardboardViewer","label","interLensDistance","baselineLensDistance","screenLensDistance","distortionCoefficients","inverseCoefficients","CardboardV2","DeviceInfo","deviceParams","additionalViewers","viewer","updateDeviceParams","determineDevice_","getDevice","setViewer","METERS_PER_INCH","metersPerPixelX","xdpi","metersPerPixelY","ydpi","bevelMm","getDistortedFieldOfViewLeftEye","eyeToScreenDistance","outerDist","innerDist","bottomDist","topDist","outerAngle","atan","innerAngle","bottomAngle","topAngle","fovLeft","fovTop","fovRight","fovBottom","halfWidth","halfHeight","verticalLensOffset","centerX","centerY","centerZ","screenLeft","screenTop","screenRight","screenBottom","result","undistortedFrustum","dist","eyeX","eyeY","getFieldOfViewLeftEye","opt_isUndistorted","getUndistortedFieldOfViewLeftEye","getFieldOfViewRightEye","p","getUndistortedParams_","getUndistortedViewportLeftEye","screenWidth","screenHeight","xPxPerTanAngle","yPxPerTanAngle","round","eyePosX","eyePosY","halfLensDistance","maxFov","viewerMax","DPDB_CACHE","format","last_updated","devices","rules","mdmh","ua","dpi","ac","res","Dpdb","onDeviceParamsUpdated","dpdb","recalculateDeviceParams_","xhr","XMLHttpRequest","obj","open","loading","status","JSON","parse","response","send","DeviceParams","SensorSample","sample","timestampS","ComplementaryFilter","kFilter","isDebug","currentAccelMeasurement","currentGyroMeasurement","previousGyroMeasurement","filterQ","previousFilterQ","accelQ","isOrientationInitialized","estimatedGravity","measuredGravity","gyroIntegralQ","PosePredictor","predictionTimeS","previousQ","previousTimestampS","deltaQ","outQ","FusionPoseSensor","predictionTime","yawOnly","accelerometer","gyroscope","filter","posePredictor","chromeVersion","isDeviceMotionInRadians","isWithoutDeviceMotion","filterToWorldQ","inverseWorldToScreenQ","worldToScreenQ","originalPoseAdjustQ","setScreenTransform_","resetQ","orientationOut_","start","getDeviceParams","newDeviceParams","calcDeviceParams_","db","matched","rule","ruleMatches_","resX","resY","sensorSample","addAccelMeasurement","vector","addGyroMeasurement","deltaT","run_","accelToQuaternion_","gyroDeltaQ","gyroToQuaternionDelta_","invFilterQ","toFixed","targetQ","getOrientation","accel","normAccel","gyro","dt","getPrediction","currentQ","angularSpeed","predictAngle","getPosition","_deviceOrientationQ","deviceOrientationFixQ","deviceOrientationFilterToWorldQ","filterOrientation","resetPose","onDeviceOrientation_","beta","gamma","onDeviceMotion_","deviceMotion","updateDeviceMotion_","accGravity","accelerationIncludingGravity","rotRate","rotationRate","timeStamp","deltaS","onOrientationChange_","screenOrientation","onMessage_","data","toLowerCase","deviceMotionEvent","onDeviceMotionCallback_","bind","onOrientationChangeCallback_","onMessageCallback_","onDeviceOrientationCallback_","stop","SENSOR_FREQUENCY","X_AXIS","Z_AXIS","SENSOR_TO_VR","PoseSensor","sensor","fusionSensor","_out","api","errors","_sensorQ","_outQ","_onSensorRead","_onSensorError","init","RelativeOrientationSensor","frequency","referenceFrame","useDeviceMotion","K_FILTER","PREDICTION_TIME_S","YAW_ONLY","DEBUG","rotateInstructionsAsset","RotateInstructions","loadIcon_","overlay","createElement","backgroundColor","fontFamily","zIndex","img","icon","marginLeft","marginTop","appendChild","text","textAlign","fontSize","lineHeight","margin","innerHTML","snackbar","padding","boxSizing","snackbarText","float","snackbarButton","fontWeight","textTransform","borderLeft","paddingLeft","textDecoration","hide","show","parent","parentElement","removeChild","body","display","querySelector","showTemporarily","ms","timer","disableShowTemporarily","clearTimeout","DEFAULT_VIEWER","VIEWER_KEY","CLASS_NAME","ViewerSelector","defaultViewer","selectedKey","localStorage","getItem","dialog","createDialog_","root","onChangeCallbacks_","unwrapExports$$1","__esModule","createCommonjsModule$$1","fn","checked","contains","getCurrentViewer","getSelectedKey_","input","onChange","cb","fireOnChange_","onSave_","setItem","container","classList","background","overflow","boxShadow","createH1_","createChoice_","createButton_","h1","marginBottom","div","onclick","letterSpacing","border","NoSleep$1","factory","commonjsGlobal$$1","modules","installedModules","__webpack_require__","moduleId","m","c","getter","o","n","property","_createClass","_classCallCheck","mediaFile","oldIOS","parseFloat","exec","MSStream","NoSleep","noSleepTimer","noSleepVideo","currentTime","random","setInterval","play","clearInterval","pause","nextDisplayId","defaultLeftBounds","defaultRightBounds","raf","caf","VRFrameData","VRDisplayCapabilities","hasPosition","hasExternalDisplay","canPresent","maxLayers","hasOrientation","VRDisplay","USE_WAKELOCK","wakelock","isPolyfilled","displayId","displayName","isPresenting","capabilities","stageParameters","waitingForPresent_","layer_","originalParent_","fullscreenElement_","fullscreenWrapper_","fullscreenElementCachedStyle_","fullscreenEventTarget_","fullscreenChangeHandler_","fullscreenErrorHandler_","wakelock_","getFrameData","_getPose","getPose","_resetPose","getImmediatePose","wrapForFullscreen","cssProperties","insertBefore","firstChild","applyFullscreenElementStyle","removeFullscreenWrapper","removeAttribute","requestPresent","layers","wasPresenting","reject","incomingLayer","source","updatePresent_","predistorted","slice","onFullscreenChange","actualFullscreenElement","lock","catch","beginPresent_","unlock","disableWakeLock","endPresent_","removeFullscreenListeners_","fireVRDisplayPresentChange_","onFullscreenError","addFullscreenListeners_","enableWakeLock","exitPresent","getLayers","CustomEvent","detail","fireVRDisplayConnect_","changeHandler","errorHandler","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","getEyeParameters","whichEye","ADDITIONAL_VIEWERS","MOBILE_WAKE_LOCK","DPDB_URL","CARDBOARD_UI_DISABLED","ROTATE_INSTRUCTIONS_DISABLED","BUFFER_SCALE","DIRTY_SUBMIT_FRAME_BINDINGS","Eye","CardboardVRDisplay","config$$1","defaults","bufferScale_","poseSensor_","distorter_","cardboardUI_","dpdb_","onDeviceParamsUpdated_","deviceInfo_","viewerSelector_","onViewerChanged_","rotateInstructions_","onResize_","linearVelocity","linearAcceleration","angularVelocity","angularAcceleration","fieldOfView","eyeParams","renderWidth","renderHeight","newParams","updateBounds_","orientationHandler","vrdisplaypresentchangeHandler","fireVRDisplayDeviceParamsChange_","lastWidth","lastHeight","vrdisplay","XRDevice","onWindowResize","featureDescriptor","coordinateSystem","poseType","oculusGo","mapping","buttons","0","1","2","gripTransform","oculusTouch","displayProfiles","Oculus Quest","axes","3","4","5","6","openVr","HTC Vive","HTC Vive DVT","Valve Index","targetRayTransform","userAgentOverrides","Firefox","samsungGearVR","samsungOdyssey","windowsMixedReality","GamepadMappings","Daydream Controller","Gear VR Controller","HTC Vive Focus Controller","Oculus Go Controller","Oculus Touch (Right)","Oculus Touch (Left)","OpenVR Gamepad","Spatial Controller (Spatial Interaction Source) 045E-065A","Spatial Controller (Spatial Interaction Source) 045E-065D","Windows Mixed Reality (Right)","Windows Mixed Reality (Left)","HEAD_ELBOW_OFFSET_RIGHTHANDED","HEAD_ELBOW_OFFSET_LEFTHANDED","ELBOW_WRIST_OFFSET","WRIST_CONTROLLER_OFFSET","ARM_EXTENSION_OFFSET","RAD_TO_DEG","OrientationArmModel","hand","headElbowOffset","controllerQ","lastControllerQ","headQ","headPos","elbowPos","wristPos","time","lastTime","rootQ","controllerOrientation","headPoseMatrix","headYawQ","getHeadYawOrientation_","angleDelta","quatAngle_","controllerForward","controllerDotY","extensionRatio","clamp_","controllerCameraQ","elbowOffset","totalAngleDeg","lerpValue","wristQ","invWristQ","elbowQ","headEuler","order","clamp","min$$1","max$$1","sqx","sqy","sqz","sqw","atan2","asin","eulerFromQuaternion","halfToRad","sx","cx","sy","cy","sz","cz","fromEuler","q1","q2","vec1","vec2","tempA","tempB","cosine","PRIVATE$18","PLACEHOLDER_BUTTON","pressed","touched","XRRemappedGamepad","map","agent","override","_update","_profiles","connected","hapticActuators","GamepadXRInputSource","polyfill","primaryButtonIndex","primarySqueezeButtonIndex","nativeGamepad","basePoseMatrix","outputMatrix","primaryActionPressed","primarySqueezeActionPressed","armModel","setHandedness","updateBasePoseMatrix","_transformBasePoseMatrix","EXTRA_PRESENTATION_ATTRIBUTES","highRefreshRate","PRIMARY_BUTTON_MAP","oculus","openvr","spatial controller (spatial interaction source)","SESSION_ID","Session","polyfillOptions","outputContext","modifiedCanvasLayer","renderContextType","renderContext","WebVRDevice","sessions","baseModelMatrix","gamepadInputSources","tempVec3","onVRDisplayPresentChange","CAN_USE_GAMEPAD","HAS_BITMAP_SUPPORT","ImageBitmapRenderingContext","createImageBitmap","isImageBitmapSupported","attributes","applyCanvasStylesForMinimalRendering","primaryButton","prevInputSources","gamepads","getGamepads","inputSourceImpl","getPrimaryButtonIndex","updateFromGamepad","mirroring","iCanvas","iWidth","iHeight","oCanvas","oWidth","oHeight","transferToImageBitmap","transferFromImageBitmap","resizeWidth","resizeHeight","bitmap","drawImage","has","sizeX","sizeZ","sittingToStandingTransform","getXRPose","forEach","CardboardXRDevice","cardboardConfig","SESSION_ID$1","Session$1","InlineDevice","identityMatrix","requestXRDevice","async","webvr","xr","displays","getVRDisplays","getWebVRDevice","mobile","cardboard","allowCardboardOnDesktop","CONFIG_DEFAULTS","partials","extendStatics","NOW$1","process","hrtime","getTime","Group","_tweens","_tweensAddedDuringUpdate","getAll","_this","tweenId","removeAll","tween","getId","remove","preserve","tweenIds","Easing","Linear","None","amount","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce","Interpolation","k","floor","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","t2","Sequence","nextId","_nextId","Tween","_object","_group","TWEEN","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","isPlaying","isPaused","to","properties","duration","prop","_swapEndStartRepeatValues","_setupProperties","startValue","startValueIsArray","propType","isInterpolationList","endValues","_handleRelativeValue","reverse","stopChainedTweens","_onStopCallback","end","resume","numChainedTweens","group","delay","repeat","times","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","tweens","onStart","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","_updateProperties","startIsArray","endIsArray","charAt","tmp","__extends","__","_super","Main","version","setTextureValue","texture","image","BITS","getUniforms","splineTexture","spineTexture","pathOffset","pathSegment","spineOffset","spineLength","flow","Matrix4","InstancedFlow","mesh","numberOfCurves","obj3D","splineTexure","dataArray","TEXTURE_WIDTH","dataTexture","DataTexture","RGBFormat","FloatType","wrapS","RepeatWrapping","wrapY","magFilter","NearestFilter","initSplineTexture","traverse","child","Mesh","InstancedMesh","material","__ok","onBeforeCompile","shader","__modified","modifyShader","curveArray","curveLengthArray","currentCurveCount","object3D","curve","curveLength","getLength","splineCurve","numberOfPoints","arcLengthDivisions","updateArcLengths","points","getSpacedPoints","frenetFrames","computeFrenetFrames","rowOffset","rowIndex","pt","tangents","normals","binormals","updateSplineTexture","count","curveCount","geometry","instanceMatrix","setUsage","DynamicDrawUsage","offsets","fill","whichCurve","makeTranslation","setMatrixAt","writeChanges","curveNo","cameraGroup","renderer","WebGLRenderer","logarithmicDepthBuffer","setPixelRatio","scene","Scene","camera","PerspectiveCamera","controls","innerWidth","innerHeight","setSize","light","DirectionalLight","intensity","SphereGeometry","sceneRadius","MeshBasicMaterial","light2","AmbientLight","skygeometry","skymaterial","side","BackSide","depthWrite","dithering","skysphere","floorTexture","TextureLoader","load","wrapT","PlaneGeometry","MeshLambertMaterial","rotation","waterTexture","water","MeshPhongMaterial","normalMap","shininess","transparent","opacity","rotateX","nativeWebXR","injected","_injectCompatibilityShims","_injectPolyfill","every","iface","className","WebGLRenderingContext","HTMLCanvasElement","OffscreenCanvas","WebGL2RenderingContext","isSecureContext","_patchNavigatorXR","originalSupportsSession","supportsSession","vrbutton","showWebXRNotFound","cursor","onmouseenter","onmouseleave","textContent","stylizeElement","borderRadius","font","outline","supported","currentSession","onSessionStarted","onSessionEnded","setSession","sessionInit","showEnterVR","createButton","canaudio","click","rafCallbacks","normalScale","boxGeometry","THREE.BoxGeometry","boxMaterial","THREE.MeshBasicMaterial","controlFlow","curves","curvePoints","curveVertices","handlePos","THREE.Mesh","THREE.CatmullRomCurve3","curveType","closed","getPoints","line","THREE.LineLoop","THREE.BufferGeometry","setFromPoints","THREE.LineBasicMaterial","THREE.FontLoader","THREE.TextGeometry","size","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","THREE.MeshStandardMaterial","updateCurve","curveIndex","setCurve","moveIndividualAlongCurve","setColorAt","THREE.Color","setAnimationLoop","moveAlongCurve","GLTFLoader","manager","Loader","dracoLoader","ddsLoader","ktx2Loader","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFMaterialsTransmissionExtension","GLTFLightsExtension","GLTFRegistry","objects","onLoad","onProgress","onError","resourcePath","path","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","unregister","content","extensions","plugins","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","asset","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","cache","refs","uses","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","Color","fromArray","range","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","createUniqueName","createNodeAttachment","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","array","baseColorTexture","assignTexture","all","materialIndex","materials","MeshPhysicalMaterial","extendMaterialParams","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","transmissionFactor","transmission","transmissionTexture","loadTexture","textureIndex","textureDef","textures","images","loadTextureImage","BINARY_EXTENSION_CHUNK_TYPES","headerView","DataView","header","magic","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","preload","GLTFMeshStandardSGMaterial","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","fog","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMapType","TangentSpaceNormalMap","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","decodeDracoFile","attribute","extendTexture","copySampleValue_","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride","stride2","stride3","td","pp","ppp","offset1","offset0","s0","m0","m1","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","5125","Uint32Array","5126","WEBGL_FILTERS","9728","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","resolveURL","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createAttributesKey","attributesKey","sort","associations","primitiveCache","meshCache","cameraCache","lightCache","nodeNamesUsed","textureLoader","ImageBitmapLoader","setCrossOrigin","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","gltfAttributeName","setIndex","box","Box3","targets","maxDisplacement","setX","setY","setZ","expandByVector","boundingBox","sphere","Sphere","getCenter","center","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","normal","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","addMorphTargets","toTrianglesDrawMode","drawMode","getIndex","numberOfTriangles","newIndices","TriangleFanDrawMode","getX","newGeometry","_invokeAll","ext","getDependencies","dependencies","scenes","animations","cameras","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","ref","_invokeOne","func","unshift","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","uri","bufferViewDef","bufferViews","buffer","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureExtensions","getHandler","URL","webkitURL","sourceURI","isObjectURL","hasAlpha","colorType","getUint8","blob","Blob","createObjectURL","isImageBitmapLoader","imageBitmap","CanvasTexture","revokeObjectURL","flipY","sampler","samplers","minFilter","mapName","mapDef","gltfReference","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","flatShading","morphTargets","uv2","uv","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","DoubleSide","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","originalName","PropertyBinding","sanitizeNodeName","loadGeometries","primitives","createDracoPrimitive","dracoExtension","geometryPromise","cached","promise","BufferGeometry","meshIndex","FrontSide","results","geometries","SkinnedMesh","skinWeight","normalizeSkinWeights","TriangleStripDrawMode","LineSegments","Line","LineLoop","Points","cameraIndex","cameraDef","MathUtils","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","updateMatrix","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","isMesh","outputArray","scaled","jl","track","createInterpolant","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","nodeName","Bone","Object3D","applyMatrix4","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","Skeleton","matrixWorld","children","sceneIndex","sceneDef","nodeIds","Constants","Handedness","ComponentState","DEFAULT","TOUCHED","PRESSED","ComponentProperty","BUTTON","Y_AXIS","ComponentType","TRIGGER","SQUEEZE","TOUCHPAD","THUMBSTICK","ButtonTouchThreshold","AxisTouchThreshold","VisualResponseProperty","TRANSFORM","VISIBILITY","fetchJsonFile","fetch","ok","statusText","fetchProfile","xrInputSource","basePath","defaultProfile","getAssetPath","supportedProfilesList","fetchProfilesList","some","profileId","supportedProfile","profilePath","profile","assetPath","layout","layouts","defaultComponentValues","xAxis","yAxis","VisualResponse","visualResponseDescription","componentProperty","states","valueNodeName","valueNodeProperty","minNodeName","maxNodeName","updateFromComponent","normalizedXAxis","normalizedYAxis","normalizeAxes","Component","componentId","componentDescription","visualResponses","gamepadIndices","rootNodeName","touchPointNodeName","responseName","visualResponse","gamepadButton","MotionController","assetUrl","layoutDescription","components","component","XRControllerModel","motionController","addAssetSceneToControllerModel","controllerModel","MotionControllerConstants","touchPointNode","getObjectByName","sphereGeometry","SphereBufferGeometry","minNode","maxNode","valueNode","findNodes","setEnvironmentMap","updateMatrixWorld","force","visible","lerpVectors","XRControllerModelFactory","gltfLoader","_assetCache","createControllerModel","controller","cachedAsset","prevGamePads","specificEvent","generalDetail","generalEvent","getSession","getController","old","blinkerSphereGeometry","translate","blinkerSphereMaterial","blinkerSphere","positionAtT","inVec","renderOrder","tempVec","tempVec1","tempVecP","tempVecV","lineGeometry","lineGeometryVertices","lineGeometryColors","blending","AdditiveBlending","guideline","guidelight","guidespriteTexture","guidesprite","controller1","guidingController","controller2","controllerModelFactory","controllerGrip1","getControllerGrip","model1","controllerGrip2","model2","feetPos","getCamera","getWorldPosition","getWorldDirection","locomotion","handleMove","handleUp","handleUpEnd","vertex","worldToLocal","toArray","curveData","lilyPad1Data","lilyPad2Data","lilyPad1","lilyPad2","models","trees","flotsam","fish","loadModels","fileNames","notes","Note","audioElement","vector3","setPosition","hasInit","Stats","addPanel","panel","dom","showPanel","cssText","beginTime","prevTime","frames","fpsPanel","Panel","msPanel","memory","memPanel","REVISION","begin","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","PR","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","audioContext","AudioContext","resonanceAudioScene","ResonanceAudio","connect","destination","setRoomProperties","front","back","down","tempVector1","tempUpVector","setListenerOrientation","setListenerPosition","filename","audioElementSource","createMediaElementSource","createSource","note","audioInit","bgsound","stats","modelsPromise","fishScene","lilyPad1Model","lilyPad2Model","newPad","Fishes","rotateZ","rotateY","totalFishCount","searchMatch","search","fishes","CatmullRomCurve3","totalCurveLength","reduce","noOfFishPersegment","noOfFish","rainRipples","unsedRainRipples","CircleGeometry","dripPos","drip","ripplesToUse","positionRelativeToHead","setLocationAndPlay","playRandomNote","ri","ripple","rippleSpeed","col","getHex","newCol","import"],"mappings":"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"}